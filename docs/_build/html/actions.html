
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Section 12: Actions And Functions &#8212; CLIPS-BPG  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Appendix A: Support Information" href="appendix.html" />
    <link rel="prev" title="Section 11: Constraint Attributes" href="constraints.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="appendix.html" title="Appendix A: Support Information"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="constraints.html" title="Section 11: Constraint Attributes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CLIPS-BPG  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="section-12-actions-and-functions">
<h1>Section 12: Actions And Functions<a class="headerlink" href="#section-12-actions-and-functions" title="Permalink to this headline">¶</a></h1>
<p>This section describes various actions and functions which may be used
on the LHS and RHS of rules, from the top-level command prompt, and from
other constructs such as deffunctions, defmessage-handlers, and
defmethods. The terms functions, actions, and commands should be thought
of interchangeably. However, when the term <strong>function</strong> is used it
generally refers to a function that returns a value. The term <strong>action</strong>
refers to a function having no return value but performing some basic
operation as a side effect (such as printout). The term <strong>command</strong>
refers to functions normally entered at the top-level command prompt
(such as the <strong>reset</strong> command, which does not return a value, and the
<strong>set-strategy</strong> command, which does return a value).</p>
<div class="section" id="predicate-functions">
<h2>12.1 Predicate Functions<a class="headerlink" href="#predicate-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions perform predicate tests.</p>
<div class="section" id="testing-for-numbers">
<h3>12.1.1 Testing For Numbers<a class="headerlink" href="#testing-for-numbers" title="Permalink to this headline">¶</a></h3>
<p>The <strong>numberp</strong> function returns the symbol TRUE if its argument is a
float or integer, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">numberp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-floats">
<h3>12.1.2 Testing For Floats<a class="headerlink" href="#testing-for-floats" title="Permalink to this headline">¶</a></h3>
<p>The <strong>floatp</strong> function returns the symbol TRUE if its argument is a
float, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">floatp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-integers">
<h3>12.1.3 Testing For Integers<a class="headerlink" href="#testing-for-integers" title="Permalink to this headline">¶</a></h3>
<p>The <strong>integerp</strong> function returns the symbol TRUE if its argument is an
integer, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">integerp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-strings-or-symbols">
<h3>12.1.4 Testing For Strings Or Symbols<a class="headerlink" href="#testing-for-strings-or-symbols" title="Permalink to this headline">¶</a></h3>
<p>The <strong>lexemep</strong> function returns the symbol TRUE if its argument is a
string or symbol, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">lexemep</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-strings">
<h3>12.1.5 Testing For Strings<a class="headerlink" href="#testing-for-strings" title="Permalink to this headline">¶</a></h3>
<p>The <strong>stringp</strong> function returns the symbol TRUE if its argument is a
string, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">stringp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-symbols">
<h3>12.1.6 Testing For Symbols<a class="headerlink" href="#testing-for-symbols" title="Permalink to this headline">¶</a></h3>
<p>The <strong>symbolp</strong> function returns the symbol TRUE if its argument is a
symbol, otherwise it returns the symbol FALSE. This function may also be
called using the name <strong>wordp</strong>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">symbolp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-even-numbers">
<h3>12.1.7 Testing For Even Numbers<a class="headerlink" href="#testing-for-even-numbers" title="Permalink to this headline">¶</a></h3>
<p>The <strong>evenp</strong> function returns the symbol TRUE if its argument is an
even number, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">evenp</span> <span class="o">&lt;</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-odd-numbers">
<h3>12.1.8 Testing For Odd Numbers<a class="headerlink" href="#testing-for-odd-numbers" title="Permalink to this headline">¶</a></h3>
<p>The <strong>oddp</strong> function returns the symbol TRUE if its argument is an odd
number, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">oddp</span> <span class="o">&lt;</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-multifield-values">
<h3>12.1.9 Testing For Multifield Values<a class="headerlink" href="#testing-for-multifield-values" title="Permalink to this headline">¶</a></h3>
<p>The <strong>multifieldp</strong> function returns the symbol TRUE if its argument is
a multifield value, otherwise it returns the symbol FALSE. This function
may also be called using the name <strong>sequencep</strong>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">multifieldp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-external-addresses">
<h3>12.1.10 Testing For External-Addresses<a class="headerlink" href="#testing-for-external-addresses" title="Permalink to this headline">¶</a></h3>
<p>The <strong>pointerp</strong> function returns the symbol TRUE if its argument is an
external-address, otherwise it returns the symbol FALSE.
External-address;es are discussed in further detail in the <em>Advanced
Programming Guide</em>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">pointerp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="comparing-for-equality">
<h3>12.1.11 Comparing for Equality<a class="headerlink" href="#comparing-for-equality" title="Permalink to this headline">¶</a></h3>
<p>The <strong>eq</strong> function returns the symbol TRUE if its first argument is
equal in value to all its subsequent arguments, otherwise it returns the
symbol FALSE. Note that <strong>eq</strong> compares types as well as values. Thus,
(eq 3 3.0) is FALSE since 3 is an integer and 3.0 is a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">eq</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Example</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">eq</span> <span class="n">foo</span> <span class="n">bar</span> <span class="n">mumble</span> <span class="n">foo</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">eq</span> <span class="n">foo</span> <span class="n">foo</span> <span class="n">foo</span> <span class="n">foo</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">eq</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="comparing-for-inequality">
<h3>12.1.12 Comparing for Inequality<a class="headerlink" href="#comparing-for-inequality" title="Permalink to this headline">¶</a></h3>
<p>The <strong>neq</strong> function returns the symbol TRUE if its first argument is
not equal in value to all its subsequent arguments, otherwise it returns
the symbol FALSE. Note that <strong>neq</strong> compares types as well as values.
Thus, (neq 3 3.0) is TRUE since 3 is an integer and 3.0 is a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">neq</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Example</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">neq</span> <span class="n">foo</span> <span class="n">bar</span> <span class="n">yak</span> <span class="n">bar</span><span class="p">)</span>

<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">neq</span> <span class="n">foo</span> <span class="n">foo</span> <span class="n">yak</span> <span class="n">bar</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">neq</span> <span class="mi">3</span> <span class="n">a</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="comparing-numbers-for-equality">
<h3>12.1.13 Comparing Numbers for Equality<a class="headerlink" href="#comparing-numbers-for-equality" title="Permalink to this headline">¶</a></h3>
<p>The <strong>=</strong> function returns the symbol TRUE if its first argument is
equal in value to all its subsequent arguments, otherwise it returns the
symbol FALSE. Note that <strong>=</strong> compares only numeric values and will
convert integers to floats when necessary for comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">=</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (= 3 3.0)
TRUE
CLIPS&gt; (= 4 4.1)
FALSE
CLIPS&gt;
? Portability Note
</pre></div>
</div>
<p>Because the precision of floating point numbers varies from one machine
to another, it is possible for the numeric comparison functions to work
correctly one machine and incorrectly on another. In fact, you should be
aware, even if code is not being ported, that roundoff error can cause
erroneous results. For example, the following expression erroneously
returns the symbol TRUE because both numbers are rounded up to
0.6666666666666666667.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">=</span> <span class="mf">0.66666666666666666666</span> <span class="mf">0.66666666666666666667</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="comparing-numbers-for-inequality">
<h3>12.1.14 Comparing Numbers for Inequality<a class="headerlink" href="#comparing-numbers-for-inequality" title="Permalink to this headline">¶</a></h3>
<p>The <strong>&lt;&gt;</strong> function returns the symbol TRUE if its first argument is not
equal in value to all its subsequent arguments, otherwise it returns the
symbol FALSE. Note that <strong>&lt;&gt;</strong> compares only numeric values and will
convert integers to floats when necessary for comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">&lt;&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;&gt;</span> <span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;&gt;</span> <span class="mi">4</span> <span class="mf">4.1</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Portability Note</p>
<p>See portability note in section 12.1.13.</p>
</div>
<div class="section" id="greater-than-comparison">
<h3>12.1.15 Greater Than Comparison<a class="headerlink" href="#greater-than-comparison" title="Permalink to this headline">¶</a></h3>
<p>The <strong>&gt;</strong> function returns the symbol TRUE if for all its arguments,
argument n-1 is greater than argument n, otherwise it returns the symbol
FALSE. Note that <strong>&gt;</strong> compares only numeric values and will convert
integers to floats when necessary for comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&gt;</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&gt;</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Portability Note</p>
<p>See portability note in section 12.1.13.</p>
</div>
<div class="section" id="greater-than-or-equal-comparison">
<h3>12.1.16 Greater Than or Equal Comparison<a class="headerlink" href="#greater-than-or-equal-comparison" title="Permalink to this headline">¶</a></h3>
<p>The <strong>&gt;=</strong> function returns the symbol TRUE if for all its arguments,
argument n-1 is greater than or equal to argument n, otherwise it
returns the symbol FALSE. Note that <strong>&gt;=</strong> compares only numeric values
and will convert integers to floats when necessary for comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">&gt;=</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
<span class="n">Example</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&gt;=</span> <span class="mi">5</span> <span class="mi">5</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&gt;=</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Portability Note</p>
<p>See portability note in section 12.1.13.</p>
</div>
<div class="section" id="less-than-comparison">
<h3>12.1.17 Less Than Comparison<a class="headerlink" href="#less-than-comparison" title="Permalink to this headline">¶</a></h3>
<p>The <strong>&lt;</strong> function returns the symbol TRUE if for all its arguments,
argument n-1 is less than argument n, otherwise it returns the symbol
FALSE. Note that <strong>&lt;</strong> compares only numeric values and will convert
integers to floats when necessary for comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">&lt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
<span class="n">Example</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Portability Note</p>
<p>See portability note in section 12.1.13.</p>
</div>
<div class="section" id="less-than-or-equal-comparison">
<h3>12.1.18 Less Than or Equal Comparison<a class="headerlink" href="#less-than-or-equal-comparison" title="Permalink to this headline">¶</a></h3>
<p>The <strong>&lt;=</strong> function returns the symbol TRUE if for all its arguments,
argument n-1 is less than or equal to argument n, otherwise it returns
the symbol FALSE. Note that <strong>&lt;=</strong> compares only numeric values and will
convert integers to floats when necessary for comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">&lt;=</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;=</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">TRUE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;=</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">FALSE</span>
<span class="n">CLIPS</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Portability Note</p>
<p>See portability note in section 12.1.13.</p>
</div>
<div class="section" id="boolean-and">
<h3>12.1.19 Boolean And<a class="headerlink" href="#boolean-and" title="Permalink to this headline">¶</a></h3>
<p>The <strong>and</strong> function returns the symbol TRUE if each of its arguments
evaluates to TRUE, otherwise it returns the symbol FALSE. The <strong>and</strong>
function performs short-circuited boolean logic. Each argument of the
function is evaluated from left to right. If any argument evaluates to
FALSE, then the symbol FALSE is immediately returned by the function.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="ow">and</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="boolean-or">
<h3>12.1.20 Boolean Or<a class="headerlink" href="#boolean-or" title="Permalink to this headline">¶</a></h3>
<p>The <strong>or</strong> function returns the symbol TRUE if any of its arguments
evaluates to TRUE, otherwise it returns the symbol FALSE. The <strong>or</strong>
function performs short-circuited boolean logic. Each argument of the
function is evaluated from left to right. If any argument evaluates to
TRUE, then the symbol TRUE is immediately returned by the function.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="ow">or</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="boolean-not">
<h3>12.1.21 Boolean Not<a class="headerlink" href="#boolean-not" title="Permalink to this headline">¶</a></h3>
<p>The <strong>not</strong> function returns the symbol TRUE if its argument evaluates
to FALSE, otherwise it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="ow">not</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="multifield-functions">
<h2>12.2 Multifield Functions<a class="headerlink" href="#multifield-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions operate on multifield values.</p>
<div class="section" id="creating-multifield-values">
<h3>12.2.1 Creating Multifield Values<a class="headerlink" href="#creating-multifield-values" title="Permalink to this headline">¶</a></h3>
<p>This function appends any number of fields together to create a
multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(create$ &lt;expression&gt;*)
</pre></div>
</div>
<p>The return value of <strong>create$</strong> is a multifield value regardless of the
number or types of arguments (single-field or multifield). Calling
<strong>create$</strong> with no arguments creates a multifield value of length zero.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS (create$ hammer drill saw screw pliers wrench)
(hammer drill saw screw pliers wrench)
CLIPS&gt; (create$ (+ 3 4) (\* 2 3) (/ 8 4))
(7 6 2.0)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="specifying-an-element">
<h3>12.2.2 Specifying an Element<a class="headerlink" href="#specifying-an-element" title="Permalink to this headline">¶</a></h3>
<p>The <strong>nth$</strong> function will return a specified field from a multifield
value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(nth$ &lt;integer-expression&gt; &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>where the first argument should be an integer from 1 to the number of
elements within the second argument. The symbol <strong>nil</strong> will be returned
if the first argument is greater than the number of fields in the second
argument.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (nth$ 3 (create$ a b c d e f g))
c
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="finding-an-element">
<h3>12.2.3 Finding an Element<a class="headerlink" href="#finding-an-element" title="Permalink to this headline">¶</a></h3>
<p>The <strong>member$</strong>?function will tell if a single field value is contained
in a multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(member$ &lt;expression&gt; &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>If the first argument is a single field value and is one of the fields
within the second argument, <strong>member$</strong> will return the integer position
of the field (from 1 to the length of the second argument). If the first
argument is a multifield value and this value is embedded in the second
argument, then the return value is a two field multifield value
consisting of the starting and ending integer indices of the first
argument within the second argument. If neither of these situations is
satisfied, then FALSE is returned.</p>
<p>Example</p>
<blockquote>
<div>CLIPS&gt; (member$ blue (create$ red 3 “text” 8.7 blue))
5
CLIPS&gt; (member$ 4 (create$ red 3 “text” 8.7 blue))
FALSE
CLIPS&gt; (member$ (create$ b c) (create$ a b c d))
(2 3)
CLIPS&gt;</div></blockquote>
</div>
<div class="section" id="comparing-multifield-values">
<h3>12.2.4 Comparing Multifield Values<a class="headerlink" href="#comparing-multifield-values" title="Permalink to this headline">¶</a></h3>
<p>This function checks if one multifield value is a subset of another;
i.e., if all the fields in the first multifield value are also in the
second multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">subsetp</span> <span class="o">&lt;</span><span class="n">multifield</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">multifield</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the first argument is a subset of the second argument, the function
returns TRUE; otherwise, it returns FALSE. The order of the fields is
not consi?dered. If the first argument is bound to a multifield of
length zero, the <strong>subsetp</strong> function always returns TRUE.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (subsetp (create$ hammer saw drill)
(create$ hammer drill wrench pliers saw))
TRUE
CLIPS&gt; (subsetp (create$ wrench crowbar)
(create$ hammer drill wrench pliers saw))
FALSE
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="deletion-of-fields-in-multifield-values">
<h3>12.2.5 Deletion of Fields in Multifield Values<a class="headerlink" href="#deletion-of-fields-in-multifield-values" title="Permalink to this headline">¶</a></h3>
<p>This function deletes the specified range from a multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(delete$ &lt;multifield-expression&gt;
  &lt;begin-integer-expression&gt;
  &lt;end-integer-expression&gt;)
</pre></div>
</div>
<p>The modified multifield value is returned, which is the same as
&lt;multifield-expression&gt; with the fields ranging from
&lt;begin-integer-expression&gt; to &lt;end-integer-expression&gt; removed. To
delete a single field, the begin range field should equal the end range
field.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (delete$ (create$ hammer drill saw pliers wrench) 3 4)
(hammer drill wrench)
CLIPS&gt; (delete$ (create$ computer printer hard-disk) 1 1)
(printer hard-disk)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="creating-multifield-values-from-strings">
<h3>12.2.6 Creating Multifield Values from Strings.<a class="headerlink" href="#creating-multifield-values-from-strings" title="Permalink to this headline">¶</a></h3>
<p>This function constructs a multifield value from a string by using each
field in a string as a field in a new multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(explode$ &lt;string-expression&gt;)
</pre></div>
</div>
<p>A new multifield value is created in which each delimited field in order
in &lt;string-expression&gt; is taken to be a field in the new multifield
value that is returned. A string with no fields creates a multifield
value of length zero. Fields other than symbols, strings, integer,
floats, or instances names (such as parentheses or variables) are
converted to strings.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (explode$ &quot;hammer drill saw screw&quot;)
(hammer drill saw screw)
CLIPS&gt; (explode$ &quot;1 2 abc 3 4 \\&quot;abc\&quot; \\&quot;def\&quot;&quot;)
(1 2 abc 3 4 &quot;abc&quot; &quot;def&quot;)
CLIPS&gt; (explode$ &quot;?x ~ )&quot;)
(&quot;?x&quot; &quot;~&quot; &quot;)&quot;)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="creating-strings-from-multifield-values">
<h3>12.2.7 Creating Strings from Multifield Values<a class="headerlink" href="#creating-strings-from-multifield-values" title="Permalink to this headline">¶</a></h3>
<p>This function creates a single string from a multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(implode$ &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>Each field in &lt;multifield-expression&gt; in order is concatenated into a
string value with a single blank sepa?rating fields. The new string is
returned.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (implode$ (create$ hammer drill screwdriver))
&quot;hammer drill screwdriver&quot;
CLIPS&gt; (implode$ (create$ 1 &quot;abc&quot; def &quot;ghi&quot; 2))
&quot;1 &quot;abc&quot; def &quot;ghi&quot; 2&quot;
CLIPS&gt; (implode$ (create$ &quot;abc def ghi&quot;))
&quot;&quot;abc def ghi&quot;&quot;
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="extracting-a-sub-sequence-from-a-multifield-value">
<h3>12.2.8 Extracting a Sub-sequence from a Multifield Value<a class="headerlink" href="#extracting-a-sub-sequence-from-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function extracts a specified range from a multifield value and
returns a new mul?tifield value containing just the sub-sequence.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(subseq$ &lt;multifield-value&gt;
  &lt;begin-integer-expression&gt;
  &lt;end-integer-expression&gt;)
</pre></div>
</div>
<p>where the second and third arguments are integers specifying the begin
and end fields of the desired sub-sequence in &lt;multifield-expression&gt;.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (subseq$ (create$ hammer drill wrench pliers) 3 4)
(wrench pliers)
CLIPS&gt; (subseq$ (create$ 1 &quot;abc&quot; def &quot;ghi&quot; 2) 1 1)
(1)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="replacing-fields-within-a-multifield-value">
<h3>12.2.9 Replacing Fields within a Multifield Value<a class="headerlink" href="#replacing-fields-within-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function replaces a range of field in a multifield value with a
series of single-field and/or multifield values and returns a new
mul?tifield value containing the replacement values within the original
multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  (replace$ &lt;multifield-expression&gt;
&lt;begin-integer-expression&gt;
    &lt;end-integer-expression&gt;
    &lt;single-or-multi-field-expression&gt;+)
</pre></div>
</div>
<p>where &lt;begin-integer-expression&gt; to &lt;end-integer-expression&gt; is the
range of values to be replaced.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (replace$ (create$ drill wrench pliers) 3 3 machete)
(drill wrench machete)
CLIPS&gt; (replace$ (create$ a b c d) 2 3 x y (create$ q r s))
(a x y q r s d)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="inserting-fields-within-a-multifield-value">
<h3>12.2.10 Inserting Fields within a Multifield Value<a class="headerlink" href="#inserting-fields-within-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function inserts a series of single-field and/or multifield values
at a specified location in a multifield value with and returns a new
mul?tifield value containing the inserted values within the original
multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(insert$ &lt;multifield-expression&gt;
  &lt;integer-expression&gt;
  &lt;single-or-multi-field-expression&gt;+)
</pre></div>
</div>
<p>where &lt;integer-expression&gt; is the location where the values are to be
inserted. This value must be greater than or equal to 1. A value of 1
inserts the new value(s) at the beginning of the
&lt;multifield-expression&gt;. Any value greater than the length of the
&lt;multifield-expression&gt; appends the new values to the end of the
&lt;multifield-expression&gt;.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (insert$ (create$ a b c d) 1 x)
(x a b c d)
CLIPS&gt; (insert$ (create$ a b c d) 4 y z)
(a b c y z d)
CLIPS&gt; (insert$ (create$ a b c d) 5 (create$ q r))
(a b c d q r)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="getting-the-first-field-from-a-multifield-value">
<h3>12.2.11 Getting the First Field from a Multifield Value<a class="headerlink" href="#getting-the-first-field-from-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function returns the first field of a multifield value as a
multifield value</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(first$ &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (first$ (create$ a b c))
(a)
CLIPS&gt; (first$ (create$))
()
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="getting-all-but-the-first-field-from-a-multifield-value">
<h3>12.2.12 Getting All but the First Field from a Multifield Value<a class="headerlink" href="#getting-all-but-the-first-field-from-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function returns all but the first field of a multifield value as a
multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(rest$ &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (rest$ (create$ a b c))
(b c)
CLIPS&gt; (rest$ (create$))
()
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="determining-the-number-of-fields-in-a-multifield-value">
<h3>12.2.13 Determining the Number of Fields in a Multifield Value<a class="headerlink" href="#determining-the-number-of-fields-in-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>The <strong>length$</strong> function returns an integer indicating the number of
fields contained in a multifield value. If the argument passed to
<strong>length$</strong> is not the appropriate type, a negative one (-1) is
returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(length$ &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (length$ (create$ a b c d e f g))
7
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="deleting-specific-values-within-a-multifield-value">
<h3>12.2.14 Deleting Specific Values within a Multifield Value<a class="headerlink" href="#deleting-specific-values-within-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function deletes specific values contained within a multifield
value and returns the modified multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(delete-member$ &lt;multifield-expression&gt; &lt;expression&gt;+)
</pre></div>
</div>
<p>where &lt;expression&gt;+ is one or more values to be deleted from
&lt;multifield-expression&gt;. If &lt;expression&gt; is a multifield value, the
entire sequence must be contained within the first argument in the
correct order.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (delete-member$ (create$ a b a c) b a)
(c)
CLIPS&gt; (delete-member$ (create$ a b c c b a) (create$ b a))
(a b c c)
CLIPS&gt;
</pre></div>
</div>
</div>
<div class="section" id="replacing-specific-values-within-a-multifield-value">
<h3>12.2.15 Replacing Specific Values within a Multifield Value<a class="headerlink" href="#replacing-specific-values-within-a-multifield-value" title="Permalink to this headline">¶</a></h3>
<p>This function replaces specific values contained within a multifield
value and returns the modified multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(replace-member$ &lt;multifield-expression&gt; &lt;substitute-expression&gt;
   &lt;search-expression&gt;+)
</pre></div>
</div>
<p>where any &lt;search-expression&gt; that is contained within
&lt;multifield-expression&gt; is replaced by &lt;substitute-expression&gt;.</p>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CLIPS&gt; (replace-member$ (create$ a b a b) (create$ a b a) a b)
(a b a a b a a b a a b a)
CLIPS&gt; (replace-member$ (create$ a b a b) (create$ a b a) (create$ a b))
(a b a a b a)
CLIPS&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="string-functions">
<h2>12.3 String Functions<a class="headerlink" href="#string-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions perform operations that are related to strings.</p>
<div class="section" id="string-concatenation">
<h3>12.3.1 String Concatenation<a class="headerlink" href="#string-concatenation" title="Permalink to this headline">¶</a></h3>
<p>The <strong>str-cat</strong> function will concatenates its arguments into a single
string.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">str</span><span class="o">-</span><span class="n">cat</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Each &lt;expression&gt; should be one of the following types: symbol, string,
float, integer, or instance-name.</p>
<p>Example</p>
<p>CLIPS&gt; (str-cat “foo” bar)</p>
<p>“foobar”</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="symbol-concatenation">
<h3>12.3.2 Symbol Concatenation<a class="headerlink" href="#symbol-concatenation" title="Permalink to this headline">¶</a></h3>
<p>The <strong>sym-cat</strong> function will concatenate its arguments into a single
symbol. It is functionally identical to the str-cat function with the
exception that the returned value is a symbol and not a string.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">sym</span><span class="o">-</span><span class="n">cat</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Each &lt;expression&gt; should be one of the following types: symbol, string,
float, integer, or instance-name.</p>
</div>
<div class="section" id="taking-a-string-apart">
<h3>12.3.3 Taking a String Apart<a class="headerlink" href="#taking-a-string-apart" title="Permalink to this headline">¶</a></h3>
<p>The <strong>sub-string</strong> function will retrieve a portion of a string from
another string.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">sub</span><span class="o">-</span><span class="n">string</span> <span class="o">&lt;</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>&lt;string-expression&gt;)</p>
<p>where the first argument, counting from one, must be a number marking
the begin?ning position in the string and the second argument must be a
number marking the ending position in the string. If the first argument
is greater than the second argument, a null string is returned.</p>
<p>Example</p>
<p>CLIPS&gt; (sub-string 3 8 “abcdefghijkl”)</p>
<p>“cdefgh”</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="searching-a-string">
<h3>12.3.4 Searching a String<a class="headerlink" href="#searching-a-string" title="Permalink to this headline">¶</a></h3>
<p>The <strong>str-index</strong> function will return the position of a string inside
another string.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">str</span><span class="o">-</span><span class="n">index</span> <span class="o">&lt;</span><span class="n">lexeme</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">lexeme</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where the second argument is searched for the first occurrence of the
first argument. The <strong>str-index</strong> function re?turns the integer starting
position, counting from one, of the first argument in the second
argument or returns the symbol FALSE if not found.</p>
<p>Example</p>
<p>CLIPS&gt; (str-index “def” “abcdefghi”)</p>
<p>4</p>
<p>CLIPS&gt; (str-index “qwerty” “qwertypoiuyt”)</p>
<p>1</p>
<p>CLIPS&gt; (str-index “qwerty” “poiuytqwer”)</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="evaluating-a-function-within-a-string">
<h3>12.3.5 Evaluating a Function within a String<a class="headerlink" href="#evaluating-a-function-within-a-string" title="Permalink to this headline">¶</a></h3>
<p>The <strong>eval</strong> function evaluates the string as though it were entered at
the command prompt.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">eval</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where the only argument is the command, constant, or global variable to
be executed. NOTE: <strong>eval</strong> does not permit the use of local variables
(except when the local variables are defined as part of the command such
as with an instance query function), nor will it evaluate any of the
construct definition forms (i.e., <strong>defrule</strong>, <strong>deffacts</strong>, etc.;). The
return value is the result of the evaluation of the string (or FALSE if
an error occurs).</p>
<p>The <strong>eval</strong> function is not available for binary-load only or run-time
CLIPS configurations (see the <em>Advanced Programming Guide</em>).</p>
<p>Example</p>
<p>CLIPS&gt; (eval “(+ 3 4)”)</p>
<p>7</p>
<p>CLIPS&gt; (eval “(create$ a b c)”)</p>
<p>(a b c)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="evaluating-a-construct-within-a-string">
<h3>12.3.6 Evaluating a Construct within a String<a class="headerlink" href="#evaluating-a-construct-within-a-string" title="Permalink to this headline">¶</a></h3>
<p>The <strong>build</strong> function evaluates the string as though it were entered at
the command prompt.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">build</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where the only argument is the construct to be added. The return value
is TRUE if the construct was added (or FALSE if an error occurs).</p>
<p>The <strong>build</strong> function is not available for binary-load only or run-time
CLIPS configurations (see the <em>Advanced Programming Guide</em>).</p>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (build “(defrule foo (a) =&gt; (assert (b)))”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (rules)</p>
<p>foo</p>
<p>For a total of 1 rule.</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="converting-a-string-to-uppercase">
<h3>12.3.7 Converting a String to Uppercase<a class="headerlink" href="#converting-a-string-to-uppercase" title="Permalink to this headline">¶</a></h3>
<p>The <strong>upcase</strong> function will return a string or symbol with uppercase
alphabetic characters.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">upcase</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (upcase “This is a test of upcase”)</p>
<p>“THIS IS A TEST OF UPCASE”</p>
<p>CLIPS&gt; (upcase A_Word_Test_for_Upcase)</p>
<p>A_WORD_TEST_FOR_UPCASE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="converting-a-string-to-lowercase">
<h3>12.3.8 Converting a String to Lowercase<a class="headerlink" href="#converting-a-string-to-lowercase" title="Permalink to this headline">¶</a></h3>
<p>The <strong>lowcase</strong> function will return a string or symbol with lowercase
alphabetic characters.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">lowcase</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (lowcase “This is a test of lowcase”)</p>
<p>“this is a test of lowcase”</p>
<p>CLIPS&gt; (lowcase A_Word_Test_for_Lowcase)</p>
<p>a_word_test_for_lowcase</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="comparing-two-strings">
<h3>12.3.9 Comparing Two Strings<a class="headerlink" href="#comparing-two-strings" title="Permalink to this headline">¶</a></h3>
<p>The <strong>str-compare</strong> function will compare two strings to determine their
logical relationship (i.e., equal to, less than, greater than). The
comparison is performed character-by-character until the strings are
exhausted (implying equal strings) or un?equal characters are found. The
positions of the unequal characters within the ASCII character set are
used to determine the logical relationship of unequal strings.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">str</span><span class="o">-</span><span class="n">compare</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>&lt;string-or-symbol-expression&gt;)</p>
<p>This function returns an integer representing the result of the
comparison (0 if the strings are equal, &lt; 0 if the first argument &lt; the
second argument, and &gt; 0 if the first argument &gt; the second argument).</p>
<p>Example</p>
<p>CLIPS&gt; (&lt; (str-compare “string1” “string2”) 0)</p>
<p>TRUE ; since “1” &lt; “2” in ASCII character set</p>
<p>CLIPS&gt; (str-compare “abcd” “abcd”)</p>
<p>0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-length-of-a-string">
<h3>12.3.10 Determining the Length of a String<a class="headerlink" href="#determining-the-length-of-a-string" title="Permalink to this headline">¶</a></h3>
<p>The <strong>str-length</strong> function returns the length of a string as an
integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">str</span><span class="o">-</span><span class="n">length</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (str-length “abcd”)</p>
<p>4</p>
<p>CLIPS&gt; (str-length xyz)</p>
<p>3</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="checking-the-syntax-of-a-construct-or-function-call-within-a-string">
<h3>12.3.11 Checking the Syntax of a Construct or Function Call within a String<a class="headerlink" href="#checking-the-syntax-of-a-construct-or-function-call-within-a-string" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>check-syntax</strong> allows the text representation of a
construct or function call to be checked for syntax and semantic errors.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">check</span><span class="o">-</span><span class="n">syntax</span> <span class="o">&lt;</span><span class="n">construct</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">function</span><span class="o">-</span><span class="n">string</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>This function returns FALSE if there are no errors or warnings
encountered parsing the construct or function call. The symbol
MISSING-LEFT-PARENTHESIS is returned if the first token is not a left
parenthesis. The symbol EXTRANEOUS-INPUT-AFTER-LAST-PARENTHESIS is
returned if there are additional tokens after the closing right
parenthesis of the construct or function call. If errors or warnings are
encounted parsing, the a multifield of length two is returned. The first
field of the multifield is a string containing the text of the error
message (or the symbol FALSE if no errors were encountered). The second
field of the multifield is a string containing the text of the warning
message (or the symbol FALSE if no warnings were encountered).</p>
<p>Example</p>
<p>CLIPS&gt; (check-syntax “(defrule example =&gt;)”)</p>
<p>FALSE</p>
<p>CLIPS&gt; (check-syntax “(defrule foo (number 40000000000000000000) =&gt;)”)</p>
<p>(FALSE “[SCANNER1] WARNING: Over or underflow of long long integer.</p>
<p>“)</p>
<p>CLIPS&gt; (check-syntax “(defrule example (3) =&gt;)”)</p>
<p>(“</p>
<p>[PRNTUTIL2] Syntax Error: Check appropriate syntax for the first field
of a pattern.</p>
<p>ERROR:</p>
<p>(defrule MAIN::example</p>
<p>(3</p>
<p>” FALSE)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="converting-a-string-to-a-field">
<h3>12.3.12 Converting a String to a Field<a class="headerlink" href="#converting-a-string-to-a-field" title="Permalink to this headline">¶</a></h3>
<p>The <strong>string-to-field</strong> function parses a string and converts its
contents to a primitive data type.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">string</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">field</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where the only argument is the string to be parsed. Essentially calling
<strong>string-to-field</strong> with its string argument is equivalent to calling
the <strong>read</strong> function and manually typing the contents of the string
argument or reading it from a file. It is preferable to call
<strong>string-to-field</strong> rather than <strong>eval</strong> to convert a string to a
primitive data type since the <strong>eval</strong> function is not available for
binary-load only or run-time CLIPS configurations (see the <em>Advanced
Programming Guide</em>).</p>
<p>Example</p>
<p>CLIPS&gt; (string-to-field “3.4”)</p>
<p>3.4</p>
<p>CLIPS&gt; (string-to-field “a b”)</p>
<p>a</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="the-clips-i-o-system">
<h2>12.4 The CLIPS I/O System<a class="headerlink" href="#the-clips-i-o-system" title="Permalink to this headline">¶</a></h2>
<p>CLIPS uses a system called I/O routers to provide very flexible I/O
while remaining portable. A more complete discussion of I/O routers is
covered in the <em>Advanced Programming Guide</em>.</p>
<div class="section" id="logical-names">
<h3>12.4.1 Logical Names<a class="headerlink" href="#logical-names" title="Permalink to this headline">¶</a></h3>
<p>One of the key concepts of I/O routing is the use of logical names.
Logical names allow reference to an I/O device without having to
understand the details of the imple?mentation of the reference. Many
functions in CLIPS make use of logical names. A logical name can be
either a symbol, a number, or a string. Several logical names are
predefined by CLIPS and are used extensively throughout the CLIPS code.
These are</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stdin</td>
<td>The default for all user inputs. The read and readline functions read from stdin if t is specified as the logical name.</td>
</tr>
<tr class="row-odd"><td>stdout</td>
<td>The default for all user output. The printout and format functions write to stdout if t is specified as the logical name.</td>
</tr>
<tr class="row-even"><td>wclips</td>
<td>The CLIPS prompt is sent to this logical name.</td>
</tr>
<tr class="row-odd"><td>wdialog</td>
<td>All informational messages are sent to this logical name.</td>
</tr>
<tr class="row-even"><td>wdisplay</td>
<td>Requests to display CLIPS information, such as facts or rules, are sent to this logical name.</td>
</tr>
<tr class="row-odd"><td>werror</td>
<td>All error messages are sent to this logical name.</td>
</tr>
<tr class="row-even"><td>wwarning</td>
<td>All warning messages are sent to this logical name.</td>
</tr>
<tr class="row-odd"><td>wtrace</td>
<td>All watch information is sent to this logical name (with the exception of compilations which is sent to wdialog).</td>
</tr>
</tbody>
</table>
<p>Any of these logical names may be used anywhere a logical name is
expected.</p>
</div>
<div class="section" id="common-i-o-functions">
<h3>12.4.2 Common I/O Functions<a class="headerlink" href="#common-i-o-functions" title="Permalink to this headline">¶</a></h3>
<p>CLIPS provides some of the most commonly needed I/O capabilities through
several predefined functions.</p>
<div class="section" id="open">
<h4>12.4.2.1 Open<a class="headerlink" href="#open" title="Permalink to this headline">¶</a></h4>
<p>The <strong>open</strong> function allows a user to open a file from the RHS of a
rule and attaches a logical name to it. This function takes three
arguments: (1) the name of the file to be opened; (2) the logical name
which will be used by other CLIPS I/O functions to ac?cess the file; and
(3) an optional mode specifier. The mode specifier must be one of the
fol?lowing strings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Mode</strong></th>
<th class="head"><strong>Means</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>r</td>
<td>Character read access. Specified file must exist.</td>
</tr>
<tr class="row-odd"><td>w</td>
<td>Character write access. Existing content overwritten.</td>
</tr>
<tr class="row-even"><td>a</td>
<td>Character write access. Writes append to end of file.</td>
</tr>
<tr class="row-odd"><td>rb</td>
<td>Binary read access. Specified file must exist.</td>
</tr>
<tr class="row-even"><td>wb</td>
<td>Binary write access. Existing content overwritten.</td>
</tr>
<tr class="row-odd"><td>ab</td>
<td>Binary write access. Writes append to end of file.</td>
</tr>
</tbody>
</table>
<p>If the mode is not specified, it defaults to character read access.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">open</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>The &lt;file-name&gt; must either be a string or symbol and may include
directory speci?fiers. If a string is used, the backslash () and any
other special characters that are part of &lt;file-name&gt; must be escaped
with a backslash. The logical name should not have been used previously.
The <strong>open</strong> function returns TRUE if it was successful, otherwise
FALSE.</p>
<p>Example</p>
<p>CLIPS&gt; (open “myfile.clp” writeFile “w”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (open “MS-DOS/directory/file.clp” readFile)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="close">
<h4>12.4.2.2 Close<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h4>
<p>The <strong>close</strong> function closes a file stream previously opened with the
<strong>open</strong> com?mand. The file is specified by a logical name previously
attached to the desired stream.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">close</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>If <strong>close</strong> is called without arguments, all open files will be closed.
The user is responsible for closing all files opened during execution.
If files are not closed, the contents are not guaranteed correct,
however, CLIPS will attempt to close all open files when the <strong>exit</strong>
command is executed. The <strong>close</strong> function returns TRUE if any files
were successfully closed, otherwise FALSE.</p>
<p>Example</p>
<p>CLIPS&gt; (open “myfile.clp” writeFile “w”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (open “MS-DOS/directory/file.clp” readFile)</p>
<p>TRUE</p>
<p>CLIPS&gt; (close writeFile)</p>
<p>TRUE</p>
<p>CLIPS&gt; (close writeFile)</p>
<p>FALSE</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt; (close)</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="printout">
<h4>12.4.2.3 Printout<a class="headerlink" href="#printout" title="Permalink to this headline">¶</a></h4>
<p>The function <strong>printout</strong> allows output to a device attached to a
logical name. The logical name <em>must</em> be specified and the device must
have been prepared previously for output (e.g., a file must be opened
first). To send output to <strong>stdout</strong>, use a <strong>t</strong> for the logical name.
If the logical name <strong>nil</strong> is used, the <strong>printout</strong> function does
nothing.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">printout</span> <span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Any number of expressions may be placed in a <strong>printout</strong> to be printed.
Each expression is evaluated and printed (with no spaces added between
each printed expression). The symbol <strong>crlf</strong> used as an &lt;expression&gt;
will force a carriage return/newline and may be placed anywhere in the
list of expressions to be printed. Similarly, the symbols <strong>tab</strong>,
<strong>vtab</strong>, and <strong>ff</strong> will print respectively a tab, a vertical tab, and
a form feed. The appearance of these special symbols may vary from one
operating system to another. The printout function strips quotation
marks from around strings when it prints them. Fact-addresses,
instance-addresses and external-addresses can be printed by the printout
function. This function has no return value.</p>
<p>Example</p>
<p>CLIPS&gt; (printout t “Hello there!” crlf)</p>
<p>Hello There!</p>
<p>CLIPS&gt; (open “data.txt” mydata “w”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (printout mydata “red green”)</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="read">
<h4>12.4.2.4 Read<a class="headerlink" href="#read" title="Permalink to this headline">¶</a></h4>
<p>The <strong>read</strong> function allows a user to input information for a single
field. All of the stan?dard field rules (e.g., multiple symbols must be
embedded within quotes) apply.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">read</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>where &lt;logical-name&gt; is an optional parameter. If specified, <strong>read</strong>
tries to read from whatever is attached to the logical file name. If
&lt;logical-name&gt; is <strong>t</strong> or is not speci?fied, the function will read
from <strong>stdin</strong>. All the delimiters defined in section 2.3.1 can be used
as delimiters. The <strong>read</strong> function always returns a primitive data
type. Spaces, carriage returns, and tabs only act as delimiters and are
not contained within the return value (unless these characters are
included within double quotes as part of a string). If an end of file
(EOF) is encountered while reading, <strong>read</strong> will return the symbol
<strong>EOF</strong>. If errors are encountered while reading, the string “<strong>* READ
ERROR *</strong>” will be returned.</p>
<p>Example</p>
<p>CLIPS&gt; (open “data.txt” mydata “w”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (printout mydata “red green”)</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt; (open “data.txt” mydata)</p>
<p>TRUE</p>
<p>CLIPS&gt; (read mydata)</p>
<p>red</p>
<p>CLIPS&gt; (read mydata)</p>
<p>green</p>
<p>CLIPS&gt; (read mydata)</p>
<p>EOF</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="readline">
<h4>12.4.2.5 Readline<a class="headerlink" href="#readline" title="Permalink to this headline">¶</a></h4>
<p>The <strong>readline</strong> function is similar to the <strong>read</strong> function, but it
allows a whole string to be input instead of a single field. Normally,
<strong>read</strong> will stop when it encounters a delimiter. The <strong>readline</strong>
function only stops when it encounters a carriage return, a semicolon,
or an EOF. Any tabs or spaces in the input are returned by <strong>readline</strong>
as a part of the string. The <strong>readline</strong> function returns a string.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">readline</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>where &lt;logical-name&gt; is an optional parameter. If specified,
<strong>readline</strong> tries to read from whatever is attached to the logical file
name. If &lt;logical-name&gt; is <strong>t</strong> or is not spec?i?fied, the function
will read from <strong>stdin</strong>. As with the <strong>read</strong> function, if an EOF is
encountered, <strong>readline</strong> will return the symbol EOF. If an error is
encountered during input, <strong>readline</strong> returns the string “<strong>* READ
ERROR *</strong>”.</p>
<p>Example</p>
<p>CLIPS&gt; (open “data.txt” mydata “w”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (printout mydata “red green”)</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt; (open “data.txt” mydata)</p>
<p>TRUE</p>
<p>CLIPS&gt; (readline mydata)</p>
<p>“red green”</p>
<p>CLIPS&gt; (readline mydata)</p>
<p>EOF</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="format">
<h4>12.4.2.6 Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h4>
<p>The <strong>format</strong> function allows a user to send formatted output to a
device attached to a logical name. It can be used in place of
<strong>printout</strong> when special formatting of out?put information is desired.
Although a slightly more complicated function, <strong>format</strong> pro?vides much
better control over how the output is formatted. The format commands are
simi?lar to the <strong>printf</strong> statement in C. The <strong>format</strong> function
always returns a string containing the formatted output. A logical name
of <strong>nil</strong> may be used when the formatted return string is desired
without writing to a device.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">format</span> <span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>If <strong>t</strong> is given, output is sent to <strong>stdout</strong>. The second argument to
format, called the control string, specifies how the output should be
formatted. Subsequent arguments to format (the parameter list for the
control string) are the expressions which are to be out?put as indicated
by the control string. <strong>Format</strong> currently does not allow expressions
returning multifield values to be included in the parameter list.</p>
<p>The control string consists of text and format flags. Text is output
exactly as speci?fied, and format flags describe how each parameter in
the parameter list is to be for?matted. The first format flag
corresponds to the first value in the parameter list, the second flag
corresponds to the second value, etc. The format flags must be preceded
by a percent sign (%) and are of the general format</p>
<p>%-M.Nx</p>
<p>where x is one of the flags listed below, the minus sign is an optional
justification flag, and M and N are optional parameters which specify
the field width and the precision argument (which varies in meaning
based on the format flag). If M is used, at least M characters will be
output. If more than M characters are required to display the value,
<strong>format</strong> expands the field as needed. If M starts with a 0 (e.g.,
%07d), a zero is used as the pad character; oth?er?wise, spaces are
used. If N is not specified, it defaults to six digits for
floating-point numbers. If a minus sign is included before the M, the
value will be left justified; oth?erwise the value is right justified.</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Format Flag</strong></th>
<th class="head"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>c</td>
<td>Display parameter as a single character.</td>
</tr>
<tr class="row-odd"><td>d</td>
<td>Display parameter as a long long integer. (The N specifier is the minimum number of digits to be printed.)</td>
</tr>
<tr class="row-even"><td>f</td>
<td>Display parameter as a floating-point number (The N specifier is the number of digits following the decimal point).</td>
</tr>
<tr class="row-odd"><td>e</td>
<td>Display parameter as a floating-point using power of 10 notation (The N specifier is the number of digits following the decimal point).</td>
</tr>
<tr class="row-even"><td>g</td>
<td>Display parameter in the most general format, whichever is shorter (the N specifier is the number of significant digits to be printed).</td>
</tr>
<tr class="row-odd"><td>o</td>
<td>Display parameter as an unsigned octal number. (The N specifier is the minimum number of digits to be printed.)</td>
</tr>
<tr class="row-even"><td>x</td>
<td>Display parameter as an unsigned hexadecimal number. (The N specifier is the minimum number of digits to be printed.)</td>
</tr>
<tr class="row-odd"><td>s</td>
<td>Display parameter as a string. Strings will have the leading and trailing quotes stripped. (The N specifier indicates the maximum number of characters to be printed. Zero also cannot be used for the pad character.)</td>
</tr>
<tr class="row-even"><td>n</td>
<td>Put a new line in the output.</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>Put a carriage return in the output.</td>
</tr>
<tr class="row-even"><td>%</td>
<td>Put the percent character in the output.</td>
</tr>
</tbody>
</table>
<p>Example</p>
<p>CLIPS&gt; (format t “Hello World!%n”)</p>
<p>Hello World!</p>
<p>“Hello World!</p>
<p>“</p>
<p>CLIPS&gt; (format nil “Integer: |%d|” 12)</p>
<p>“Integer: |12|”</p>
<p>CLIPS&gt; (format nil “Integer: |%4d|” 12)</p>
<p>“Integer: | 12|”</p>
<p>CLIPS&gt; (format nil “Integer: |%-04d|” 12)</p>
<p>“Integer: |12 |”</p>
<p>CLIPS&gt; (format nil “Integer: |%6.4d|” 12)</p>
<p>“Integer: | 0012|”</p>
<p>CLIPS&gt; (format nil “Float: |%f|” 12.01)</p>
<p>“Float: |12.010000|”</p>
<p>CLIPS&gt; (format nil “Float: |%7.2f| “12.01)</p>
<p>“Float: | 12.01| “</p>
<p>CLIPS&gt; (format nil “Test: |%e|” 12.01)</p>
<p>“Test: |1.201000e+01|”</p>
<p>CLIPS&gt; (format nil “Test: |%7.2e|” 12.01)</p>
<p>“Test: |1.20e+01|”</p>
<p>CLIPS&gt; (format nil “General: |%g|” 1234567890)</p>
<p>“General: |1.23457e+09|”</p>
<p>CLIPS&gt; (format nil “General: |%6.3g|” 1234567890)</p>
<p>“General: |1.23e+09|”</p>
<p>CLIPS&gt; (format nil “Hexadecimal: |%x|” 12)</p>
<p>“Hexadecimal: |c|”</p>
<p>CLIPS&gt; (format nil “Octal: |%o|” 12)</p>
<p>“Octal: |14|”</p>
<p>CLIPS&gt; (format nil “Symbols: |%s| |%s|” value-a1 capacity)</p>
<p>“Symbols: |value-a1| |capacity|”</p>
<p>CLIPS&gt;</p>
<p>? Portability Note</p>
<p>The <strong>format</strong> function uses the C function <strong>sprintf</strong> as a base. Some
systems may not support <strong>sprintf</strong> or may not support all of these
features, which may affect how <strong>format</strong> works.</p>
</div>
<div class="section" id="rename">
<h4>12.4.2.7 Rename<a class="headerlink" href="#rename" title="Permalink to this headline">¶</a></h4>
<p>The <strong>rename</strong> function is used to change the name of a file.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">rename</span> <span class="o">&lt;</span><span class="n">old</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">new</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both &lt;old-file-name&gt; and &lt;new-file-name&gt; must either be a string or
symbol and may include directory speci?fiers. If a string is used, the
backslash () and any other special characters that are part of either
&lt;old-file-name&gt; or &lt;new-file-name&gt; must be escaped with a backslash. The
<strong>rename</strong> function returns TRUE if it was successful, otherwise FALSE.</p>
<p>? Portability Note</p>
<p>The <strong>rename</strong> function uses the ANSI C function <strong>rename</strong> as a base.</p>
</div>
<div class="section" id="remove">
<h4>12.4.2.8 Remove<a class="headerlink" href="#remove" title="Permalink to this headline">¶</a></h4>
<p>The <strong>remove</strong> function is used to delete a file.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">remove</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>The &lt;file-name&gt; must either be a string or symbol and may include
directory speci?fiers. If a string is used, the backslash () and any
other special characters that are part of &lt;file-name&gt; must be escaped
with a backslash. The <strong>remove</strong> function returns TRUE if it was
successful, otherwise FALSE.</p>
<p>? Portability Note</p>
<p>The <strong>remove</strong> function uses the ANSI C function <strong>remove</strong> as a base.</p>
</div>
<div class="section" id="get-character">
<h4>12.4.2.9 Get Character<a class="headerlink" href="#get-character" title="Permalink to this headline">¶</a></h4>
<p>The <strong>get-char</strong> function allows a single character to be retrieved from
a logical name.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">char</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>where &lt;logical-name&gt; is an optional parameter. If specified,
<strong>get-char</strong> tries to retrieve a character from the specified logical
file name. If &lt;logical-name&gt; is <strong>t</strong> or is not speci?fied, the function
will read from <strong>stdin</strong>. The return value is the integer ASCII value of
the character retrieved. The value of -1 is returned if the end of file
is encountered while retrieving a character.</p>
<p>Example</p>
<p>CLIPS&gt; (open example.txt example “w”)</p>
<p>TRUE</p>
<p>CLIPS&gt; (printout example “ABC” crlf)</p>
<p>CLIPS&gt; (close example)</p>
<p>TRUE</p>
<p>CLIPS&gt; (open example.txt example)</p>
<p>TRUE</p>
<p>CLIPS&gt; (get-char example)</p>
<p>65</p>
<p>CLIPS&gt; (format nil “%c” (get-char example))</p>
<p>“B”</p>
<p>CLIPS&gt; (get-char example)</p>
<p>67</p>
<p>CLIPS&gt; (get-char example)</p>
<p>10</p>
<p>CLIPS&gt; (get-char example)</p>
<p>-1</p>
<p>CLIPS&gt;</p>
<p>(progn (printout t “Press any character to continue…”)</p>
<p>(get-char t))</p>
<p>Press any character to continue…</p>
<p>13</p>
<p>CLIPS&gt; (close)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="read-number">
<h4>12.4.2.10 Read Number<a class="headerlink" href="#read-number" title="Permalink to this headline">¶</a></h4>
<p>The <strong>read-number</strong> function allows a user to input a single number
using the localized format (if one has been specified using the
set-locale function). If a localized format has not been specified, then
the C format for a number is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">read</span><span class="o">-</span><span class="n">number</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">logical</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>where &lt;logical-name&gt; is an optional parameter. If specified,
<strong>read-number</strong> tries to read from whatever is attached to the logical
file name. If &lt;logical-name&gt; is <strong>t</strong> or is not speci?fied, the function
will read from <strong>stdin</strong>. If a number is successfully parsed, the
<strong>read-number</strong> function will return either an integer (if the number
contained just a sign and digits) or a float (if the number contained
the localized decimal point character or an exponent). If an end of file
(EOF) is encountered while reading, <strong>read-number</strong> will return the
symbol <strong>EOF</strong>. If errors are encountered while reading, the string
“<strong>* READ ERROR *</strong>” will be returned.</p>
<p>Example</p>
<p>CLIPS&gt; (read-number)</p>
<p>34</p>
<p>34</p>
<p>CLIPS&gt; (read-number)</p>
<p>34.0</p>
<p>34.0</p>
<p>CLIPS&gt; (read-number)</p>
<p>23,0</p>
<p>“<strong>* READ ERROR *</strong>”</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="set-locale">
<h4>12.4.2.11 Set Locale<a class="headerlink" href="#set-locale" title="Permalink to this headline">¶</a></h4>
<p>The <strong>set-locale</strong> function allows a user to specify a locale which
affects the numeric format behavior of the <strong>format</strong> and
<strong>read-number</strong> functions. Before a number is printed by the <strong>format</strong>
function or is parsed by the <strong>read-number</strong> function, the locale is
temporarily changed to the last value specified to the <strong>set-locale</strong>
function (or the default C locale if no value was previously specified).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">set</span><span class="o">-</span><span class="n">locale</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">locale</span><span class="o">-</span><span class="n">string</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>where the optional argument &lt;locale-string&gt; is a string containing the
new locale to be used by the <strong>format</strong> and <strong>read-number</strong> functions.
If &lt;local-string&gt; is specified, then the value of the previous locale is
returned. If &lt;locale-string&gt; is not specified, then the value of the
current locale is returned. A &lt;locale-string&gt; value of “” uses the
native locale (and the specification of this locale is dependent on the
environment in which CLIPS is run). A &lt;locale-string&gt; of “C” specifies
the standard C locale (which is the default).</p>
<p>Example</p>
<p>;;; This example assumes that the native</p>
<p>;;; locale has been set to Germany.</p>
<p>CLIPS&gt; (read-number)</p>
<p>3.21</p>
<p>3.21</p>
<p>CLIPS&gt; (read-number)</p>
<p>3,21</p>
<p>“<strong>* READ ERROR *</strong>”</p>
<p>CLIPS&gt; (format nil “%f” 3.1)</p>
<p>“3.100000”</p>
<p>CLIPS&gt; (set-locale “”)</p>
<p>“C”</p>
<p>CLIPS&gt; (read-number)</p>
<p>3.21</p>
<p>“<strong>* READ ERROR *</strong>”</p>
<p>CLIPS&gt; (read-number)</p>
<p>3,21</p>
<p>3.21</p>
<p>CLIPS&gt; (format nil “%f” 3.1)</p>
<p>“3,100000”</p>
<p>CLIPS&gt;</p>
<p>? Portability Note</p>
<p>The CLIPS <strong>set-locale</strong> function uses the ANSI C function <strong>setlocale</strong>
to temporarily change the locale. Setting the native locale used by the
setlocale function when &lt;local-string&gt; is specified as the empty string
“” varies from one operating system to another. For example, in Windows
7 the native locale is set by clicking on the Start menu, selecting
Control Panel, selecting Region and Language, selecting the Formats tab,
and then selecting a region from the drop-down menu such as German
(Germany). Alternately in Windows, the &lt;local-string&gt; could be specified
as ?DE? for Germany.</p>
<p>In Mac OS X, the native local can be specified by launching System
Preferences, clicking on Language &amp; Region, and then setting the region
to Germany. However, this only works when running CLIPS from the
Terminal application. Alternately the &lt;locale-string&gt; could be specified
as ?de_DE? to specify Germany for either the GUI or Terminal version of
CLIPS.</p>
</div>
</div>
</div>
<div class="section" id="math-functions">
<h2>12.5 Math Functions<a class="headerlink" href="#math-functions" title="Permalink to this headline">¶</a></h2>
<p>CLIPS provides several functions for mathematical computa?tions. They
are split into two packages: a set of standard math functions and a set
of extended math functions.</p>
<div class="section" id="standard-math-functions">
<h3>12.5.1 Standard Math Functions<a class="headerlink" href="#standard-math-functions" title="Permalink to this headline">¶</a></h3>
<p>The standard math functions are listed below. These func?tions should be
used only on numeric arguments. An error message will be printed if a
string argument is passed to a math function.</p>
<div class="section" id="addition">
<h4>12.5.1.1 Addition<a class="headerlink" href="#addition" title="Permalink to this headline">¶</a></h4>
<p>The <strong>+</strong> function returns the sum of its arguments. Each of its
arguments should be a numeric expression. Addition is performed using
the type of the arguments provided unless mixed mode arguments (integer
and float) are used. In this case, the function return value and integer
arguments are converted to floats after the first float argument has
been encountered. This function returns a float if any of its arguments
is a float, otherwise it returns an integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">+</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (+ 2 3 4)</p>
<p>9</p>
<p>CLIPS&gt; (+ 2 3.0 5)</p>
<p>10.0</p>
<p>CLIPS&gt; (+ 3.1 4.7)</p>
<p>7.8</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="subtraction">
<h4>12.5.1.2 Subtraction<a class="headerlink" href="#subtraction" title="Permalink to this headline">¶</a></h4>
<p>The <strong>-</strong>- function returns the value of the first argument minus the
sum of all subsequent arguments. Each of its arguments should be a
numeric expression. Subtraction is performed using the type of the
arguments provided unless mixed mode arguments (integer and float) are
used. In this case, the function return value and integer arguments are
converted to floats after the first float argument has been encountered.
This function returns a float if any of its arguments is a float,
otherwise it returns an integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">-</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (- 12 3 4)</p>
<p>5</p>
<p>CLIPS&gt; (- 12 3.0 5)</p>
<p>4.0</p>
<p>CLIPS&gt; (- 4.7 3.1)</p>
<p>1.6</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="multiplication">
<h4>12.5.1.3 Multiplication<a class="headerlink" href="#multiplication" title="Permalink to this headline">¶</a></h4>
<p>The <strong>*</strong> function returns the product of its arguments. Each of its
arguments should be a numeric expression. Multiplication is performed
using the type of the arguments provided unless mixed mode arguments
(integer and float) are used. In this case, the function return value
and integer arguments are converted to floats after the first float
argument has been encountered. This function returns a float if any of
its arguments is a float, otherwise it returns an integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>\<span class="o">*</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (* 2 3 4)</p>
<p>24</p>
<p>CLIPS&gt; (* 2 3.0 5)</p>
<p>30.0</p>
<p>CLIPS&gt; (* 3.1 4.7)</p>
<p>14.57</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="division">
<h4>12.5.1.4 Division<a class="headerlink" href="#division" title="Permalink to this headline">¶</a></h4>
<p>The <strong>/</strong> function returns the value of the first argument divided by
each of the subsequent arguments. Each of its arguments should be a
numeric expression. Division is performed using the type of the
arguments provided unless mixed mode arguments (integer and float) are
used. In this case, the function return value and integer arguments are
converted to floats after the first float argument has been encountered.
By default, the dividend (the first argument) is <em>automatically
converted</em> to a floating point number so that the result is a floating
pointer number. The function <strong>set-auto-float-dividend</strong> can be used to
control this behavior. If for example, the auto-float feature is
disabled, the expression (/ 4 3 4.0) evaluates to 0.25 as opposed to
0.333333333 if this feature were enabled. This function returns a float
if any of its arguments is a float, otherwise it returns an integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">/</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (/ 4 2)</p>
<p>2.0</p>
<p>CLIPS&gt; (/ 4.0 2.0)</p>
<p>2.0</p>
<p>CLIPS&gt; (/ 24 3 4)</p>
<p>2.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="integer-division">
<h4>12.5.1.5 Integer Division<a class="headerlink" href="#integer-division" title="Permalink to this headline">¶</a></h4>
<p>The <strong>div</strong> function returns the value of the first argument divided by
each of the subsequent arguments. Each of its arguments should be a
numeric expression. Each argument is <em>automatically converted</em> to an
integer and integer division is performed. This function returns an
integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">div</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (div 4 2)</p>
<p>2</p>
<p>CLIPS&gt; (div 5 2)</p>
<p>2</p>
<p>CLIPS&gt; (div 33 2 3 5)</p>
<p>1</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="maximum-numeric-value">
<h4>12.5.1.6 Maximum Numeric Value<a class="headerlink" href="#maximum-numeric-value" title="Permalink to this headline">¶</a></h4>
<p>The <strong>max</strong> function returns the value of its largest numeric argument.
Each of its arguments should be a numeric expression. When necessary,
integers are temporarily converted to floats for comparison. The return
value will either be integer or float (depending upon the type of the
largest argument).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">max</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (max 3.0 4 2.0)</p>
<p>4</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="minimum-numeric-value">
<h4>12.5.1.7 Minimum Numeric Value<a class="headerlink" href="#minimum-numeric-value" title="Permalink to this headline">¶</a></h4>
<p>The <strong>min</strong> function returns the value of its smallest numeric argument.
Each of its arguments should be a numeric expression. When necessary,
integers are temporarily converted to floats for comparison. The return
value will either be integer or float (depending upon the type of the
smallest argument).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">min</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (min 4 0.1 -2.3)</p>
<p>-2.3</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="absolute-value">
<h4>12.5.1.8 Absolute Value<a class="headerlink" href="#absolute-value" title="Permalink to this headline">¶</a></h4>
<p>The <strong>abs</strong> function returns the absolute value of its only argument
(which should be a numeric expression). The return value will either be
integer or float (depending upon the type the argument).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">abs</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (abs 4.0)</p>
<p>4.0</p>
<p>CLIPS&gt; (abs -2)</p>
<p>2</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="convert-to-float">
<h4>12.5.1.9 Convert To Float<a class="headerlink" href="#convert-to-float" title="Permalink to this headline">¶</a></h4>
<p>The <strong>float</strong> function converts its only argument (which should be a
numeric expression) to type float and returns this value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">float</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (float 4.0)</p>
<p>4.0</p>
<p>CLIPS&gt; (float -2)</p>
<p>-2.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="convert-to-integer">
<h4>12.5.1.10 Convert To Integer<a class="headerlink" href="#convert-to-integer" title="Permalink to this headline">¶</a></h4>
<p>The <strong>integer</strong> function converts its only argument (which should be a
numeric expression) to type integer and returns this value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">integer</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (integer 4.0)</p>
<p>4</p>
<p>CLIPS&gt; (integer -2)</p>
<p>-2</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="extended-math-functions">
<h3>12.5.2 Extended Math Functions<a class="headerlink" href="#extended-math-functions" title="Permalink to this headline">¶</a></h3>
<p>In addition to standard math functions, CLIPS also provides a large
number of scien?tific and trigonometric math functions for more
extensive computations. Although included in the generic version of
CLIPS, if an expert system does not need these cap?a?bilities, these
functions may be excluded from the executable element of CLIPS to
pro?vide more memory (see the <em>Advanced Programming Guide</em>).</p>
<div class="section" id="trigonometric-functions">
<h4>12.5.2.1 Trigonometric Functions<a class="headerlink" href="#trigonometric-functions" title="Permalink to this headline">¶</a></h4>
<p>The following trigonometric functions take one numeric argument and
return a floating-point number. The argument is expected to be in
radians.</p>
<p>acos         arccosine    acosh        hyperbolic arccosine
acot         arccotangent acoth        hyperbolic arccotangent
acsc         arccosecant  acsch        hyperbolic arccosecant
asec         arcsecant    asech        hyperbolic arcsecant
asin         arcsine      asinh        hyperbolic arcsine
atan         arctangent   atanh        hyperbolic arctangent
cos          cosine       cosh         hyperbolic cosine
cot          cotangent    coth         hyperbolic cotangent
csc          cosecant     csch         hyperbolic cosecant
sec          secant       sech         hyperbolic secant
sin          sine         sinh         hyperbolic sine
tan          tangent      tanh         hyperbolic tangent
============ ============ ============ =======================
========================= ====================================</p>
<p>Example</p>
<p>CLIPS&gt; (cos 0)</p>
<p>1.0</p>
<p>CLIPS&gt; (acos 1.0)</p>
<p>0.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="convert-from-degrees-to-grads">
<h4>12.5.2.2 Convert From Degrees to Grads<a class="headerlink" href="#convert-from-degrees-to-grads" title="Permalink to this headline">¶</a></h4>
<p>The <strong>deg-grad</strong> function converts its only argument (which should be a
numeric expression) from units of degrees to units of grads (360 degrees
= 400 grads). The return value of this function is a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deg</span><span class="o">-</span><span class="n">grad</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (deg-grad 90)</p>
<p>100.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="convert-from-degrees-to-radians">
<h4>12.5.2.3 Convert From Degrees to Radians<a class="headerlink" href="#convert-from-degrees-to-radians" title="Permalink to this headline">¶</a></h4>
<p>The <strong>deg-rad</strong> function converts its only argument (which should be a
numeric expression) from units of degrees to units of radians (360
degrees = 2p radians). The return value of this function is a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deg</span><span class="o">-</span><span class="n">rad</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (deg-rad 180)</p>
<p>3.141592653589793</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="convert-from-grads-to-degrees">
<h4>12.5.2.4 Convert From Grads to Degrees<a class="headerlink" href="#convert-from-grads-to-degrees" title="Permalink to this headline">¶</a></h4>
<p>The <strong>grad-deg</strong> function converts its only argument (which should be a
numeric expression) from units of grads to units of degrees (360 degrees
= 400 grads). The return value of this function is a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">grad</span><span class="o">-</span><span class="n">deg</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (grad-deg 100)</p>
<p>90.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="convert-from-radians-to-degrees">
<h4>12.5.2.5 Convert From Radians to Degrees<a class="headerlink" href="#convert-from-radians-to-degrees" title="Permalink to this headline">¶</a></h4>
<p>The <strong>rad-deg</strong> function converts its only argument (which should be a
numeric expression) from units of radians to units of degrees (360
degrees = 2p radians). The return value of this function is a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">rad</span><span class="o">-</span><span class="n">deg</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (rad-deg 3.141592653589793)</p>
<p>180.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="return-the-value-of-p">
<h4>12.5.2.6 Return the Value of p<a class="headerlink" href="#return-the-value-of-p" title="Permalink to this headline">¶</a></h4>
<p>The <strong>pi</strong> function returns the value of p (3.141592653589793…) as a
float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (pi)</p>
<p>3.141592653589793</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="square-root">
<h4>12.5.2.7 Square Root<a class="headerlink" href="#square-root" title="Permalink to this headline">¶</a></h4>
<p>The <strong>sqrt</strong> function returns the square root of its only argument
(which should be a numeric expression) as a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">sqrt</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (sqrt 9)</p>
<p>3.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="power">
<h4>12.5.2.8 Power<a class="headerlink" href="#power" title="Permalink to this headline">¶</a></h4>
<p>The <strong>**</strong> function raises its first argument to the power of its
second argument and returns this value as a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">*</span>\<span class="o">*</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (<a href="#id1"><span class="problematic" id="id2">*</span></a>* 3 2)</p>
<p>9.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="exponential">
<h4>12.5.2.9 Exponential<a class="headerlink" href="#exponential" title="Permalink to this headline">¶</a></h4>
<p>The <strong>exp</strong> function raises the value e (the base of the natural system
of logarithms, having a value of approximately 2.718…) to the power
specified by its only argument and returns this value as a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">exp</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (exp 1)</p>
<p>2.718281828459045</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="logarithm">
<h4>12.5.2.10 Logarithm<a class="headerlink" href="#logarithm" title="Permalink to this headline">¶</a></h4>
<p>Given n (the only argument) and the value e is the base of the natural
system of logarithms, the <strong>log</strong> function returns the float value x
such that the following equation is satisfied:</p>
<p>n = ex</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">log</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (log 2.718281828459045)</p>
<p>1.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="logarithm-base-10">
<h4>12.5.2.11 Logarithm Base 10<a class="headerlink" href="#logarithm-base-10" title="Permalink to this headline">¶</a></h4>
<p>Given n (the only argument), the <strong>log10</strong> function returns the float
value x such that the following equation is satisfied:</p>
<p>n = 10x</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">log10</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (log10 100)</p>
<p>2.0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="round">
<h4>12.5.2.12 Round<a class="headerlink" href="#round" title="Permalink to this headline">¶</a></h4>
<p>The <strong>round</strong> function rounds its only argument (which should be a
numeric expression) toward the closest integer. If the argument is
exactly between two integers, it is rounded down. The return value of
this function is an integer.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">round</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (round 3.6)</p>
<p>4</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="modulus">
<h4>12.5.2.13 Modulus<a class="headerlink" href="#modulus" title="Permalink to this headline">¶</a></h4>
<p>The <strong>mod</strong> function returns the remainder of the result of dividing its
first argument by its second argument (assuming that the result of
division must be an integer). It returns an integer if both arguments
are integers, otherwise it returns a float.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">mod</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">numeric</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (mod 5 2)</p>
<p>1</p>
<p>CLIPS&gt; (mod 3.7 1.2)</p>
<p>0.1</p>
<p>CLIPS&gt;</p>
</div>
</div>
</div>
<div class="section" id="procedural-functions">
<h2>12.6 Procedural Functions<a class="headerlink" href="#procedural-functions" title="Permalink to this headline">¶</a></h2>
<p>The following are functions which provide procedural programming
capabilities as found in languages such as Pascal, C and Ada.</p>
<div class="section" id="binding-variables">
<h3>12.6.1 Binding Variables<a class="headerlink" href="#binding-variables" title="Permalink to this headline">¶</a></h3>
<p>Occasionally, it is important to create new variables or to modify the
value of previously bound variables on the RHS of a rule. The <strong>bind</strong>
function provides this capability.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">bind</span> <span class="o">&lt;</span><span class="n">variable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>where the first argument to bind, &lt;variable&gt;, is the local or global
variable to be bound (it <em>may</em> have been bound previously). The bind
function may also be used within a message-handler’s body to set a
slot’s value.</p>
<p>If no &lt;expression&gt; is specified, then local variables are unbound and
global variables are reset to their original value. If one &lt;expression&gt;
is specified, then the value of &lt;variable&gt; is set to the return value
from evaluating &lt;expression&gt;. If more than one &lt;expression&gt; is
specified, then all of the &lt;expressions&gt; are evaluated and grouped
together as a multifield value and the resulting value is stored in
&lt;variable&gt;.</p>
<p>The bind function returns the symbol FALSE when a local variable is
unbound, otherwise, the return value is the value to which &lt;variable&gt; is
set.</p>
<p>Example 1</p>
<p>CLIPS&gt; (defglobal ?*x* = 3.4)</p>
<p>CLIPS&gt; ?*x*</p>
<p>3.4</p>
<p>CLIPS&gt; (bind ?*x* (+ 8 9))</p>
<p>17</p>
<p>CLIPS&gt; ?*x*</p>
<p>17</p>
<p>CLIPS&gt; (bind ?*x* (create$ a b c d))</p>
<p>(a b c d)</p>
<p>CLIPS&gt; ?*x*</p>
<p>(a b c d)</p>
<p>CLIPS&gt; (bind ?*x* d e f)</p>
<p>(d e f)</p>
<p>CLIPS&gt; ?*x*</p>
<p>(d e f)</p>
<p>CLIPS&gt; (bind ?*x*)</p>
<p>3.4</p>
<p>CLIPS&gt; ?*x*</p>
<p>3.4</p>
<p>CLIPS&gt; (bind ?x 32)</p>
<p>32</p>
<p>CLIPS&gt; ?x</p>
<p>32</p>
<p>CLIPS&gt; (reset)</p>
<p>CLIPS&gt; ?x</p>
<p>[EVALUATN1] Variable x is unbound</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
<p>Example 2</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(slot x)</p>
<p>(slot y))</p>
<p>CLIPS&gt;</p>
<p>(defmessage-handler A init after ()</p>
<p>(bind ?self:x 3)</p>
<p>(bind ?self:y 4))</p>
<p>CLIPS&gt; (make-instance a of A)</p>
<p>[a]</p>
<p>CLIPS&gt; (send [a] print)</p>
<p>[a] of A</p>
<p>(x 3)</p>
<p>(y 4)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="if-then-else-function">
<h3>12.6.2 If…then…else Function<a class="headerlink" href="#if-then-else-function" title="Permalink to this headline">¶</a></h3>
<p>The <strong>if</strong> function provides an <strong>if…then…else</strong> structure to allow
for conditional execution of a set of actions.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="p">(</span><span class="k">if</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span>
<span class="o">|</span> <span class="n">then</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;</span>\<span class="o">*</span>
<span class="o">|</span> <span class="p">[</span><span class="k">else</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;*</span><span class="p">])</span>
</pre></div>
</div>
<p>Any number of allowable actions may be used inside of the <strong>then</strong> or
<strong>else</strong> portion, including another <strong>if…then…else</strong> structure. The
<strong>else</strong> portion is optional. If &lt;expression&gt; evaluates to anything
other than the symbol FALSE, then the actions associated with the
<strong>then</strong> portion are executed. Otherwise, the actions associated with
the <strong>else</strong> portion are executed. The return value of the if function
is the value of the last &lt;expression&gt; or &lt;action&gt; evaluated.</p>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule closed-valves</div>
<div class="line">(temp high)</div>
<div class="line">(valve ?v closed)</div>
<div class="line">=&gt;</div>
<div class="line">(if (= ?v 6)</div>
<div class="line">then</div>
<div class="line">(printout t “The special valve ” ?v ” is closed!” crlf)</div>
<div class="line">(assert (perform special operation))</div>
<div class="line">else</div>
<div class="line">(printout t “Valve ” ?v ” is normally closed” crlf)))</div>
</div>
<p>Note that this rule could have been accomplished just as easily with two
rules, and that it is usually better to accomplish this with two rules.</p>
<div class="line-block">
<div class="line">(defrule closed-valves-number-6</div>
<div class="line">(temp high)</div>
<div class="line">(valve 6 closed)</div>
<div class="line">=&gt;</div>
<div class="line">(printout t “The special valve 6 is closed!” crlf)</div>
<div class="line">(assert (perform special operation)))</div>
</div>
<div class="line-block">
<div class="line">(defrule closed-valves-other-than-6</div>
<div class="line">(temp high)</div>
<div class="line">(valve ?v&amp;~6 closed)</div>
<div class="line">=&gt;</div>
<div class="line">(printout t “Valve ” ?v ” is normally closed” crlf))</div>
</div>
</div>
<div class="section" id="while">
<h3>12.6.3 While<a class="headerlink" href="#while" title="Permalink to this headline">¶</a></h3>
<p>The <strong>while</strong> function is provided to allow simple looping. Its use is
similar to that of the <strong>if</strong> function.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="p">(</span><span class="k">while</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">do</span><span class="p">]</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Again, all predicate functions are available for use in <strong>while</strong>. Any
number of allowable actions may be placed inside the <strong>while</strong> block,
including <strong>if…then…else</strong> or ad?ditional <strong>while</strong> structures. The
test is performed prior to the first execution of the loop. The actions
within the <strong>while</strong> loop are executed until &lt;expression&gt; evaluates to
the symbol FALSE. The <strong>while</strong> may optionally include the symbol <strong>do</strong>
after the condition and before the first action. The <strong>break</strong> and
<strong>return</strong> functions can be used to terminate the loop prematurely. The
return value of this function is FALSE unless the <strong>return</strong> function is
used to terminate the loop.</p>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule open-valves</div>
<div class="line">(valves-open-through ?v)</div>
<div class="line">=&gt;</div>
<div class="line">(while (&gt; ?v 0)</div>
</div>
<div class="line-block">
<div class="line">(printout t “Valve ” ?v ” is open” crlf)</div>
<div class="line">(bind ?v (- ?v 1))))</div>
</div>
</div>
<div class="section" id="loop-for-count">
<h3>12.6.4 Loop-for-count<a class="headerlink" href="#loop-for-count" title="Permalink to this headline">¶</a></h3>
<p>The <strong>loop-for-count</strong> function is provided to allow simple iterative
looping.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">loop</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">count</span> <span class="o">&lt;</span><span class="nb">range</span><span class="o">-</span><span class="n">spec</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">do</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>&lt;range-spec&gt; ::= &lt;end-index&gt; |</p>
<p>(&lt;loop-variable&gt; &lt;start-index&gt; &lt;end-index&gt;) |</p>
<p>(&lt;loop-variable&gt; &lt;end-index&gt;)</p>
<p>&lt;start-index&gt; ::= &lt;integer-expression&gt;</p>
<p>&lt;end-index&gt; ::= &lt;integer-expression&gt;</p>
<p>Performs the given actions the number of times specified by
&lt;range-spec&gt;. If &lt;start-index&gt; is not given, it is assumed to be one. If
&lt;start-index&gt; is greater than &lt;end-index&gt;, then the body of the loop is
never executed. The integer value of the current iteration can be
examined with the loop variable, if specified.The <strong>break</strong> and
<strong>return</strong> functions can be used to terminate the loop prematurely. The
return value of this function is FALSE unless the <strong>return</strong> function is
used to terminate the loop. Variables from an outer scope may be used
within the loop, but the loop variable (if specified) masks any outer
variables of the same name. Loops can be nested.</p>
<p>Example</p>
<p>CLIPS&gt; (loop-for-count 2 (printout t “Hello world” crlf))</p>
<p>Hello world</p>
<p>Hello world</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
<p>(loop-for-count (?cnt1 2 4) do</p>
<p>(loop-for-count (?cnt2 1 3) do</p>
<p>(printout t ?cnt1 ” ” ?cnt2 crlf)))</p>
<p>2 1</p>
<p>2 2</p>
<p>2 3</p>
<p>3 1</p>
<p>3 2</p>
<p>3 3</p>
<p>4 1</p>
<p>4 2</p>
<p>4 3</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="progn">
<h3>12.6.5 Progn<a class="headerlink" href="#progn" title="Permalink to this headline">¶</a></h3>
<p>The <strong>progn</strong> function evaluates all of its arguments and returns the
value of the last argument;.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">progn</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (progn (setgen 5) (gensym))</p>
<p>gen5</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="progn-1">
<span id="id3"></span><h3>12.6.6 Progn$<a class="headerlink" href="#progn-1" title="Permalink to this headline">¶</a></h3>
<p>The <strong>progn$</strong> function performs a set of actions for each field of a
multifield value. The field of the current iteration can be examined
with &lt;field-variable&gt;, if specified. The index of the current iteration
can be examined with &lt;field-variable&gt;**-index**. The <strong>progn$</strong> function
can use variables from outer scopes, and the <strong>return</strong> and <strong>break</strong>
functions can also be used within a <strong>progn$</strong> as long as they are valid
in the outer scope. The return value of this function is the return
value of the last action performed for the last field in the multifield
value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(progn$ &lt;multifield-spec&gt; &lt;expression&gt;*)
</pre></div>
</div>
<p>&lt;multifield-spec&gt; ::= &lt;multifield-expression&gt; |</p>
<p>(&lt;field-variable&gt; &lt;multifield-expression&gt;)</p>
<p>Example</p>
<p>CLIPS&gt; (progn$ (?field (create$ abc def ghi))</p>
<p>(printout t “–&gt; ” ?field ” ” ?field-index ” &lt;–” crlf))</p>
<p>–&gt; abc 1 &lt;–</p>
<p>–&gt; def 2 &lt;–</p>
<p>–&gt; ghi 3 &lt;–</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="return">
<h3>12.6.7 Return<a class="headerlink" href="#return" title="Permalink to this headline">¶</a></h3>
<p>The <strong>return</strong> function immediately terminates the currently executing
deffunction, generic function method, message-handler, defrule RHS, or
certain instance set query functions (<strong>do-for-instance</strong>,
<strong>do-for-all-instances</strong> and <strong>delayed-do-for-all-instances</strong>). Without
any arguments, there is no return value. However, if an argument is
included, its evaluation is given as the return value of the deffunction
, method or message-handler.</p>
<p>The <strong>return</strong> function can only be used within the actions of
deffunctions, methods and message-handlers, defrules, or the instance
set query functions previously listed. If used on the RHS of a rule, the
current focus is removed from the focus stack. In addition, <strong>return</strong>
should not be used as an argument to another function call. If used
within an instance set query function, the <strong>return</strong> function is only
valid if it is applicable in the outer scope of the query.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">return</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt;</p>
<p>(deffunction sign (?num)</p>
<p>(if (&gt; ?num 0) then</p>
<p>(return 1))</p>
<p>(if (&lt; ?num 0) then</p>
<p>(return -1))</p>
<ol class="arabic simple" start="0">
<li></li>
</ol>
<p>CLIPS&gt; (sign 5)</p>
<p>1</p>
<p>CLIPS&gt; (sign -10)</p>
<p>-1</p>
<p>CLIPS&gt; (sign 0)</p>
<p>0</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="break">
<h3>12.6.8 Break<a class="headerlink" href="#break" title="Permalink to this headline">¶</a></h3>
<p>The <strong>break</strong> function immediately terminates the currently iterating
<strong>while</strong> loop, <strong>loop-for-count</strong> execution, <strong>progn</strong> execution,
<strong>progn$</strong> execution, <strong>foreach</strong> execution, or certain instance set
query functions (<strong>do-for-instance</strong>, <strong>do-for-all-instances</strong> and
<strong>delayed-do-for-all-instances</strong>).</p>
<p>The <strong>break</strong> function can only be used within the actions of a
<strong>while</strong> loop, <strong>loop-for-count</strong> execution, <strong>progn</strong> execution,
<strong>progn$</strong> execution, <strong>foreach</strong> execution, or the specified instance
set queries previously listed. Other uses will have no effect. The
<strong>break</strong> cannot be used within a <strong>progn</strong> unless it is valid for the
outer scope of the <strong>progn</strong>. In addition, <strong>break</strong> should not be used
as an argument to another function call.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">break</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt;</p>
<p>(deffunction iterate (?num)</p>
<p>(bind ?i 0)</p>
<p>(while TRUE do</p>
<p>(if (&gt;= ?i ?num) then</p>
<p>(break))</p>
<p>(printout t ?i ” “)</p>
<p>(bind ?i (+ ?i 1)))</p>
<p>(printout t crlf))</p>
<p>CLIPS&gt; (iterate 1)</p>
<p>0</p>
<p>CLIPS&gt; (iterate 10)</p>
<p>0 1 2 3 4 5 6 7 8 9</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="switch">
<h3>12.6.9 Switch<a class="headerlink" href="#switch" title="Permalink to this headline">¶</a></h3>
<p>The <strong>switch</strong> function allows a particular group of actions (among
several groups of actions) to be performed based on a specified value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">switch</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>&lt;case-statement&gt;*</p>
<p>[&lt;default-statement&gt;])</p>
<p>&lt;case-statement&gt; ::=</p>
<p>(case &lt;comparison-expression&gt; then &lt;action&gt;*)</p>
<p>&lt;default-statement&gt; ::= (default &lt;action&gt;*)</p>
<p>As indicated by the BNF, the optional default statement must succeed all
case statements. None of the case comparison expressions should be the
same.</p>
<p>The <strong>switch</strong> function evaluates the &lt;test-expression&gt; first and then
evaluates each &lt;comparison-expression&gt; in order of definition. Once the
evaluation of the &lt;comparison-expression&gt; is equivalent to the
evaluation of the &lt;test-expression&gt;, the actions of that case are
evaluated (in order) and the switch function is terminated. If no cases
are satisfied, the default actions (if any) are evaluated (in order).</p>
<p>The return value of the <strong>switch</strong> function is the last action evaluated
in the <strong>switch</strong> function. If no actions are evaluated, the return
value is the symbol FALSE.</p>
<p>Example</p>
<p>CLIPS&gt; (defglobal ?*x* = 0)</p>
<p>CLIPS&gt; (defglobal ?*y* = 1)</p>
<p>CLIPS&gt;</p>
<p>(deffunction foo (?val)</p>
<p>(switch ?val</p>
<p>(case ?*x* then *x*)</p>
<p>(case ?*y* then *y*)</p>
<p>(default none)))</p>
<p>CLIPS&gt; (foo 0)</p>
<p>*x*</p>
<p>CLIPS&gt; (foo 1)</p>
<p>*y*</p>
<p>CLIPS&gt; (foo 2)</p>
<p>none</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="foreach">
<h3>12.6.10 Foreach<a class="headerlink" href="#foreach" title="Permalink to this headline">¶</a></h3>
<p>The <strong>foreach</strong> function performs a set of actions for each field of a
multifield value. The field of the current iteration can be examined
with &lt;field-variable&gt;, if specified. The index of the current iteration
can be examined with &lt;field-variable&gt;**-index**. The <strong>foreach</strong>
function can use variables from outer scopes, and the <strong>return</strong> and
<strong>break</strong> functions can also be used within a <strong>foreach</strong> as long as
they are valid in the outer scope. The return value of this function is
the return value of the last action performed for the last field in the
multifield value.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">foreach</span> <span class="o">&lt;</span><span class="n">field</span><span class="o">-</span><span class="n">variable</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">multifield</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (foreach ?field (create$ abc def ghi)</p>
<p>(printout t “–&gt; ” ?field ” ” ?field-index ” &lt;–” crlf))</p>
<p>–&gt; abc 1 &lt;–</p>
<p>–&gt; def 2 &lt;–</p>
<p>–&gt; ghi 3 &lt;–</p>
<p>CLIPS&gt;</p>
<p>? Portability Note</p>
<p>The <strong>foreach</strong> function provides the same functionality as the
<strong>progn$</strong> function, but uses different syntax with a more meaningful
function name. It is provided for compatibility with Jess (Java Expert
System Shell).</p>
</div>
</div>
<div class="section" id="miscellaneous-functions">
<h2>12.7 Miscellaneous Functions<a class="headerlink" href="#miscellaneous-functions" title="Permalink to this headline">¶</a></h2>
<p>The following are additional functions for use within CLIPS.</p>
<div class="section" id="gensym">
<h3>12.7.1 Gensym<a class="headerlink" href="#gensym" title="Permalink to this headline">¶</a></h3>
<p>The <strong>gensym</strong> function returns a special, sequenced symbol that can be
stored as a sin?gle field. This is primarily for tagging patterns that
need a unique identifier, but the user does not care what the identifier
is. Multiple calls to <strong>gensym</strong> are guaranteed to return different
identifiers of the form</p>
<p>gen<strong>X</strong></p>
<p>where <strong>X</strong> is a positive integer. The first call to <strong>gensym</strong> returns
<strong>gen1</strong>; all subsequent calls increment the number. Note that
<strong>gensym</strong> is <em>not</em> reset after a call to <strong>clear</strong>. If users plan to
use the gensym feature, they should avoid creating facts which include a
user-defined field of this form.</p>
<p>Example</p>
<p>(assert (new-id (gensym) flag1 7))</p>
<p>which, on the first call, generates a fact of the form</p>
<p>(new-id gen1 flag1 7)</p>
</div>
<div class="section" id="gensym-1">
<span id="id4"></span><h3>12.7.2 Gensym*<a class="headerlink" href="#gensym-1" title="Permalink to this headline">¶</a></h3>
<p>The <strong>gensym*</strong> function is similar to the <strong>gensym</strong> function,
however, it will produce a unique symbol that does not currently exist
within the CLIPS environment.</p>
<p>Example</p>
<p>CLIPS&gt; (setgen 1)</p>
<p>1</p>
<p>CLIPS&gt; (assert (gen1 gen2 gen3))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (gensym)</p>
<p>gen1</p>
<p>CLIPS&gt; (gensym*)</p>
<p>gen4</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="setgen">
<h3>12.7.3 Setgen<a class="headerlink" href="#setgen" title="Permalink to this headline">¶</a></h3>
<p>The <strong>setgen</strong> function allows the user to set the starting number used
by <strong>gensym</strong> and <strong>gensym*</strong> (see sections 12.7.1 and 12.7.2).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">setgen</span> <span class="o">&lt;</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where &lt;intger-expression&gt; must be a positive integer value and is the
value returned by this function. All subsequent calls to <strong>gensym</strong> will
return a sequenced symbol with the numeric portion of the symbol
starting at &lt;integer-expression&gt;.</p>
<p>Example</p>
<p>CLIPS&gt; (setgen 32)</p>
<p>32</p>
<p>CLIPS&gt;</p>
<p>After this, calls to <strong>gensym</strong> will return gen32, gen33, etc.</p>
</div>
<div class="section" id="random">
<h3>12.7.4 Random<a class="headerlink" href="#random" title="Permalink to this headline">¶</a></h3>
<p>The <strong>random</strong> function returns a ?random? integer value. It is
patterned after the ANSI standard rand library function and therefore
may not be available on all platforms.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">random</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">start</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">end</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>where &lt;start-integer-expression&gt; and &lt;end-integer-expression&gt; if
specified indicate the range of values to which the randomly generated
integer is limited.</p>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule roll-the-dice</div>
<div class="line">(roll-the-dice)</div>
<div class="line">=&gt;</div>
</div>
<p>(bind ?roll1 (random 1 6))</p>
<p>(bind ?roll2 (random 1 6))</p>
<p>(printout t “Your roll is: ” ?roll1 ” ” ?roll2 crlf))</p>
</div>
<div class="section" id="seed">
<h3>12.7.5 Seed<a class="headerlink" href="#seed" title="Permalink to this headline">¶</a></h3>
<p>The <strong>seed</strong> function seeds the random number generator. It is patterned
after the ANSI standard seed library function and therefore may not be
available on all platforms.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">seed</span> <span class="o">&lt;</span><span class="n">integer</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where &lt;integer-expression&gt; is the integer seed value and the function
has no return value.</p>
</div>
<div class="section" id="time">
<h3>12.7.6 Time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>The <strong>time</strong> function returns a floating-point value representing the
elapsed seconds since the system refer?ence time.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>? Portability Note</p>
<p>Not all operating systems/compilers provide this function. The code is
stored in the <strong>sysdep.c</strong> file, and the default coding for generic
CLIPS is a non-?functional stub that returns zero for the time.</p>
</div>
<div class="section" id="number-of-fields-or-characters-in-a-data-object">
<h3>12.7.7 Number of Fields or Characters in a Data Object<a class="headerlink" href="#number-of-fields-or-characters-in-a-data-object" title="Permalink to this headline">¶</a></h3>
<p>The <strong>length</strong> function returns an integer for the number of fields
bound to a multifield value or the length in characters of a string or
symbol.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">length</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="n">symbol</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">multifield</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the argument given to <strong>length</strong> is not the appropriate type, a
negative one (-1) is returned. This function may also be called using
the name <strong>length$</strong>.</p>
<p>Example</p>
<p>CLIPS&gt; (length (create$ a b c d e f g))</p>
<p>7</p>
<p>CLIPS&gt; (length “cat”)</p>
<p>3</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-restrictions-for-a-function">
<h3>12.7.8 Determining the Restrictions for a Function<a class="headerlink" href="#determining-the-restrictions-for-a-function" title="Permalink to this headline">¶</a></h3>
<p>The <strong>get-function-restrictions</strong> function can be used to gain access to
the restriction string associated with a CLIPS or user defined function.
The restriction string contains information on the number and types of
arguments that a function expects. See section 3.1 of the Advanced
Programming Guide for the meaning of the characters which compose the
restriction string.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">function</span><span class="o">-</span><span class="n">restrictions</span> <span class="o">&lt;</span><span class="n">function</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (get-function-restrictions +)</p>
<p>“2*n”</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="sorting-a-list-of-values">
<h3>12.7.9 Sorting a List of Values<a class="headerlink" href="#sorting-a-list-of-values" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>sort</strong> allows a list of values to be sorted based on a
user specified comparison function.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">sort</span> <span class="o">&lt;</span><span class="n">comparison</span><span class="o">-</span><span class="n">function</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>This function returns a multifield value containing the sorted values
specified as arguments. The comparison function used for sorting should
accept exactly two arguments and can be a user-defined function, a
generic function, or a deffunction. Given two adjacent arguments from
the list to be sorted, the comparison function should return TRUE if its
first argument should come after its second argument in the sorted list.</p>
<p>Example</p>
<p>CLIPS&gt; (sort &gt; 4 3 5 7 2 7)</p>
<p>(2 3 4 5 7 7)</p>
<p>CLIPS&gt;</p>
<p>(deffunction string&gt; (?a ?b)</p>
<p>(&gt; (str-compare ?a ?b) 0))</p>
<p>CLIPS&gt; (sort string&gt; ax aa bk mn ft m)</p>
<p>(aa ax bk ft m mn)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="calling-a-function">
<h3>12.7.10 Calling a Function<a class="headerlink" href="#calling-a-function" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>funcall</strong> constructs a function call from its arguments
and then evaluates the function call. The first argument should be the
name of a user-defined function, deffunction, or generic function. The
remaining arguments are evaluated and then passed to the specified
function when it is evaluated. Functions that are invoked using
specialized syntax, such as the <strong>assert</strong> command (which uses
parentheses to delimit both slot and function names), may not be called
using funcall.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">funcall</span> <span class="o">&lt;</span><span class="n">function</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (funcall delete$ (create$ a b c) 2 2)</p>
<p>(a c)</p>
<p>CLIPS&gt; (funcall + 1 2 (expand$ (create$ 3 4)))</p>
<p>10</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="timing-functions-and-commands">
<h3>12.7.11 Timing Functions and Commands<a class="headerlink" href="#timing-functions-and-commands" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>timer</strong> returns the number of seconds elapsed evaluating
a series of expressions.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">timer</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (timer (loop-for-count 10000 (+ 3 4)))</p>
<p>0.0416709999999512</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-operating-system">
<h3>12.7.12 Determining the Operating System<a class="headerlink" href="#determining-the-operating-system" title="Permalink to this headline">¶</a></h3>
<p>The <strong>operating-system</strong> function returns a symbol indicating the
opertating system on which CLIPS is running. Possible return values are
VMS, UNIX-V, UNIX-7, LINUX, DARWIN, MAC-OS-X, DOS, WINDOWS, and UNKNOWN.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">operating</span><span class="o">-</span><span class="n">system</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="deftemplate-functions">
<h2>12.8 Deftemplate Functions<a class="headerlink" href="#deftemplate-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for the
deftemplate construct.</p>
<div class="section" id="determining-the-module-in-which-a-deftemplate-is-defined">
<h3>12.8.1 Determining the Module in which a Deftemplate is Defined<a class="headerlink" href="#determining-the-module-in-which-a-deftemplate-is-defined" title="Permalink to this headline">¶</a></h3>
<p>This function returns the module in which the specified deftemplate name
is defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-allowed-values-for-a-deftemplate-slot">
<h3>12.8.2 Getting the Allowed Values for a Deftemplate Slot<a class="headerlink" href="#getting-the-allowed-values-for-a-deftemplate-slot" title="Permalink to this headline">¶</a></h3>
<p>This function groups the allowed values for a slot (specified in any of
allowed-? attributes for the slots) into a multifield variable. If no
allowed-? attributes were specified for the slot, then the symbol FALSE
is returned. A multifield of length zero is returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">allowed</span><span class="o">-</span><span class="n">values</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(deftemplate A</p>
<p>(slot x)</p>
<p>(slot y (allowed-integers 2 3) (allowed-symbols foo)))</p>
<p>CLIPS&gt; (deftemplate-slot-allowed-values A x)</p>
<p>FALSE</p>
<p>CLIPS&gt; (deftemplate-slot-allowed-values A y)</p>
<p>(2 3 foo)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-cardinality-for-a-deftemplate-slot">
<h3>12.8.3 Getting the Cardinality for a Deftemplate Slot<a class="headerlink" href="#getting-the-cardinality-for-a-deftemplate-slot" title="Permalink to this headline">¶</a></h3>
<p>This function groups the minimum and maximum cardinality allowed for a
multifield slot into a multifield variable. A maximum cardinality of
infinity is indicated by the symbol <strong>+oo</strong> (the plus character followed
by two lowercase o?s?not zeroes). A multifield of length zero is
returned for single field slots or if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">cardinality</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(deftemplate A</p>
<p>(slot x)</p>
<p>(multislot y (cardinality ?VARIABLE 5))</p>
<p>(multislot z (cardinality 3 ?VARIABLE)))</p>
<p>CLIPS&gt; (deftemplate-slot-cardinality A y)</p>
<p>(0 5)</p>
<p>CLIPS&gt; (deftemplate-slot-cardinality A z)</p>
<p>(3 +oo)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="testing-whether-a-deftemplate-slot-has-a-default">
<h3>12.8.4 Testing whether a Deftemplate Slot has a Default<a class="headerlink" href="#testing-whether-a-deftemplate-slot-has-a-default" title="Permalink to this headline">¶</a></h3>
<p>This function returns the symbol static if the specified slot in the
specified deftemplate has a static default (whether explicitly or
implicitly defined), the symbol dynamic if the slot has a dynamic
default, or the symbol FALSE if the slot does not have a default. An
error is generated if the specified deftemplate or slot does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">defaultp</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(deftemplate A</p>
<p>(slot w)</p>
<p>(slot x (default ?NONE))</p>
<p>(slot y (default 1))</p>
<p>(slot z (default-dynamic (gensym))))</p>
<p>CLIPS&gt; (deftemplate-slot-defaultp A w)</p>
<p>static</p>
<p>CLIPS&gt; (deftemplate-slot-defaultp A x)</p>
<p>FALSE</p>
<p>CLIPS&gt; (deftemplate-slot-defaultp A y)</p>
<p>static</p>
<p>CLIPS&gt; (deftemplate-slot-defaultp A z)</p>
<p>dynamic</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-default-value-for-a-deftemplate-slot">
<h3>12.8.5 Getting the Default Value for a Deftemplate Slot<a class="headerlink" href="#getting-the-default-value-for-a-deftemplate-slot" title="Permalink to this headline">¶</a></h3>
<p>This function returns the default value associated with a deftemplate
slot. If a slot has a dynamic default, the expression will be evaluated
when this function is called. The symbol FALSE is returned if an error
occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">value</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(deftemplate A</p>
<p>(slot x (default 3))</p>
<p>(multislot y (default a b c))</p>
<p>(slot z (default-dynamic (gensym))))</p>
<p>CLIPS&gt; (deftemplate-slot-default-value A x)</p>
<p>3</p>
<p>CLIPS&gt; (deftemplate-slot-default-value A y)</p>
<p>(a b c)</p>
<p>CLIPS&gt; (deftemplate-slot-default-value A z)</p>
<p>gen1</p>
<p>CLIPS&gt; (deftemplate-slot-default-value A z)</p>
<p>gen2</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="deftemplate-slot-existence">
<h3>12.8.6 Deftemplate Slot Existence<a class="headerlink" href="#deftemplate-slot-existence" title="Permalink to this headline">¶</a></h3>
<p>This function returns the symbol TRUE if the specified slot is present
in the specified deftemplate, FALSE otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">existp</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate A (slot x))</p>
<p>CLIPS&gt; (deftemplate-slot-existp A x)</p>
<p>TRUE</p>
<p>CLIPS&gt; (deftemplate-slot-existp A y)</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="testing-whether-a-deftemplate-slot-is-a-multifield-slot">
<h3>12.8.7 Testing whether a Deftemplate Slot is a Multifield Slot<a class="headerlink" href="#testing-whether-a-deftemplate-slot-is-a-multifield-slot" title="Permalink to this headline">¶</a></h3>
<p>This function returns the symbol TRUE if the specified slot in the
specified deftemplate is a multifield slot. Otherwise, it returns the
symbol FALSE. An error is generated if the specified deftemplate or slot
does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">multip</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate A (slot x) (multislot y))</p>
<p>CLIPS&gt; (deftemplate-slot-multip A x)</p>
<p>FALSE</p>
<p>CLIPS&gt; (deftemplate-slot-multip A y)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-slot-names-associated-with-a-deftemplate">
<h3>12.8.8 Determining the Slot Names Associated with a Deftemplate<a class="headerlink" href="#determining-the-slot-names-associated-with-a-deftemplate" title="Permalink to this headline">¶</a></h3>
<p>The <strong>deftemplate-slot-names</strong> function returns the slot names
associated with the deftemplate in a multifield value. The symbol
<em>implied</em> is returned for an implied deftemplate (which has a single
implied multifield slot). FALSE is returned if the specified deftemplate
does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">names</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate foo (slot bar) (multislot yak))</p>
<p>CLIPS&gt; (deftemplate-slot-names foo)</p>
<p>(bar yak)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-numeric-range-for-a-deftemplate-slot">
<h3>12.8.9 Getting the Numeric Range for a Deftemplate Slot<a class="headerlink" href="#getting-the-numeric-range-for-a-deftemplate-slot" title="Permalink to this headline">¶</a></h3>
<p>This function groups the minimum and maximum numeric ranges allowed a
slot into a multifield variable. A minimum value of infinity is
indicated by the symbol <strong>-oo</strong> (the minus character followed by two
lowercase o?s?not zeroes). A maximum value of infinity is indicated by
the symbol <strong>+oo</strong> (the plus character followed by two lowercase o?s?not
zeroes). The symbol FALSE is returned for slots in which numeric values
are not allowed. A multifield of length zero is returned if an error
occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="nb">range</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(deftemplate A</p>
<p>(slot x)</p>
<p>(slot y (type SYMBOL))</p>
<p>(slot z (range 3 10)))</p>
<p>CLIPS&gt; (deftemplate-slot-range A x)</p>
<p>(-oo +oo)</p>
<p>CLIPS&gt; (deftemplate-slot-range A y)</p>
<p>FALSE</p>
<p>CLIPS&gt; (deftemplate-slot-range A z)</p>
<p>(3 10)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="testing-whether-a-deftemplate-slot-is-a-single-field-slot">
<h3>12.8.10 Testing whether a Deftemplate Slot is a Single-Field Slot<a class="headerlink" href="#testing-whether-a-deftemplate-slot-is-a-single-field-slot" title="Permalink to this headline">¶</a></h3>
<p>This function returns the symbol TRUE if the specified slot in the
specified deftemplate is a single-field slot. Otherwise, it returns the
symbol FALSE. An error is generated if the specified deftemplate or slot
does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">singlep</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate A (slot x) (multislot y))</p>
<p>CLIPS&gt; (deftemplate-slot-singlep A x)</p>
<p>TRUE</p>
<p>CLIPS&gt; (deftemplate-slot-singlep A y)</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-primitive-types-for-a-deftemplate-slot">
<h3>12.8.11 Getting the Primitive Types for a Deftemplate Slot<a class="headerlink" href="#getting-the-primitive-types-for-a-deftemplate-slot" title="Permalink to this headline">¶</a></h3>
<p>This function groups the names of the primitive types allowed for a
deftemplate slot into a multifield variable. A multifield of length zero
is returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">types</span> <span class="o">&lt;</span><span class="n">deftemplate</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate A (slot y (type INTEGER LEXEME)))</p>
<p>CLIPS&gt; (deftemplate-slot-types A y)</p>
<p>(INTEGER SYMBOL STRING)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-list-of-deftemplates">
<h3>12.8.12 Getting the List of Deftemplates<a class="headerlink" href="#getting-the-list-of-deftemplates" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-deftemplate-list</strong> returns a multifield value
containing the names of all deftemplate constructs facts visible to the
module specified by &lt;module-name&gt; or to the current module if none is
specified. If * is specified as the module name, then all deftemplates
are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">deftemplate</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate A)</p>
<p>CLIPS&gt; (deftemplate B)</p>
<p>CLIPS&gt; (get-deftemplate-list)</p>
<p>(initial-fact A B)</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="fact-functions">
<h2>12.9 Fact Functions<a class="headerlink" href="#fact-functions" title="Permalink to this headline">¶</a></h2>
<p>The following actions are used for assert, retracting, and modifying
facts.</p>
<div class="section" id="creating-new-facts">
<h3>12.9.1 Creating New Facts<a class="headerlink" href="#creating-new-facts" title="Permalink to this headline">¶</a></h3>
<p>The <strong>assert</strong> action allows the user to add a fact to the fact-list.
Multiple facts may be asserted with each call. If the facts item is
being watched (see section 13.2), then an informational message will be
printed each time a fact is asserted.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">assert</span> <span class="o">&lt;</span><span class="n">RHS</span><span class="o">-</span><span class="n">pattern</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
<p>Missing slots in a tem?plate fact being asserted are assigned their
default value (see section 3). If an identical copy of the fact already
exists in the fact-list, the fact will not be added (however, this
behavior can be changed, see sections 13.4.4 and 13.4.5). Note that in
addition to constants, expressions can be placed within a fact to be
asserted. The first field of a fact must be a symbol. The value returned
of the assert function is the fact-address of the last fact asserted. If
the assertion of the last fact causes an error, or if an identical copy
of the fact already exists in the fact-list, then the symbol FALSE is
returned.</p>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (assert (color red))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (assert (color blue) (value (+ 3 4)))</p>
<p>&lt;Fact-3&gt;</p>
<p>CLIPS&gt; (assert (color red))</p>
<p>FALSE</p>
<p>CLIPS&gt; (deftemplate status (slot temp) (slot pressure))</p>
<p>CLIPS&gt; (assert (status (temp high)</p>
<p>(pressure low)))</p>
<p>&lt;Fact-4&gt;</p>
<p>CLIPS&gt; (facts)</p>
<p>f-0 (initial-fact)</p>
<p>f-1 (color red)</p>
<p>f-2 (color blue)</p>
<p>f-3 (value 7)</p>
<p>f-4 (status (temp high) (pressure low))</p>
<p>For a total of 5 facts.</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="removing-facts-from-the-fact-list">
<h3>12.9.2 Removing Facts from the Fact-list<a class="headerlink" href="#removing-facts-from-the-fact-list" title="Permalink to this headline">¶</a></h3>
<p>The <strong>retract</strong> action allows the user to remove facts from the
fact-list. Multiple facts may be retracted with a single retract
statement. The retraction of a fact also removes all rules that depended
upon that fact for activation from the agenda. Retraction of a fact may
also cause the retraction of other facts which receive logical support
from the retracted fact. If the facts item is being watched (see section
13.2), then an informational message will be printed each time a fact is
retracted.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">retract</span> <span class="o">&lt;</span><span class="n">retract</span><span class="o">-</span><span class="n">specifier</span><span class="o">&gt;+</span> \<span class="o">|</span> \<span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
<p>&lt;retract-specifier&gt; ::= &lt;fact-specifier&gt; | &lt;integer-expression&gt;</p>
<p>The term &lt;retract-specifier&gt; includes variables bound on the LHS to
fact-addresses as described in section 5.4.1.8, or the <strong>fact-index</strong> of
the desired fact (e.g. 3 for the fact labeled f-3), or an expression
which evaluates to a retract-specifier. If the symbol * is used as an
argument, all facts will be retracted. Note that the number generally is
not known during the execution of a program, so facts usually are
retracted by binding them on the LHS of a rule. Only variable;s, fact
indices, or the symbol * may be used in a re?tract. External functions
may <em>not</em> be called. This function has no return value.</p>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule change-valve-status</div>
<div class="line">?f1 &lt;- (valve ?v open)</div>
<div class="line">?f2 &lt;- (set ?v close)</div>
<div class="line">=&gt;</div>
<div class="line">(retract ?f1 ?f2)</div>
<div class="line">(assert (valve ?v close)))</div>
</div>
</div>
<div class="section" id="modifying-template-facts">
<h3>12.9.3 Modifying Template Facts<a class="headerlink" href="#modifying-template-facts" title="Permalink to this headline">¶</a></h3>
<p>The <strong>modify</strong> action allows the user to modify template facts on the
fact-list. Only one fact may be modified with a single modify statement.
The modification of a fact is equivalent to retracting the present fact
and asserting the modified fact. Therefore, any facts receiving logical
support from a template fact are retracted (assuming no other support)
when the template fact is modified and the new template fact loses any
logical support that it previously had.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">modify</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">specifier</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">RHS</span><span class="o">-</span><span class="n">slot</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>The term &lt;fact-specifier&gt; includes variables bound on the LHS to
fact-addresses as described in section 5.4.1.8 or the fact-index of the
desired fact (e.g. 3 for the fact labeled f-3). Note that the fact-index
generally is not known during the execution of a program, so facts
usually are modified by binding them on the LHS of a rule. Static
deftemplate checking is not performed when a fact-index is used as the
&lt;fact-specifier&gt; since the deftemplate being referenced is usually
ambiguous. Only variables or fact indices may be used in a modify.
External functions may <em>not</em> be called. The value returned by this
function is the fact-address of the newly modified fact. If the
assertion of the newly modified fact causes an error, or if an identical
copy of the newly modified fact already exists in the fact-list, then
the symbol FALSE is returned.</p>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule change-valve-status</div>
<div class="line">?f1&lt;-(status (valve open))</div>
<div class="line">?f2&lt;-(close-valve)</div>
<div class="line">=&gt;</div>
<div class="line">(retract ?f2)</div>
<div class="line">(modify ?f1 (valve closed)))</div>
</div>
</div>
<div class="section" id="duplicating-template-facts">
<h3>12.9.4 Duplicating Template Facts<a class="headerlink" href="#duplicating-template-facts" title="Permalink to this headline">¶</a></h3>
<p>The <strong>duplicate</strong> action allows the user to duplicate deftemplate facts
on the fact-list changing a group of specified fields. This command
allows a new fact to be created by copying most of the fields of a
source fact and then specifying the fields to be changed. Only one fact
may be duplicated with a single duplicate statement. The duplicate
command is similar to the modify command except the fact being
duplicated is not retracted.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">duplicate</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">specifier</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">RHS</span><span class="o">-</span><span class="n">slot</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>The term &lt;fact-specifier&gt; includes variables bound on the LHS to
fact-addresses as described in section 5.4.1.8 or the fact-index of the
desired fact (e.g. 3 for the fact labeled f-3). Note that the fact-index
generally is not known during the execution of a program, so facts
usually are duplicated by binding them on the LHS of a rule. Static
deftemplate checking is not performed when a fact-index is used as the
&lt;fact-specifier&gt; since the deftemplate being referenced is usually
ambiguous. Only variables or fact indices may be used in a duplicate.
External functions may <em>not</em> be called. The value returned by this
function is the fact-address of the newly duplicated fact. If the
assertion of the newly duplicated fact causes an error, or if an
identical copy of the newly duplicated fact already exists in the
fact-list, then the symbol FALSE is returned.</p>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule duplicate-part</div>
<div class="line">?f1 &lt;- (duplicate-part ?name)</div>
<div class="line">?f2 &lt;- (part (name ?name))</div>
<div class="line">=&gt;</div>
<div class="line">(retract ?f1)</div>
<div class="line">(duplicate ?f2 (id (gensym*))))</div>
</div>
</div>
<div class="section" id="asserting-a-string">
<h3>12.9.5 Asserting a String<a class="headerlink" href="#asserting-a-string" title="Permalink to this headline">¶</a></h3>
<p>The <strong>assert-string</strong> function is similar to assert in that it will add
a fact to the fact-list. How?ever, <strong>assert-string</strong> takes a single
string representing a fact (expressed in either ordered or deftemplate
format ) and asserts it. Only one fact may be asserted with each
<strong>assert-string</strong> statement.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">assert</span><span class="o">-</span><span class="n">string</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>If an identical copy of the fact already exists in the fact-list, the
fact will not be added (however, this behavior can be changed, see
sections 13.4.4 and 13.4.5). Fields within the fact may contain a string
by escaping the quote character with a backslash. Note that this
function takes a string and turns it into fields. If the fields within
that string are going to contain special characters (such as a
backslash), they need to be escaped twice (because you are literally
embedding a string within a string and the backslash mechanism ends up
being applied twice). Global variables and expressions can be contained
within the string. The value returned by this function is the
fact-address of the newly created fact. If the assertion of the newly
created fact causes an error, or if an identical copy of the newly
created fact already exists in the fact-list, then the symbol FALSE is
returned.</p>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate foo (slot x) (slot y))</p>
<p>CLIPS&gt; (assert-string “(status valve open)”)</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (assert-string “(light &quot;red”)”)</p>
<p>&lt;Fact-2&gt;</p>
<p>CLIPS&gt; (assert-string “(a\b &quot;c\d”)”)</p>
<p>&lt;Fact-3&gt;</p>
<p>CLIPS&gt; (assert-string “(foo (x 3))”)</p>
<p>&lt;Fact-4&gt;</p>
<p>CLIPS&gt; (assert-string “(foo (y 7))”)</p>
<p>&lt;Fact-5&gt;</p>
<p>CLIPS&gt; (facts)</p>
<p>f-0 (initial-fact)</p>
<p>f-1 (status valve open)</p>
<p>f-2 (light “red”)</p>
<p>f-3 (ab “cd”)</p>
<p>f-4 (foo (x 3) (y nil))</p>
<p>f-5 (foo (x nil) (y 7))</p>
<p>For a total of 6 facts.</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-fact-index-of-a-fact-address">
<h3>12.9.6 Getting the Fact-Index of a Fact-address<a class="headerlink" href="#getting-the-fact-index-of-a-fact-address" title="Permalink to this headline">¶</a></h3>
<p>The <strong>fact-index</strong> function returns the fact-index (an integer) of a
fact-address.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">fact</span><span class="o">-</span><span class="n">index</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">address</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<div class="line-block">
<div class="line">(defrule print-fact-indices</div>
<div class="line">?f &lt;- (some-fact $?)</div>
<div class="line">=&gt;</div>
<div class="line">(printout t (fact-index ?f) crlf))</div>
</div>
</div>
<div class="section" id="determining-if-a-fact-exists">
<h3>12.9.7 Determining If a Fact Exists<a class="headerlink" href="#determining-if-a-fact-exists" title="Permalink to this headline">¶</a></h3>
<p>The <strong>fact-existp</strong> returns TRUE if the fact specified by its fact-index
or fact-address arguments exists, otherwise FALSE is returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">fact</span><span class="o">-</span><span class="n">existp</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">address</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">index</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defglobal ?*x* = (assert (example fact)))</p>
<p>CLIPS&gt; (facts)</p>
<p>f-0 (initial-fact)</p>
<p>f-1 (example fact)</p>
<p>For a total of 2 facts.</p>
<p>CLIPS&gt; (fact-existp 1)</p>
<p>TRUE</p>
<p>CLIPS&gt; (retract 1)</p>
<p>CLIPS&gt; (fact-existp ?*x*)</p>
<p>FALSE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-deftemplate-relation-name-associated-with-a-fact">
<h3>12.9.8 Determining the Deftemplate (Relation) Name Associated with a Fact<a class="headerlink" href="#determining-the-deftemplate-relation-name-associated-with-a-fact" title="Permalink to this headline">¶</a></h3>
<p>The <strong>fact-relation</strong> function returns the deftemplate (relation) name
associated with the fact. FALSE is returned if the specified fact does
not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">fact</span><span class="o">-</span><span class="n">relation</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">address</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">index</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (assert (example fact))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (fact-relation 1)</p>
<p>example</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-slot-names-associated-with-a-fact">
<h3>12.9.9 Determining the Slot Names Associated with a Fact<a class="headerlink" href="#determining-the-slot-names-associated-with-a-fact" title="Permalink to this headline">¶</a></h3>
<p>The <strong>fact-slot-names</strong> function returns the slot names associated with
the fact in a multifield value. The symbol <em>implied</em> is returned for an
ordered fact (which has a single implied multifield slot). FALSE is
returned if the specified fact does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">fact</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">names</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">address</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">index</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate foo (slot bar) (multislot yak))</p>
<p>CLIPS&gt; (assert (foo (bar 1) (yak 2 3)))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (fact-slot-names 1)</p>
<p>(bar yak)</p>
<p>CLIPS&gt; (assert (another a b c))</p>
<p>&lt;Fact-2&gt;</p>
<p>CLIPS&gt; (fact-slot-names 2)</p>
<p>(implied)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="retrieving-the-slot-value-of-a-fact">
<h3>12.9.10 Retrieving the Slot Value of a Fact<a class="headerlink" href="#retrieving-the-slot-value-of-a-fact" title="Permalink to this headline">¶</a></h3>
<p>The <strong>fact-slot-value</strong> function returns the value of the specified slot
from the specified fact. The symbol <em>implied</em> should be used as the slot
name for the implied multifield slot of an ordered fact. FALSE is
returned if the slot name argument is invalid or the specified fact does
not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">fact</span><span class="o">-</span><span class="n">slot</span><span class="o">-</span><span class="n">value</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="n">address</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (deftemplate foo (slot bar) (multislot yak))</p>
<p>CLIPS&gt; (assert (foo (bar 1) (yak 2 3)))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (fact-slot-value 1 bar)</p>
<p>1</p>
<p>CLIPS&gt; (fact-slot-value 1 yak)</p>
<p>(2 3)</p>
<p>CLIPS&gt; (assert (another a b c))</p>
<p>&lt;Fact-2&gt;</p>
<p>CLIPS&gt; (fact-slot-value 2 implied)</p>
<p>(a b c)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="retrieving-the-fact-list">
<h3>12.9.11 Retrieving the Fact-List<a class="headerlink" href="#retrieving-the-fact-list" title="Permalink to this headline">¶</a></h3>
<p>The <strong>get-fact-list</strong> function returns a multifield containing the list
of facts visible to the module specified by &lt;module-name&gt; or to the
current module if none is specified. If * is specified as the module
name, then all facts are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">fact</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (assert (a))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (get-fact-list)</p>
<p>(&lt;Fact-0&gt; &lt;Fact-1&gt;)</p>
<p>CLIPS&gt; (defmodule B)</p>
<p>CLIPS&gt; (assert (b))</p>
<p>&lt;Fact-2&gt;</p>
<p>CLIPS&gt; (get-fact-list)</p>
<p>(&lt;Fact-2&gt;)</p>
<p>CLIPS&gt; (get-fact-list MAIN)</p>
<p>(&lt;Fact-0&gt; &lt;Fact-1&gt;)</p>
<p>CLIPS&gt; (get-fact-list *)</p>
<p>(&lt;Fact-0&gt; &lt;Fact-1&gt; &lt;Fact-2&gt;)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="fact-set-queries-and-distributed-actions">
<h3>12.9.12 Fact-set Queries and Distributed Actions<a class="headerlink" href="#fact-set-queries-and-distributed-actions" title="Permalink to this headline">¶</a></h3>
<p>CLIPS provides a useful query system for determining and performing
actions on sets of facts that satisfy user-defined queries. The fact
query system in CLIPS provides six functions, each of which operate on
fact-sets determined by user-defined criteria:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>any-factp</td>
<td>Determines if one or more fact-sets satisfy a query</td>
</tr>
<tr class="row-odd"><td>find-fact</td>
<td>Returns the first fact-set that satisfies a query</td>
</tr>
<tr class="row-even"><td>find-all-facts</td>
<td>Groups and returns all fact-sets which satisfy a query</td>
</tr>
<tr class="row-odd"><td>do-for-fact</td>
<td>Performs an action for the first fact-set which satisfies a query</td>
</tr>
<tr class="row-even"><td>do-for-all-facts</td>
<td>Performs an action for every fact-set which satisfies a query as they are found</td>
</tr>
<tr class="row-odd"><td>delayed-do-for-all-facts</td>
<td>Groups all fact-sets which satisfy a query and then iterates an action over this group</td>
</tr>
</tbody>
</table>
<p>Explanations on how to form fact-set templates, queries and actions
immediately follow, for these definitions are common to all of the query
functions. The specific details of each query function will then be
given. The following is a complete example of a fact-set query function:</p>
<p>Example</p>
<p><a href="#id7"><span class="problematic" id="id8">|FST|</span></a></p>
<p>For all of the examples in this section, assume that the commands below
have already been entered:</p>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(deftemplate girl</p>
<p>(slot name)</p>
<p>(slot sex (default female))</p>
<p>(slot age (default 4)))</p>
<p>CLIPS&gt;</p>
<p>(deftemplate woman</p>
<p>(slot name)</p>
<p>(slot sex (default female))</p>
<p>(slot age (default 25)))</p>
<p>CLIPS&gt;</p>
<p>(deftemplate boy</p>
<p>(slot name)</p>
<p>(slot sex (default male))</p>
<p>(slot age (default 4)))</p>
<p>CLIPS&gt;</p>
<p>(deftemplate man</p>
<p>(slot name)</p>
<p>(slot sex (default male))</p>
<p>(slot age (default 25)))</p>
<p>CLIPS&gt;</p>
<p>(deffacts PEOPLE</p>
<p>(man (name Man-1) (age 18))</p>
<p>(man (name Man-2) (age 60))</p>
<p>(woman (name Woman-1) (age 18))</p>
<p>(woman (name Woman-2) (age 60))</p>
<p>(woman (name Woman-3))</p>
<p>(boy (name Boy-1) (age 8))</p>
<p>(boy (name Boy-2))</p>
<p>(boy (name Boy-3))</p>
<p>(boy (name Boy-4))</p>
<p>(girl (name Girl-1) (age 8))</p>
<p>(girl (name Girl-2)))</p>
<p>CLIPS&gt; (reset)</p>
<p>CLIPS&gt; (facts)</p>
<p>f-0 (initial-fact)</p>
<p>f-1 (man (name Man-1) (sex male) (age 18))</p>
<p>f-2 (man (name Man-2) (sex male) (age 60))</p>
<p>f-3 (woman (name Woman-1) (sex female) (age 18))</p>
<p>f-4 (woman (name Woman-2) (sex female) (age 60))</p>
<p>f-5 (woman (name Woman-3) (sex female) (age 25))</p>
<p>f-6 (boy (name Boy-1) (sex male) (age 8))</p>
<p>f-7 (boy (name Boy-2) (sex male) (age 4))</p>
<p>f-8 (boy (name Boy-3) (sex male) (age 4))</p>
<p>f-9 (boy (name Boy-4) (sex male) (age 4))</p>
<p>f-10 (girl (name Girl-1) (sex female) (age 8))</p>
<p>f-11 (girl (name Girl-2) (sex female) (age 4))</p>
<p>For a total of 12 facts.</p>
<p>CLIPS&gt;</p>
<div class="section" id="fact-set-definition">
<h4>12.9.12.1 Fact-set Definition<a class="headerlink" href="#fact-set-definition" title="Permalink to this headline">¶</a></h4>
<p>A <strong>fact-set</strong> is an ordered collection of facts. Each <strong>fact-set
member</strong> is a member of a set of deftemplates, called <strong>template
restrictions</strong>, defined by the user. The template restrictions can be
different for each fact-set member. The query functions use <strong>fact-set
templates</strong> to generate fact-sets. A fact-set template is a set of
<strong>fact-set member variables</strong> and their associated template
restrictions. Fact-set member variables reference the corresponding
members in each fact-set which matches a template. Variables may be used
to specify the deftemplates for the fact-set template, but if the
constant names of the deftemplates are specified, the deftemplates must
already be defined. Module specifiers may be included with the
deftemplate names; the deftemplates need not be in scope of the current
module.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>::= (&lt;fact-set-member-template&gt;+)</p>
<p>&lt;fact-set-member-template&gt;</p>
<p>::= (&lt;fact-set-member-variable&gt; &lt;deftemplate-restrictions&gt;)</p>
<p>&lt;fact-set-member-variable&gt; ::= &lt;single-field-variable&gt;</p>
<p>&lt;deftemplate-restrictions&gt; ::= &lt;deftemplate-name-expression&gt;+</p>
<p>Example</p>
<p>One fact-set template might be the ordered pairs of boys or men and
girls or women.</p>
<p>((?man-or-boy boy man) (?woman-or-girl girl woman))</p>
<p>Fact-set member variables (e.g. ?man-or-boy) are bound to
fact-addresses.</p>
</div>
<div class="section" id="fact-set-determination">
<h4>12.9.12.2 Fact-set Determination<a class="headerlink" href="#fact-set-determination" title="Permalink to this headline">¶</a></h4>
<p>CLIPS uses straightforward permutations to generate fact-sets that match
a fact-set template from the actual facts in the system. The rules are
as follows:</p>
<p>1) When there is more than one member in a fact-set template, vary the
rightmost members first.</p>
<p>2) When there is more than one deftemplate that an fact-set member can
be, iterate through the deftemplate from left to right.</p>
<ol class="arabic simple" start="3">
<li>Examine facts of a deftemplate in the order that they were defined.</li>
</ol>
<p>Example</p>
<p>For the fact-set template given in section 12.9.12.1, thirty fact-sets
would be generated in the following order:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic simple">
<li>&lt;Fact-6&gt; &lt;Fact-10&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="16">
<li>&lt;Fact-9&gt; &lt;Fact-10&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="2">
<li>&lt;Fact-6&gt; &lt;Fact-11&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="17">
<li>&lt;Fact-9&gt; &lt;Fact-11&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="3">
<li>&lt;Fact-6&gt; &lt;Fact-3&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="18">
<li>&lt;Fact-9&gt; &lt;Fact-3&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="4">
<li>.&lt;Fact-6&gt; &lt;Fact-4&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="19">
<li>&lt;Fact-9&gt; &lt;Fact-4&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="5">
<li>&lt;Fact-6&gt; &lt;Fact-5&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="20">
<li>&lt;Fact-9&gt; &lt;Fact-5&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="6">
<li>&lt;Fact-7&gt; &lt;Fact-10&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="21">
<li>&lt;Fact-1&gt; &lt;Fact-10&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="7">
<li>&lt;Fact-7&gt; &lt;Fact-11&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="22">
<li>&lt;Fact-1&gt; &lt;Fact-11&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="8">
<li>&lt;Fact-7&gt; &lt;Fact-3&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="23">
<li>&lt;Fact-1&gt; &lt;Fact-3&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="9">
<li>&lt;Fact-7&gt; &lt;Fact-4&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="24">
<li>&lt;Fact-1&gt; &lt;Fact-4&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="10">
<li>&lt;Fact-7&gt; &lt;Fact-5&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="25">
<li>&lt;Fact-1&gt; &lt;Fact-5&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="11">
<li>&lt;Fact-8&gt; &lt;Fact-10&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="26">
<li>&lt;Fact-2&gt; &lt;Fact-10&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="12">
<li>&lt;Fact-8&gt; &lt;Fact-11&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="27">
<li>&lt;Fact-2&gt; &lt;Fact-11&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td>13 &lt;Fact-8&gt; &lt;Fact-3&gt;</td>
<td><ol class="first last arabic simple" start="28">
<li>&lt;Fact-2&gt; &lt;Fact-3&gt;</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><ol class="first last arabic simple" start="14">
<li>&lt;Fact-8&gt; &lt;Fact-4&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="29">
<li>&lt;Fact-2&gt; &lt;Fact-4&gt;</li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><ol class="first last arabic simple" start="15">
<li>&lt;Fact-8&gt; &lt;Fact-5&gt;</li>
</ol>
</td>
<td><ol class="first last arabic simple" start="30">
<li>&lt;Fact-2&gt; &lt;Fact-5&gt;</li>
</ol>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="query-definition">
<span id="query-definition-1"></span><h4>12.9.12.3 Query Definition<a class="headerlink" href="#query-definition" title="Permalink to this headline">¶</a></h4>
<p>A <strong>query</strong> is a user-defined boolean expression applied to a fact-set
to determine if the fact-set meets further user-defined restrictions. If
the evaluation of this expression for an fact-set is anything but the
symbol FALSE, the fact-set is said to satisfy the query.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span> <span class="p">::</span><span class="o">=</span> <span class="o">&lt;</span><span class="n">boolean</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Example</p>
<p>Continuing the previous example, one query might be that the two facts
in an ordered pair have the same age.</p>
<p>(= (fact-slot-value ?man-or-boy age) (fact-slot-value ?woman-or-girl
age))</p>
<p>Within a query, slots of fact-set members can be directly read with a
shorthand notation similar to that used by instances in message-handlers
(see section 9.4.2).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">member</span><span class="o">-</span><span class="n">variable</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Example</p>
<p>The previous example could be rewritten as:</p>
<p>(= ?man-or-boy:age ?woman-or-girl:age)</p>
<p>Since only fact-sets which satisfy a query are of interest, and the
query is evaluated for all possible fact-sets, the query should not have
any side-effects.</p>
</div>
<div class="section" id="distributed-action-definition">
<span id="distributed-action-definition-1"></span><h4>12.9.12.4 Distributed Action Definition<a class="headerlink" href="#distributed-action-definition" title="Permalink to this headline">¶</a></h4>
<p>A <strong>distributed action</strong> is a user-defined expression evaluated for each
fact-set which satisfies a query.</p>
<p>Action Syntax</p>
<p>&lt;action&gt; ::= &lt;expression&gt;</p>
<p>Example</p>
<p>Continuing the previous example, one distributed action might be to
simply print out the ordered pair to the screen.</p>
<p>(printout t “(” ?man-or-boy:name “,” ?woman-or-girl:name “)” crlf)</p>
</div>
<div class="section" id="scope-in-fact-set-query-functions">
<h4>12.9.12.5 Scope in Fact-set Query Functions<a class="headerlink" href="#scope-in-fact-set-query-functions" title="Permalink to this headline">¶</a></h4>
<p>A fact-set query function can be called from anywhere that a regular
function can be called. If a variable from an outer scope is not masked
by a fact-set member variable, then that variable may be referenced
within the query and action. In addition, rebinding variables within a
fact-set function action is allowed. However, attempts to rebind
fact-set member variables will generate errors. Binding variables is not
allowed within a query. Fact-set query functions can be nested.</p>
<p>Example</p>
<p>CLIPS&gt;</p>
<p>(deffunction count-facts (?template)</p>
<p>(bind ?count 0)</p>
<p>(do-for-all-facts ((?fct ?template)) TRUE</p>
<p>(bind ?count (+ ?count 1)))</p>
<p>?count)</p>
<p>CLIPS&gt;</p>
<p>(deffunction count-facts-2 (?template)</p>
<p>(length (find-all-facts ((?fct ?template)) TRUE)))</p>
<p>CLIPS&gt; (count-facts woman)</p>
<p>3</p>
<p>CLIPS&gt; (count-facts-2 boy)</p>
<p>4</p>
<p>CLIPS&gt;</p>
<p>Fact-set member variables are only in scope within the fact-set query
function. Attempting to use fact-set member variables in an outer scope
will generate an error.</p>
<p>Example</p>
<p>CLIPS&gt;</p>
<p>(deffunction last-fact (?template)</p>
<p>(any-factp ((?fct ?template)) TRUE)</p>
<p>?fct)</p>
<p>[PRCCODE3] Undefined variable fct referenced in deffunction.</p>
<p>ERROR:</p>
<p>(deffunction MAIN::last-fact</p>
<p>(?template)</p>
<p>(any-factp ((?fct ?template))</p>
<p>TRUE)</p>
<p>?fct</p>
<p>)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="errors-during-fact-set-query-functions">
<h4>12.9.12.6 Errors during Fact-set Query Functions<a class="headerlink" href="#errors-during-fact-set-query-functions" title="Permalink to this headline">¶</a></h4>
<p>If an error occurs during an fact-set query function, the function will
be immediately terminated and the return value will be the symbol FALSE.</p>
</div>
<div class="section" id="halting-and-returning-values-from-query-functions">
<span id="halting-and-returning-values-from-query-functions-1"></span><h4>12.9.12.7 Halting and Returning Values from Query Functions<a class="headerlink" href="#halting-and-returning-values-from-query-functions" title="Permalink to this headline">¶</a></h4>
<p>The functions <strong>break</strong> and <strong>return</strong> are now valid inside the action
of the fact-set query functions <strong>do-for-fact</strong>, <strong>do-for-all-facts</strong>
and <strong>delayed-do-for-all-facts</strong>. The <strong>return</strong> function is only valid
if it is applicable in the outer scope, whereas the <strong>break</strong> function
actually halts the query.</p>
</div>
<div class="section" id="fact-set-query-functions">
<h4>12.9.12.8 Fact-set Query Functions<a class="headerlink" href="#fact-set-query-functions" title="Permalink to this headline">¶</a></h4>
<p>The fact query system in CLIPS provides six functions. For a given set
of facts, all six query functions will iterate over these facts in the
same order (see section 12.9.12.2). However, if a particular fact is
retracted and reasserted, the iteration order will change.</p>
<div class="section" id="testing-if-any-fact-set-satisfies-a-query">
<h5>12.9.12.8.1 Testing if Any Fact-set Satisfies a Query<a class="headerlink" href="#testing-if-any-fact-set-satisfies-a-query" title="Permalink to this headline">¶</a></h5>
<p>This function applies a query to each fact-set which matches the
template. If a fact-set satisfies the query, then the function is
immediately terminated, and the return value is the symbol TRUE.
Otherwise, the return value is the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">any</span><span class="o">-</span><span class="n">factp</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>Are there any men over age 30?</p>
<p>CLIPS&gt; (any-factp ((?man man)) (&gt; ?man:age 30))</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-first-fact-set-satisfying-a-query">
<h5>12.9.12.8.2 Determining the First Fact-set Satisfying a Query<a class="headerlink" href="#determining-the-first-fact-set-satisfying-a-query" title="Permalink to this headline">¶</a></h5>
<p>This function applies a query to each fact-set which matches the
template. If a fact-set satisfies the query, then the function is
immediately terminated, and the fact-set is returned in a multifield
value. Otherwise, the return value is a zero-length multifield value.
Each field of the multifield value is a fact-address representing a
fact-set member.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">find</span><span class="o">-</span><span class="n">fact</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>Find the first pair of a man and a woman who have the same age.</p>
<p>CLIPS&gt;</p>
<p>(find-fact((?m man) (?w woman)) (= ?m:age ?w:age))</p>
<p>(&lt;Fact-1&gt; &lt;Fact-3&gt;)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-all-fact-sets-satisfying-a-query">
<h5>12.9.12.8.3 Determining All Fact-sets Satisfying a Query<a class="headerlink" href="#determining-all-fact-sets-satisfying-a-query" title="Permalink to this headline">¶</a></h5>
<p>This function applies a query to each fact-set which matches the
template. Each fact-set which satisfies the query is stored in a
multifield value. This multifield value is returned when the query has
been applied to all possible fact-sets. If there are n facts in each
fact-set, and m fact-sets satisfied the query, then the length of the
returned multifield value will be n * m. The first n fields correspond
to the first fact-set, and so on. Each field of the multifield value is
an fact-address representing a fact-set member. The multifield value can
consume a large amount of memory due to permutational explosion, so this
function should be used judiciously.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">find</span><span class="o">-</span><span class="nb">all</span><span class="o">-</span><span class="n">facts</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>Find all pairs of a man and a woman who have the same age.</p>
<p>CLIPS&gt;</p>
<p>(find-all-facts ((?m man) (?w woman)) (= ?m:age ?w:age))</p>
<p>(&lt;Fact-1&gt; &lt;Fact-3&gt; &lt;Fact-2&gt; &lt;Fact-4&gt;)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="executing-an-action-for-the-first-fact-set-satisfying-a-query">
<h5>12.9.12.8.4 Executing an Action for the First Fact-set Satisfying a Query<a class="headerlink" href="#executing-an-action-for-the-first-fact-set-satisfying-a-query" title="Permalink to this headline">¶</a></h5>
<p>This function applies a query to each fact-set which matches the
template. If a fact-set satisfies the query, the specified action is
executed, and the function is immediately terminated. The return value
is the evaluation of the action. If no fact-set satisfied the query,
then the return value is the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">do</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">fact</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>Print out the first triplet of different people that have the same age.
The calls to <strong>neq</strong> in the query eliminate the permutations where two
or more members of the instance-set are identical.</p>
<p>CLIPS&gt;</p>
<p>(do-for-fact ((?p1 girl boy woman man)</p>
<p>(?p2 girl boy woman man)</p>
<p>(?p3 girl boy woman man))</p>
<p>(and (= ?p1:age ?p2:age ?p3:age)</p>
<p>(neq ?p1 ?p2)</p>
<p>(neq ?p1 ?p3)</p>
<p>(neq ?p2 ?p3))</p>
<p>(printout t ?p1:name ” ” ?p2:name ” ” ?p3:name crlf))</p>
<p>Girl-2 Boy-2 Boy-3</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="executing-an-action-for-all-fact-sets-satisfying-a-query">
<h5>12.9.12.8.5 Executing an Action for All Fact-sets Satisfying a Query<a class="headerlink" href="#executing-an-action-for-all-fact-sets-satisfying-a-query" title="Permalink to this headline">¶</a></h5>
<p>This function applies a query to each fact-set which matches the
template. If a fact-set satisfies the query, the specified action is
executed. The return value is the evaluation of the action for the last
fact-set which satisfied the query. If no fact-set satisfied the query,
then the return value is the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">do</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nb">all</span><span class="o">-</span><span class="n">facts</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>Print out all triplets of different people that have the same age. The
calls to <strong>str-compare</strong> limit the fact-sets which satisfy the query to
combinations instead of permutations. Without these restrictions, two
fact-sets which differed only in the order of their members would both
satisfy the query.</p>
<p>CLIPS&gt;</p>
<p>(do-for-all-facts ((?p1 girl boy woman man)</p>
<p>(?p2 girl boy woman man)</p>
<p>(?p3 girl boy woman man))</p>
<p>(and (= ?p1:age ?p2:age ?p3:age)</p>
<p>(&gt; (str-compare ?p1:name ?p2:name) 0)</p>
<p>(&gt; (str-compare ?p2:name ?p3:name) 0))</p>
<p>(printout t ?p1:name ” ” ?p2:name ” ” ?p3:name crlf))</p>
<p>Girl-2 Boy-3 Boy-2</p>
<p>Girl-2 Boy-4 Boy-2</p>
<p>Girl-2 Boy-4 Boy-3</p>
<p>Boy-4 Boy-3 Boy-2</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="executing-a-delayed-action-for-all-fact-sets-satisfying-a-query">
<h5>12.9.12.8.6 Executing a Delayed Action for All Fact-sets Satisfying a Query<a class="headerlink" href="#executing-a-delayed-action-for-all-fact-sets-satisfying-a-query" title="Permalink to this headline">¶</a></h5>
<p>This function is similar to <strong>do-for-all-facts</strong> except that it groups
all fact-sets which satisfy the query into an intermediary multifield
value. If there are no fact-sets which satisfy the query, then the
function returns the symbol FALSE. Otherwise, the specified action is
executed for each fact-set in the multifield value, and the return value
is the evaluation of the action for the last fact-set to satisfy the
query. The intermediary multifield value is discarded. This function can
consume large amounts of memory in the same fashion as
<strong>find-all-facts</strong>. This function should be used in lieu of
<strong>do-for-all-facts</strong> when the action applied to one fact-set would
change the result of the query for another fact-set (unless that is the
desired effect).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">delayed</span><span class="o">-</span><span class="n">do</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nb">all</span><span class="o">-</span><span class="n">facts</span> <span class="o">&lt;</span><span class="n">fact</span><span class="o">-</span><span class="nb">set</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>&lt;query&gt; &lt;action&gt;*)</p>
<p>Example</p>
<p>Delete all boys with the greatest age. The test in this case is another
query function which determines if there are any older boys than the one
currently being examined. The action needs to be delayed until all boys
have been processed, or the greatest age will decrease as the older boys
are deleted.</p>
<p>CLIPS&gt; (watch facts)</p>
<p>CLIPS&gt;</p>
<p>(delayed-do-for-all-facts ((?b1 boy))</p>
<p>(not (any-factp ((?b2 boy)) (&gt; ?b2:age ?b1:age)))</p>
<p>(retract ?b1))</p>
<p>&lt;== f-6 (boy (name Boy-1) (sex male) (age 8))</p>
<p>CLIPS&gt; (unwatch facts)</p>
<p>CLIPS&gt; (reset)</p>
<p>CLIPS&gt; (watch facts)</p>
<p>CLIPS&gt;</p>
<p>(do-for-all-facts ((?b1 boy))</p>
<p>(not (any-factp ((?b2 boy)) (&gt; ?b2:age ?b1:age)))</p>
<p>(retract ?b1))</p>
<p>&lt;== f-6 (boy (name Boy-1) (sex male) (age 8))</p>
<p>&lt;== f-7 (boy (name Boy-2) (sex male) (age 4))</p>
<p>&lt;== f-8 (boy (name Boy-3) (sex male) (age 4))</p>
<p>&lt;== f-9 (boy (name Boy-4) (sex male) (age 4))</p>
<p>CLIPS&gt; (unwatch facts)</p>
<p>CLIPS&gt;</p>
</div>
</div>
</div>
</div>
<div class="section" id="deffacts-functions">
<h2>12.10 Deffacts Functions<a class="headerlink" href="#deffacts-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for the deffacts
construct.</p>
<div class="section" id="getting-the-list-of-deffacts">
<h3>12.10.1 Getting the List of Deffacts<a class="headerlink" href="#getting-the-list-of-deffacts" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-deffacts-list</strong> returns a multifield value containing
the names of all deffacts constructs visible to the module specified by
&lt;module-name&gt; or to the current module if none is specified. If * is
specified as the module name, then all deffacts are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">deffacts</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-deffacts-list)</p>
<p>(initial-fact)</p>
<p>CLIPS&gt; (deffacts foo)</p>
<p>CLIPS&gt; (get-deffacts-list)</p>
<p>(initial-fact foo)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-deffacts-is-defined">
<h3>12.10.2 Determining the Module in which a Deffacts is Defined<a class="headerlink" href="#determining-the-module-in-which-a-deffacts-is-defined" title="Permalink to this headline">¶</a></h3>
<p>This function returns the module in which the specified deffacts name is
defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deffacts</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">deffacts</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="defrule-functions">
<h2>12.11 Defrule Functions<a class="headerlink" href="#defrule-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for the defrule
construct.</p>
<div class="section" id="getting-the-list-of-defrules">
<h3>12.11.1 Getting the List of Defrules<a class="headerlink" href="#getting-the-list-of-defrules" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-defrule-list</strong> returns a multifield value containing
the names of all defrule constructs visible to the module specified by
&lt;module-name&gt; or to the current module if none is specified. If * is
specified as the module name, then all defrules are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defrule</span><span class="o">-</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-defrule-list)</p>
<p>()</p>
<p>CLIPS&gt; (defrule foo =&gt;)</p>
<p>CLIPS&gt; (defrule bar =&gt;)</p>
<p>CLIPS&gt; (get-defrule-list)</p>
<p>(foo bar)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-defrule-is-defined">
<h3>12.11.2 Determining the Module in which a Defrule is Defined<a class="headerlink" href="#determining-the-module-in-which-a-defrule-is-defined" title="Permalink to this headline">¶</a></h3>
<p>This function returns the module in which the specified defrule name is
defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">defrule</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">defrule</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="agenda-functions">
<h2>12.12 Agenda Functions<a class="headerlink" href="#agenda-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities manipulating the
agenda.</p>
<div class="section" id="getting-the-current-focus">
<h3>12.12.1 Getting the Current Focus<a class="headerlink" href="#getting-the-current-focus" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-focus</strong> returns the module name of the current focus.
If the focus stack is empty, then the symbol FALSE is returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">focus</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-focus)</p>
<p>MAIN</p>
<p>CLIPS&gt; (defmodule A)</p>
<p>CLIPS&gt; (defmodule B)</p>
<p>CLIPS&gt; (focus A B)</p>
<p>TRUE</p>
<p>CLIPS&gt; (get-focus)</p>
<p>A</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-focus-stack">
<h3>12.12.2 Getting the Focus Stack<a class="headerlink" href="#getting-the-focus-stack" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-focus-stack</strong> returns all of the module names in the
focus stack as a multifield value. A multifield value of length zero is
returned if the focus stack is empty.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">focus</span><span class="o">-</span><span class="n">stack</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-focus-stack)</p>
<p>(MAIN)</p>
<p>CLIPS&gt; (clear-focus-stack)</p>
<p>CLIPS&gt; (get-focus-stack)</p>
<p>()</p>
<p>CLIPS&gt; (defmodule A)</p>
<p>CLIPS&gt; (defmodule B)</p>
<p>CLIPS&gt; (focus A B)</p>
<p>TRUE</p>
<p>CLIPS&gt; (get-focus-stack)</p>
<p>(A B)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="removing-the-current-focus-from-the-focus-stack">
<h3>12.12.3 Removing the Current Focus from the Focus Stack<a class="headerlink" href="#removing-the-current-focus-from-the-focus-stack" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>pop-focus</strong> removes the current focus from the focus
stack and returns the module name of the current focus. If the focus
stack is empty, then the symbol FALSE is returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">pop</span><span class="o">-</span><span class="n">focus</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (list-focus-stack)</p>
<p>MAIN</p>
<p>CLIPS&gt; (pop-focus)</p>
<p>MAIN</p>
<p>CLIPS&gt; (defmodule A)</p>
<p>CLIPS&gt; (defmodule B)</p>
<p>CLIPS&gt; (focus A B)</p>
<p>TRUE</p>
<p>CLIPS&gt; (list-focus-stack)</p>
<p>A</p>
<p>B</p>
<p>MAIN</p>
<p>CLIPS&gt; (pop-focus)</p>
<p>A</p>
<p>CLIPS&gt; (list-focus-stack)</p>
<p>B</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="defglobal-functions">
<h2>12.13 Defglobal Functions<a class="headerlink" href="#defglobal-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for the defglobal
construct.</p>
<div class="section" id="getting-the-list-of-defglobals">
<h3>12.13.1 Getting the List of Defglobals<a class="headerlink" href="#getting-the-list-of-defglobals" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-defglobal-list</strong> returns a multifield value
containing the names of all global variables visible to the module
specified by &lt;module-name&gt; or to the current module if none is
specified. If * is specified as the module name, then all globals are
returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defglobal</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-defglobal-list)</p>
<p>()</p>
<p>CLIPS&gt; (defglobal ?*x* = 3 ?*y* = 5)</p>
<p>CLIPS&gt; (get-defglobal-list)</p>
<p>(x y)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-defglobal-is-defined">
<h3>12.13.2 Determining the Module in which a Defglobal is Defined<a class="headerlink" href="#determining-the-module-in-which-a-defglobal-is-defined" title="Permalink to this headline">¶</a></h3>
<p>This function returns the module in which the specified defglobal name
is defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">defglobal</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">defglobal</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="deffunction-functions">
<h2>12.14 Deffunction Functions<a class="headerlink" href="#deffunction-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for the
deffunction construct.</p>
<div class="section" id="getting-the-list-of-deffunctions">
<h3>12.14.1 Getting the List of Deffunctions<a class="headerlink" href="#getting-the-list-of-deffunctions" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-deffunction-list</strong> returns a multifield value
containing the names of all deffunction constructs visible to the module
specified by &lt;module-name&gt; or to the current module if none is
specified. If * is specified as the module name, then all deffunctions
are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">deffunction</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-deffunction-list)</p>
<p>()</p>
<p>CLIPS&gt; (deffunction foo ())</p>
<p>CLIPS&gt; (deffunction bar ())</p>
<p>CLIPS&gt; (get-deffunction-list)</p>
<p>(foo bar)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-deffunction-is-defined">
<h3>12.14.2 Determining the Module in which a Deffunction is Defined<a class="headerlink" href="#determining-the-module-in-which-a-deffunction-is-defined" title="Permalink to this headline">¶</a></h3>
<p>This function returns the module in which the specified deffunction name
is defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">deffunction</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">deffunction</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generic-function-functions">
<h2>12.15 Generic Function Functions<a class="headerlink" href="#generic-function-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for generic
function methods.</p>
<div class="section" id="getting-the-list-of-defgenerics">
<h3>12.15.1 Getting the List of Defgenerics<a class="headerlink" href="#getting-the-list-of-defgenerics" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-defgeneric-list</strong> returns a multifield value
containing the names of all defgeneric constructs that are currently
defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defgeneric</span><span class="o">-</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-defgeneric-list)</p>
<p>()</p>
<p>CLIPS&gt; (defgeneric foo)</p>
<p>CLIPS&gt; (defgeneric bar)</p>
<p>CLIPS&gt; (get-defgeneric-list)</p>
<p>(foo bar)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-generic-function-is-defined">
<h3>12.15.2 Determining the Module in which a Generic Function is Defined<a class="headerlink" href="#determining-the-module-in-which-a-generic-function-is-defined" title="Permalink to this headline">¶</a></h3>
<p>This function returns the module in which the specified defgeneric name
is defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">defgeneric</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">defgeneric</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-list-of-defmethods">
<h3>12.15.3 Getting the List of Defmethods<a class="headerlink" href="#getting-the-list-of-defmethods" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-defmethod-list</strong> returns a multifield value
containing method name/indices pairs for all defmethod constructs that
are currently defined. The optional generic-function name parameter
restricts the methods return to only those of the specified generic
function.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defmethod</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">generic</span><span class="o">-</span><span class="n">function</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-defmethod-list)</p>
<p>()</p>
<p>CLIPS&gt; (defmethod foo ((?x STRING)))</p>
<p>CLIPS&gt; (defmethod foo ((?x INTEGER)))</p>
<p>CLIPS&gt; (defmethod bar ((?x STRING)))</p>
<p>CLIPS&gt; (defmethod bar ((?x INTEGER)))</p>
<p>CLIPS&gt; (get-defmethod-list)</p>
<p>(foo 1 foo 2 bar 1 bar 2)</p>
<p>CLIPS&gt; (get-defmethod-list foo)</p>
<p>(foo 1 foo 2)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="type-determination">
<h3>12.15.4 Type Determination<a class="headerlink" href="#type-determination" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>type</strong> returns a symbol which is the name of the type (or
class) of its of argument. This function is equivalent to the <strong>class</strong>
function (see section 12.16.4.4), but, unlike the <strong>class</strong> function, it
is available even when COOL is not installed.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">type</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (type (+ 2 2))</p>
<p>INTEGER</p>
<p>CLIPS&gt; (defclass CAR (is-a USER))</p>
<p>CLIPS&gt; (make-instance Rolls-Royce of CAR)</p>
<p>[Rolls-Royce]</p>
<p>CLIPS&gt; (type Rolls-Royce)</p>
<p>SYMBOL</p>
<p>CLIPS&gt; (type [Rolls-Royce])</p>
<p>CAR</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="existence-of-shadowed-methods">
<h3>12.15.5 Existence of Shadowed Methods<a class="headerlink" href="#existence-of-shadowed-methods" title="Permalink to this headline">¶</a></h3>
<p>If called from a method for a generic function, the function
<strong>next-methodp</strong> will return the symbol TRUE if there is another method
shadowed (see section 8.5.3) by the current one. Otherwise, the function
will return the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">next</span><span class="o">-</span><span class="n">methodp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-shadowed-methods">
<h3>12.15.6 Calling Shadowed Methods<a class="headerlink" href="#calling-shadowed-methods" title="Permalink to this headline">¶</a></h3>
<p>If the conditions are such that the function <strong>next-methodp</strong> would
return the symbol TRUE (see section 12.15.5), then calling the function
<strong>call-next-method</strong> will execute the shadowed (see section 8.5.3)
method. Otherwise, a method execution error will occur (see section
8.5.4). In the event of an error, the return value of this function is
the symbol FALSE, otherwise it is the return value of the shadowed
method. The shadowed method is passed the same arguments as the calling
method.</p>
<p>A method may continue execution after calling <strong>call-next-method</strong>. In
addition, a method may make multiple calls to <strong>call-next-method</strong>, and
the same shadowed method will be executed each time.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">call</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">method</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt;</p>
<p>(defmethod describe ((?a INTEGER))</p>
<p>(if (next-methodp) then</p>
<p>(bind ?extension (str-cat ” ” (call-next-method)))</p>
<p>else</p>
<p>(bind ?extension “”))</p>
<p>(str-cat “INTEGER” ?extension))</p>
<p>CLIPS&gt; (describe 3)</p>
<p>“INTEGER”</p>
<p>CLIPS&gt;</p>
<p>(defmethod describe ((?a NUMBER))</p>
<p>“NUMBER”)</p>
<p>CLIPS&gt; (describe 3)</p>
<p>“INTEGER NUMBER”</p>
<p>CLIPS&gt; (describe 3.0)</p>
<p>“NUMBER”</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="calling-shadowed-methods-with-overrides">
<h3>12.15.7 Calling Shadowed Methods with Overrides<a class="headerlink" href="#calling-shadowed-methods-with-overrides" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>override-next-method</strong> is similar to
<strong>call-next-method</strong>, except that new arguments can be provided. This
allows one method to act as a wrapper for another and set up a special
environment for the shadowed method. From the set of methods which are
more general than the currently executing one, the most specific method
which is applicable to the new arguments is executed. (In contrast,
<strong>call-next-method</strong> calls the next most specific method which is
applicable to the same arguments as the currently executing one
received.) A recursive call to the generic function itself should be
used in lieu of <strong>override-next-method</strong> if the most specific of all
methods for the generic function which is applicable to the new
arguments should be executed.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">override</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">method</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defmethod + ((?a INTEGER) (?b INTEGER))</p>
<p>(override-next-method (* ?a 2) (* ?b 3)))</p>
<p>CLIPS&gt; (list-defmethods +)</p>
<ul class="simple">
<li>#2 (INTEGER) (INTEGER)</li>
<li>#SYS1 (NUMBER) (NUMBER) ($? NUMBER)</li>
</ul>
<p>For a total of 2 methods.</p>
<p>CLIPS&gt; (preview-generic + 1 2)</p>
<ul class="simple">
<li>#2 (INTEGER) (INTEGER)</li>
<li>#SYS1 (NUMBER) (NUMBER) ($? NUMBER)</li>
</ul>
<p>CLIPS&gt; (watch methods)</p>
<p>CLIPS&gt; (+ 1 2)</p>
<p>MTH &gt;&gt; +:#2 ED:1 (1 2)</p>
<p>MTH &gt;&gt; +:#SYS1 ED:2 (2 6)</p>
<p>MTH &lt;&lt; +:#SYS1 ED:2 (2 6)</p>
<p>MTH &lt;&lt; +:#2 ED:1 (1 2)</p>
<p>8</p>
<p>CLIPS&gt; (unwatch methods)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="calling-a-specific-method">
<h3>12.15.8 Calling a Specific Method<a class="headerlink" href="#calling-a-specific-method" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>call-specific-method</strong> allows the user to call a
particular method of a generic function without regards to method
precedence. This allows the user to bypass method precedence when
absolutely necessary. The method must be applicable to the arguments
passed. Shadowed methods can still be called via <strong>call-next-method</strong>
and <strong>override-next-method</strong>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">call</span><span class="o">-</span><span class="n">specific</span><span class="o">-</span><span class="n">method</span> <span class="o">&lt;</span><span class="n">generic</span><span class="o">-</span><span class="n">function</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>&lt;expression&gt;*)</p>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defmethod + ((?a INTEGER) (?b INTEGER))</p>
<p>(* (- ?a ?b) (- ?b ?a)))</p>
<p>CLIPS&gt; (list-defmethods +)</p>
<ul class="simple">
<li>#2 (INTEGER) (INTEGER)</li>
<li>#SYS1 (NUMBER) (NUMBER) ($? NUMBER)</li>
</ul>
<p>For a total of 2 methods.</p>
<p>CLIPS&gt; (preview-generic + 1 2)</p>
<ul class="simple">
<li>#2 (INTEGER) (INTEGER)</li>
<li>#SYS1 (NUMBER) (NUMBER) ($? NUMBER)</li>
</ul>
<p>CLIPS&gt; (watch methods)</p>
<p>CLIPS&gt; (+ 1 2)</p>
<p>MTH &gt;&gt; +:#2 ED:1 (1 2)</p>
<p>MTH &lt;&lt; +:#2 ED:1 (1 2)</p>
<p>-1</p>
<p>CLIPS&gt; (call-specific-method + 1 1 2)</p>
<p>MTH &gt;&gt; +:#SYS1 ED:1 (1 2)</p>
<p>MTH &lt;&lt; +:#SYS1 ED:1 (1 2)</p>
<p>3</p>
<p>CLIPS&gt; (unwatch methods)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-restrictions-of-defmethods">
<h3>12.15.9 Getting the Restrictions of Defmethods<a class="headerlink" href="#getting-the-restrictions-of-defmethods" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-method-restrictions</strong> returns a multifield value
containing information about the restrictions for the specified method
using the following format:</p>
<p>&lt;minimum-number-of-arguments&gt;</p>
<p>&lt;maximum-number-of-arguments&gt; (can be -1 for wildcards)</p>
<p>&lt;number-of-restrictions&gt;</p>
<p>&lt;multifield-index-of-first-restriction-info&gt;</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>&lt;multifield-index-of-nth-restriction-info&gt;</p>
<p>&lt;first-restriction-query&gt; (TRUE or FALSE)</p>
<p>&lt;first-restriction-class-count&gt;</p>
<p>&lt;first-restriction-first-class&gt;</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>&lt;first-restriction-nth-class&gt;</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>&lt;mth-restriction-class-count&gt;</p>
<p>&lt;mth-restriction-first-class&gt;</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>&lt;mth-restriction-nth-class&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">method</span><span class="o">-</span><span class="n">restrictions</span> <span class="o">&lt;</span><span class="n">generic</span><span class="o">-</span><span class="n">function</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>&lt;method-index&gt;)</p>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defmethod foo 50 ((?a INTEGER SYMBOL) (?b (= 1 1)) $?c))</p>
<p>CLIPS&gt; (get-method-restrictions foo 50)</p>
<p>(2 -1 3 7 11 13 FALSE 2 INTEGER SYMBOL TRUE 0 FALSE 0)</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="clips-object-oriented-language-cool-functions">
<h2>12.16 CLIPS Object-Oriented Language (COOL) Functions<a class="headerlink" href="#clips-object-oriented-language-cool-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for COOL.</p>
<div class="section" id="class-functions">
<h3>12.16.1 Class Functions<a class="headerlink" href="#class-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="getting-the-list-of-defclasses">
<h4>12.16.1.1 Getting the List of Defclasses<a class="headerlink" href="#getting-the-list-of-defclasses" title="Permalink to this headline">¶</a></h4>
<p>The function <strong>get-defclass-list</strong> returns a multifield value containing
the names of all defclass constructs visible to the module specified by
&lt;module-name&gt; or to the current module if none is specified. If * is
specified as the module name, then all defclasses are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defclass</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-defclass-list)</p>
<p>(FLOAT INTEGER SYMBOL STRING MULTIFIELD EXTERNAL-ADDRESS FACT-ADDRESS
INSTANCE-ADDRESS INSTANCE-NAME OBJECT PRIMITIVE NUMBER LEXEME ADDRESS
INSTANCE USER INITIAL-OBJECT)</p>
<p>CLIPS&gt; (defclass FOO (is-a USER))</p>
<p>CLIPS&gt; (defclass BAR (is-a USER))</p>
<p>CLIPS&gt; (get-defclass-list)</p>
<p>(FLOAT INTEGER SYMBOL STRING MULTIFIELD EXTERNAL-ADDRESS FACT-ADDRESS
INSTANCE-ADDRESS INSTANCE-NAME OBJECT PRIMITIVE NUMBER LEXEME ADDRESS
INSTANCE USER INITIAL-OBJECT FOO BAR)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-defclass-is-defined">
<h4>12.16.1.2 Determining the Module in which a Defclass is Defined<a class="headerlink" href="#determining-the-module-in-which-a-defclass-is-defined" title="Permalink to this headline">¶</a></h4>
<p>This function returns the module in which the specified defclass name is
defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">defclass</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">defclass</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="determining-if-a-class-exists">
<h4>12.16.1.3 Determining if a Class Exists<a class="headerlink" href="#determining-if-a-class-exists" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified class is defined,
FALSE otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">class</span><span class="o">-</span><span class="n">existp</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="superclass-determination">
<h4>12.16.1.4 Superclass Determination<a class="headerlink" href="#superclass-determination" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the first class is a superclass
of the second class, FALSE otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">superclassp</span> <span class="o">&lt;</span><span class="n">class1</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">class2</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="subclass-determination">
<h4>12.16.1.5 Subclass Determination<a class="headerlink" href="#subclass-determination" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the first class is a subclass
of the second class, FALSE otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">subclassp</span> <span class="o">&lt;</span><span class="n">class1</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">class2</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="slot-existence">
<h4>12.16.1.6 Slot Existence<a class="headerlink" href="#slot-existence" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified slot is present
in the specified class, FALSE otherwise. If the <em>inherit</em> keyword is
specified then the slot may be inherited, otherwise it must be directly
defined in the specified class.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">existp</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">inherit</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-whether-a-slot-is-writable">
<h4>12.16.1.7 Testing whether a Slot is Writable<a class="headerlink" href="#testing-whether-a-slot-is-writable" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified slot in the
specified class is writable (see section 9.3.3.4). Otherwise, it returns
the symbol FALSE. An error is generated if the specified class or slot
does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">writablep</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-whether-a-slot-is-initializable">
<h4>12.16.1.8 Testing whether a Slot is Initializable<a class="headerlink" href="#testing-whether-a-slot-is-initializable" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified slot in the
specified class is initializable (see section 9.3.3.4). Otherwise, it
returns the symbol FALSE. An error is generated if the specified class
or slot does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">initablep</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-whether-a-slot-is-public">
<h4>12.16.1.9 Testing whether a Slot is Public<a class="headerlink" href="#testing-whether-a-slot-is-public" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified slot in the
specified class is public (see section 9.3.3.8). Otherwise, it returns
the symbol FALSE. An error is generated if the specified class or slot
does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">publicp</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-whether-a-slot-can-be-accessed-directly">
<h4>12.16.1.10 Testing whether a Slot can be Accessed Directly<a class="headerlink" href="#testing-whether-a-slot-can-be-accessed-directly" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified slot in the
specified class can be accessed directly (see section 9.4.2). Otherwise,
it returns the symbol FALSE. An error is generated if the specified
class or slot does not exist.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">direct</span><span class="o">-</span><span class="n">accessp</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="message-handler-existence">
<h4>12.16.1.11 Message-handler Existence<a class="headerlink" href="#message-handler-existence" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified message-handler
is defined (directly only, not by inheritance) for the class, FALSE
otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<p>Defaults are in <strong>bold italics</strong>.</p>
<p>(message-handler-existp &lt;class-name&gt; &lt;handler-name&gt; [&lt;handler-type&gt;])</p>
<p>&lt;handler-type&gt; ::= around | before | <strong>primary</strong> | after</p>
</div>
<div class="section" id="determining-if-a-class-can-have-direct-instances">
<h4>12.16.1.12 Determining if a Class can have Direct Instances<a class="headerlink" href="#determining-if-a-class-can-have-direct-instances" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified class is
abstract, i.e. the class cannot have direct instances, FALSE otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">class</span><span class="o">-</span><span class="n">abstractp</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="determining-if-a-class-can-satisfy-object-patterns">
<h4>12.16.1.13 Determining if a Class can Satisfy Object Patterns<a class="headerlink" href="#determining-if-a-class-can-satisfy-object-patterns" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if the specified class is
reactive, i.e. objects of the class can match object patterns, FALSE
otherwise.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">class</span><span class="o">-</span><span class="n">reactivep</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-list-of-superclasses-for-a-class">
<h4>12.16.1.14 Getting the List of Superclasses for a Class<a class="headerlink" href="#getting-the-list-of-superclasses-for-a-class" title="Permalink to this headline">¶</a></h4>
<p>This function groups the names of the direct superclasses of a class
into a multifield variable. If the optional argument ?inherit? is given,
indirect superclasses are also included. A multifield of length zero is
returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">class</span><span class="o">-</span><span class="n">superclasses</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">inherit</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (class-superclasses INTEGER)</p>
<p>(NUMBER)</p>
<p>CLIPS&gt; (class-superclasses INTEGER inherit)</p>
<p>(NUMBER PRIMITIVE OBJECT)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-list-of-subclasses-for-a-class">
<h4>12.16.1.15 Getting the List of Subclasses for a Class<a class="headerlink" href="#getting-the-list-of-subclasses-for-a-class" title="Permalink to this headline">¶</a></h4>
<p>This function groups the names of the direct subclasses of a class into
a multifield variable. If the optional argument ?inherit? is given,
indirect subclasses are also included. A multifield of length zero is
returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">class</span><span class="o">-</span><span class="n">subclasses</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">inherit</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (class-subclasses PRIMITIVE)</p>
<p>(NUMBER LEXEME MULTIFIELD ADDRESS INSTANCE)</p>
<p>CLIPS&gt; (class-subclasses PRIMITIVE inherit)</p>
<p>(NUMBER INTEGER FLOAT LEXEME SYMBOL STRING MULTIFIELD ADDRESS
EXTERNAL-ADDRESS FACT-ADDRESS INSTANCE-ADDRESS INSTANCE INSTANCE-NAME)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-list-of-slots-for-a-class">
<h4>12.16.1.16 Getting the List of Slots for a Class<a class="headerlink" href="#getting-the-list-of-slots-for-a-class" title="Permalink to this headline">¶</a></h4>
<p>This function groups the names of the explicitly defined slots of a
class into a multifield variable. If the optional argument ?inherit? is
given, inherited slots are also included. A multifield of length zero is
returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">class</span><span class="o">-</span><span class="n">slots</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">inherit</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (defclass A (is-a USER) (slot x))</p>
<p>CLIPS&gt; (defclass B (is-a A) (slot y))</p>
<p>CLIPS&gt; (class-slots B)</p>
<ol class="loweralpha simple" start="25">
<li></li>
</ol>
<p>CLIPS&gt; (class-slots B inherit)</p>
<p>(x y)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-list-of-message-handlers-for-a-class">
<h4>12.16.1.17 Getting the List of Message-Handlers for a Class<a class="headerlink" href="#getting-the-list-of-message-handlers-for-a-class" title="Permalink to this headline">¶</a></h4>
<p>This function groups the class names, message names and message types of
the message-handlers attached direct to class into a multifield variable
(implicit slot-accessors are not included). If the optional argument
?inherit? is given, inherited message-handlers are also included. A
multifield of length zero is returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defmessage</span><span class="o">-</span><span class="n">handler</span><span class="o">-</span><span class="nb">list</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">inherit</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defclass A (is-a USER))</p>
<p>CLIPS&gt; (defmessage-handler A foo ())</p>
<p>CLIPS&gt; (get-defmessage-handler-list A)</p>
<p>(A foo primary)</p>
<p>CLIPS&gt; (get-defmessage-handler-list A inherit)</p>
<p>(USER init primary USER delete primary USER create primary USER print
primary USER direct-modify primary USER message-modify primary USER
direct-duplicate primary USER message-duplicate primary A foo primary)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-list-of-facets-for-a-slot">
<h4>12.16.1.18 Getting the List of Facets for a Slot<a class="headerlink" href="#getting-the-list-of-facets-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function returns a multifield listing the facet values for the
specified slot (the slot can be inherited or explicitly defined for the
class). A multifield of length zero is returned if an error occurs.
Following is a table indicating what each field represents and its
possible values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="23%" />
<col width="18%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Field</strong></th>
<th class="head"><strong>Meaning</strong></th>
<th class="head"><strong>Values</strong></th>
<th class="head"><strong>Explanation</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>Field Type</td>
<td>SGL/MLT</td>
<td>Single-field or multifield</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>Default Value</td>
<td>STC/DYN/NIL</td>
<td>Static, dynamic, or none</td>
</tr>
<tr class="row-even"><td>3</td>
<td>Inheritance</td>
<td>INH/NIL</td>
<td>Inheritable by other classes or not</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>Access</td>
<td>RW/R/INT</td>
<td>Read-write, read-only, or initialize-only</td>
</tr>
<tr class="row-even"><td>5</td>
<td>Storage</td>
<td>LCL/SHR</td>
<td>Local or shared</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>Pattern-Match</td>
<td>RCT/NIL</td>
<td>Reactive or non-reactive</td>
</tr>
<tr class="row-even"><td>7</td>
<td>Source</td>
<td>EXC/CMP</td>
<td>Exclusive or composite</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>Visibility</td>
<td>PUB/PRV</td>
<td>Public or private</td>
</tr>
<tr class="row-even"><td>9</td>
<td>Automatic Accessors</td>
<td>R/W/RW/NIL</td>
<td>Read, write, read-write, or none</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>Override-Message</td>
<td>&lt;message-name&gt;</td>
<td>Name of message sent for slot-overrides</td>
</tr>
</tbody>
</table>
<p>See section 9.3.3 for more details on slot facets.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">facets</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defclass A (is-a USER) (slot x (access read-only)))</p>
<p>CLIPS&gt; (defclass B (is-a A) (multislot y))</p>
<p>CLIPS&gt; (slot-facets B x)</p>
<p>(SGL STC INH R SHR RCT EXC PRV R NIL)</p>
<p>CLIPS&gt; (slot-facets B y)</p>
<p>(MLT STC INH RW LCL RCT EXC PRV RW put-y)</p>
<p>CLIPS&gt;&gt;</p>
</div>
<div class="section" id="getting-the-list-of-source-classes-for-a-slot">
<h4>12.16.1.19 Getting the List of Source Classes for a Slot<a class="headerlink" href="#getting-the-list-of-source-classes-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function groups the names of the classes which provide facets for a
slot of a class into a multifield variable. In the case of an exclusive
slot, this multifield will be of length one and contain the name of the
contributing class. However, composite slots may have facets from many
different classes (see section 9.3.3.6). A multifield of length zero is
returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">sources</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(slot x (access read-only)))</p>
<p>CLIPS&gt;</p>
<p>(defclass B (is-a A)</p>
<p>(slot x (source composite)</p>
<p>(default 100)))</p>
<p>CLIPS&gt; (defclass C (is-a B))</p>
<p>CLIPS&gt; (slot-sources A x)</p>
<ol class="upperalpha simple">
<li></li>
</ol>
<p>CLIPS&gt; (slot-sources B x)</p>
<p>(A B)</p>
<p>CLIPS&gt; (slot-sources C x)</p>
<p>(A B)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-primitive-types-for-a-slot">
<h4>12.16.1.20 Getting the Primitive Types for a Slot<a class="headerlink" href="#getting-the-primitive-types-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function groups the names of the primitive types allowed for a slot
into a multifield variable. A multifield of length zero is returned if
an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">types</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defclass A (is-a USER) (slot y (type INTEGER LEXEME)))</p>
<p>CLIPS&gt; (slot-types A y)</p>
<p>(INTEGER SYMBOL STRING)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-cardinality-for-a-slot">
<h4>12.16.1.21 Getting the Cardinality for a Slot<a class="headerlink" href="#getting-the-cardinality-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function groups the minimum and maximum cardinality allowed for a
multifield slot into a multifield variable. A maximum cardinality of
infinity is indicated by the symbol <strong>+oo</strong> (the plus character followed
by two lowercase o?s?not zeroes). A multifield of length zero is
returned for single field slots or if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">cardinality</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(slot x)</p>
<p>(multislot y (cardinality ?VARIABLE 5))</p>
<p>(multislot z (cardinality 3 ?VARIABLE)))</p>
<p>CLIPS&gt; (slot-cardinality A x)</p>
<p>()</p>
<p>CLIPS&gt; (slot-cardinality A y)</p>
<p>(0 5)</p>
<p>CLIPS&gt; (slot-cardinality A z)</p>
<p>(3 +oo)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-allowed-values-for-a-slot">
<h4>12.16.1.22 Getting the Allowed Values for a Slot<a class="headerlink" href="#getting-the-allowed-values-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function groups the allowed values for a slot (specified in any of
allowed-? facets for the slots) into a multifield variable. If no
allowed-? facets were specified for the slot, then the symbol FALSE is
returned. A multifield of length zero is returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">allowed</span><span class="o">-</span><span class="n">values</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(slot x)</p>
<p>(slot y (allowed-integers 2 3) (allowed-symbols foo)))</p>
<p>CLIPS&gt; (slot-allowed-values A x)</p>
<p>FALSE</p>
<p>CLIPS&gt; (slot-allowed-values A y)</p>
<p>(2 3 foo)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-numeric-range-for-a-slot">
<h4>12.16.1.23 Getting the Numeric Range for a Slot<a class="headerlink" href="#getting-the-numeric-range-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function groups the minimum and maximum numeric ranges allowed a
slot into a multifield variable. A minimum value of infinity is
indicated by the symbol <strong>-oo</strong> (the minus character followed by two
lowercase o?s?not zeroes). A maximum value of infinity is indicated by
the symbol <strong>+oo</strong> (the plus character followed by two lowercase o?s?not
zeroes). The symbol FALSE is returned for slots in which numeric values
are not allowed. A multifield of length zero is returned if an error
occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="nb">range</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(slot x)</p>
<p>(slot y (type SYMBOL))</p>
<p>(slot z (range 3 10)))</p>
<p>CLIPS&gt; (slot-range A x)</p>
<p>(-oo +oo)</p>
<p>CLIPS&gt; (slot-range A y)</p>
<p>FALSE</p>
<p>CLIPS&gt; (slot-range A z)</p>
<p>(3 10)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="getting-the-default-value-for-a-slot">
<h4>12.16.1.24 Getting the Default Value for a Slot<a class="headerlink" href="#getting-the-default-value-for-a-slot" title="Permalink to this headline">¶</a></h4>
<p>This function returns the default value associated with a slot. If a
slot has a dynamic default, the expression will be evaluated when this
function is called. The symbol FALSE is returned if an error occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">value</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(slot x (default 3))</p>
<p>(multislot y (default a b c))</p>
<p>(slot z (default-dynamic (gensym))))</p>
<p>CLIPS&gt; (slot-default-value A x)</p>
<p>3</p>
<p>CLIPS&gt; (slot-default-value A y)</p>
<p>(a b c)</p>
<p>CLIPS&gt; (slot-default-value A z)</p>
<p>gen1</p>
<p>CLIPS&gt; (slot-default-value A z)</p>
<p>gen2</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="setting-the-defaults-mode-for-classes">
<h4>12.16.1.25 Setting the Defaults Mode for Classes<a class="headerlink" href="#setting-the-defaults-mode-for-classes" title="Permalink to this headline">¶</a></h4>
<p>This function sets the defaults mode used when classes are defined. The
old mode is the return value of this function.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">set</span><span class="o">-</span><span class="n">class</span><span class="o">-</span><span class="n">defaults</span><span class="o">-</span><span class="n">mode</span> <span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where &lt;mode&gt; is either convenience or conservation. By default, the
class defaults mode is convenience. If the mode is convenience, then for
the purposes of role inheritance, system defined class behave as
concrete classes; for the purpose of pattern-match inheritance, system
defined classes behave as reactive classes unless the inheriting class
is abstract; and the default setting for the create-accessor facet of
the class? slots is read-write. If the class defaults mode is
conservation, then the role and reactivity of system-defined classes is
unchanged for the purposes of role and pattern-match inheritance and the
default setting for the create-accessor facet of the class? slots is
?NONE.</p>
</div>
<div class="section" id="getting-the-defaults-mode-for-classes">
<h4>12.16.1.26 Getting the Defaults Mode for Classes<a class="headerlink" href="#getting-the-defaults-mode-for-classes" title="Permalink to this headline">¶</a></h4>
<p>This function returns the current defaults mode used when classes are
defined (convenience or conservation).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">class</span><span class="o">-</span><span class="n">defaults</span><span class="o">-</span><span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-allowed-values-for-a-slot-1">
<span id="id5"></span><h4>12.16.1.27 Getting the Allowed Values for a Slot<a class="headerlink" href="#getting-the-allowed-values-for-a-slot-1" title="Permalink to this headline">¶</a></h4>
<p>This function groups the allowed classes for a slot (specified by the
allowed-classes facet for the slot) into a multifield variable. If the
allowed-classes facet was not specified for the slot, then the symbol
FALSE is returned. A multifield of length zero is returned if an error
occurs.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">slot</span><span class="o">-</span><span class="n">allowed</span><span class="o">-</span><span class="n">classes</span> <span class="o">&lt;</span><span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defclass A (is-a USER))</p>
<p>CLIPS&gt; (defclass B (is-a USER) (slot x))</p>
<p>CLIPS&gt; (defclass C (is-a USER) (slot y (allowed-classes A B)))</p>
<p>CLIPS&gt; (slot-allowed-classes B x)</p>
<p>FALSE</p>
<p>CLIPS&gt; (slot-allowed-classes C y)</p>
<p>(A B)</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="message-handler-functions">
<h3>12.16.2 Message-handler Functions<a class="headerlink" href="#message-handler-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="existence-of-shadowed-handlers">
<h4>12.16.2.1 Existence of Shadowed Handlers<a class="headerlink" href="#existence-of-shadowed-handlers" title="Permalink to this headline">¶</a></h4>
<p>This function returns the symbol TRUE if there is another
message-handler available for execution, FALSE otherwise. If this
function is called from an around handler and there are any shadowed
handlers (see section 9.5.3), the return value is the symbol TRUE. If
this function is called from a primary handler and there are any
shadowed primary handlers, the return value is the symbol TRUE. In any
other circumstance, the return value is the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">next</span><span class="o">-</span><span class="n">handlerp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-shadowed-handlers">
<h4>12.16.2.2 Calling Shadowed Handlers<a class="headerlink" href="#calling-shadowed-handlers" title="Permalink to this headline">¶</a></h4>
<p>If the conditions are such that the function <strong>next-handlerp</strong> would
return the symbol TRUE, then calling this function will execute the
shadowed method. Otherwise, a message execution error (see section
9.5.4) will occur. In the event of an error, the return value of this
function is the symbol FALSE, otherwise it is the return value of the
shadowed handler. The shadowed handler is passed the same arguments as
the calling handler.</p>
<p>A handler may continue execution after calling <strong>call-next-handler</strong>. In
addition, a handler may make multiple calls to <strong>call-next-handler</strong>,
and the same shadowed handler will be executed each time.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">call</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defclass A (is-a USER))</p>
<p>CLIPS&gt;</p>
<p>(defmessage-handler A print-args ($?any)</p>
<p>(printout t “A: ” ?any crlf)</p>
<p>(if (next-handlerp) then</p>
<p>(call-next-handler)))</p>
<p>CLIPS&gt;</p>
<p>(defmessage-handler USER print-args ($?any)</p>
<p>(printout t “USER: ” ?any crlf))</p>
<p>CLIPS&gt; (make-instance a of A)</p>
<p>[a]</p>
<p>CLIPS&gt; (send [a] print-args 1 2 3 4)</p>
<p>A: (1 2 3 4)</p>
<p>USER: (1 2 3 4)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="calling-shadowed-handlers-with-different-arguments">
<h4>12.16.2.3 Calling Shadowed Handlers with Different Arguments<a class="headerlink" href="#calling-shadowed-handlers-with-different-arguments" title="Permalink to this headline">¶</a></h4>
<p>This function is identical to <strong>call-next-handler</strong> except that this
function can change the arguments passed to the shadowed handler.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">override</span><span class="o">-</span><span class="nb">next</span><span class="o">-</span><span class="n">handler</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (defclass A (is-a USER))</p>
<p>CLIPS&gt;</p>
<p>(defmessage-handler A print-args ($?any)</p>
<p>(printout t “A: ” ?any crlf)</p>
<p>(if (next-handlerp) then</p>
<p>(override-next-handler (rest$ ?any))))</p>
<p>CLIPS&gt;</p>
<p>(defmessage-handler USER print-args ($?any)</p>
<p>(printout t “USER: ” ?any crlf))</p>
<p>CLIPS&gt; (make-instance a of A)</p>
<p>[a]</p>
<p>CLIPS&gt; (send [a] print-args 1 2 3 4)</p>
<p>A: (1 2 3 4)</p>
<p>USER: (2 3 4)</p>
<p>CLIPS&gt;</p>
</div>
</div>
<div class="section" id="definstances-functions">
<h3>12.16.3 Definstances Functions<a class="headerlink" href="#definstances-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="getting-the-list-of-definstances">
<h4>12.16.3.1 Getting the List of Definstances<a class="headerlink" href="#getting-the-list-of-definstances" title="Permalink to this headline">¶</a></h4>
<p>The function <strong>get-definstances-list</strong> returns a multifield value
containing the names of all definstances constructs visible to the
module specified by &lt;module-name&gt; or to the current module if none is
specified. If * is specified as the module name, then all definstances
are returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">definstances</span><span class="o">-</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">])</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-definstances-list)</p>
<p>(initial-object)</p>
<p>CLIPS&gt; (definstances foo)</p>
<p>CLIPS&gt; (definstances bar)</p>
<p>CLIPS&gt; (get-definstances-list)</p>
<p>(initial-object foo bar)</p>
<p>CLIPS&gt;&gt;</p>
</div>
<div class="section" id="determining-the-module-in-which-a-definstances-is-defined">
<h4>12.16.3.2 Determining the Module in which a Definstances is Defined<a class="headerlink" href="#determining-the-module-in-which-a-definstances-is-defined" title="Permalink to this headline">¶</a></h4>
<p>This function returns the module in which the specified definstances
name is defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">definstances</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">definstances</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="instance-manipulation-functions-and-actions">
<h3>12.16.4 Instance Manipulation Functions and Actions<a class="headerlink" href="#instance-manipulation-functions-and-actions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="initializing-an-instance">
<h4>12.16.4.1 Initializing an Instance<a class="headerlink" href="#initializing-an-instance" title="Permalink to this headline">¶</a></h4>
<p>This function implements the init message-handler attached to the class
USER (see section 9.4.5.1). This function evaluates and places slot
expressions given by the class definition that were not specified by
slot-overrides in the call to <strong>make-instance</strong> or
<strong>initialize-instance</strong> (see section 9.6.1). This function should never
be called directly unless an init message-handler is being defined such
that the one attached to USER will never be called. However, such a
definition is unusual and recommended only to advanced users. A
user-defined class which does not inherit indirectly or directly from
the class USER will require an init message-handler which calls this
function in order for instances of the class to be created. If this
function is called from an init message within the context of a
<strong>make-instance</strong> or <strong>initialize-instance</strong> call and there are no
errors in evaluating the class defaults, this function will return the
address of the instance it is initializing. Otherwise, this function
will return the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">init</span><span class="o">-</span><span class="n">slots</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-an-instance">
<h4>12.16.4.2 Deleting an Instance<a class="headerlink" href="#deleting-an-instance" title="Permalink to this headline">¶</a></h4>
<p>This function deletes the specified instances by sending them a
<strong>delete</strong> message. The argument can be one or more instance-names,
instance-addresses, or symbols (an instance-name without enclosing
brackets). The instance specified by the arguments must exist (except in
the case of ?*?). If ?*? is specified for the instance, all instances
will be sent the <strong>delete</strong> message (unless there is an instance named
?*?). This function returns the symbol TRUE if all instances were
successfully deleted, otherwise it returns the symbol FALSE. Note, this
function is exactly equivalent to sending the instance(s) the <strong>delete</strong>
message directly and is provided only as an intuitive counterpart to the
function <strong>retract</strong> for facts.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">unmake</span><span class="o">-</span><span class="n">instance</span> <span class="o">&lt;</span><span class="n">instance</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;+</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-the-active-instance-from-a-handler">
<h4>12.16.4.3 Deleting the Active Instance from a Handler<a class="headerlink" href="#deleting-the-active-instance-from-a-handler" title="Permalink to this headline">¶</a></h4>
<p>This function operates implicitly on the active instance (see section
9.4.1.1) for a message, and thus can only be called from within the body
of a message-handler. This function directly deletes the active instance
and is the one used to implement the delete handler attached to class
USER (see section 9.4.5.2). This function returns the symbol TRUE if the
instance was successfully deleted, otherwise the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">delete</span><span class="o">-</span><span class="n">instance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="determining-the-class-of-an-object">
<h4>12.16.4.4 Determining the Class of an Object<a class="headerlink" href="#determining-the-class-of-an-object" title="Permalink to this headline">¶</a></h4>
<p>This function returns a symbol which is the name of the class of its
argument. It returns the symbol FALSE on errors. This function is
equivalent to the <strong>type</strong> function (see section 12.15.4).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(class &lt;object-expression&gt;)
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (class 34)</p>
<p>INTEGER</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="determining-the-name-of-an-instance">
<h4>12.16.4.5 Determining the Name of an Instance<a class="headerlink" href="#determining-the-name-of-an-instance" title="Permalink to this headline">¶</a></h4>
<p>This function returns a symbol which is the name of its instance
argument. It returns the symbol FALSE on errors. The evaluation of the
argument must be an instance-name or instance-address of an existing
instance.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instance</span><span class="o">-</span><span class="n">name</span> <span class="o">&lt;</span><span class="n">instance</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="determining-the-address-of-an-instance">
<h4>12.16.4.6 Determining the Address of an Instance<a class="headerlink" href="#determining-the-address-of-an-instance" title="Permalink to this headline">¶</a></h4>
<p>This function returns the address of its instance argument. It returns
the symbol FALSE on errors. The evaluation of &lt;instance expression&gt; must
be an instance-name or instance-address of an existing instance. If
&lt;module&gt; or * is not specified, the function searches only in the
current module. If * is specified, the current module and imported
modules are recursively searched. If &lt;module&gt; is specified, only that
module is searched. The :: syntax cannot be used with the instance-name
if &lt;module&gt; or * is specified.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instance</span><span class="o">-</span><span class="n">address</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span> \<span class="o">|</span> \<span class="o">*</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">instance</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-a-symbol-to-an-instance-name">
<h4>12.16.4.7 Converting a Symbol to an Instance-Name<a class="headerlink" href="#converting-a-symbol-to-an-instance-name" title="Permalink to this headline">¶</a></h4>
<p>This function returns an instance-name which is equivalent to its symbol
argument. It returns the symbol FALSE on errors.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">symbol</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">name</span> <span class="o">&lt;</span><span class="n">symbol</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (symbol-to-instance-name (sym-cat abc def))</p>
<p>[abcdef]</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="converting-an-instance-name-to-a-symbol">
<h4>12.16.4.8 Converting an Instance-Name to a Symbol<a class="headerlink" href="#converting-an-instance-name-to-a-symbol" title="Permalink to this headline">¶</a></h4>
<p>This function returns a symbol which is equivalent to its instance-name
argument. It returns the symbol FALSE on errors.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instance</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">symbol</span> <span class="o">&lt;</span><span class="n">instance</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (instance-name-to-symbol [a])</p>
<p>a</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="predicate-functions-1">
<span id="id6"></span><h4>12.16.4.9 Predicate Functions<a class="headerlink" href="#predicate-functions-1" title="Permalink to this headline">¶</a></h4>
<div class="section" id="testing-for-an-instance">
<h5>12.16.4.9.1 Testing for an Instance<a class="headerlink" href="#testing-for-an-instance" title="Permalink to this headline">¶</a></h5>
<p>This function returns the symbol TRUE if the evaluation of its argument
is an instance-address or an instance-name. Otherwise, it returns the
symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instancep</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-an-instance-address">
<h5>12.16.4.9.2 Testing for an Instance-Address<a class="headerlink" href="#testing-for-an-instance-address" title="Permalink to this headline">¶</a></h5>
<p>This function returns the symbol TRUE if the evaluation of its argument
is an instance-address. Otherwise, it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instance</span><span class="o">-</span><span class="n">addressp</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-an-instance-name">
<h5>12.16.4.9.3 Testing for an Instance-Name<a class="headerlink" href="#testing-for-an-instance-name" title="Permalink to this headline">¶</a></h5>
<p>This function returns the symbol TRUE if the evaluation of its argument
is an instance-name. Otherwise, it returns the symbol FALSE.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instance</span><span class="o">-</span><span class="n">namep</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-for-the-existence-an-instance">
<h5>12.16.4.9.4 Testing for the Existence an Instance<a class="headerlink" href="#testing-for-the-existence-an-instance" title="Permalink to this headline">¶</a></h5>
<p>This function returns the symbol TRUE if the specified instance exists.
Otherwise, it returns the symbol FALSE. If the argument is an
instance-name, the function determines if an instance of the specified
name exists. If the argument is an instance-address, the function
determines if the specified address is still valid.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">instance</span><span class="o">-</span><span class="n">existp</span> <span class="o">&lt;</span><span class="n">instance</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reading-a-slot-value">
<h4>12.16.4.10 Reading a Slot Value<a class="headerlink" href="#reading-a-slot-value" title="Permalink to this headline">¶</a></h4>
<p>This function returns the value of the specified slot of the active
instance (see section 9.4.1.1). If the slot does not exist, the slot
does not have a value or this function is called from outside a
message-handler, this function will return the symbol FALSE and an error
will be generated. This function differs from the ?self:&lt;slot-name&gt;
syntax in that the slot is not looked up until the function is actually
called. Thus it is possible to access different slots every time the
function is executed (see section 9.4.2 for more detail). This function
bypasses message-passing.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">dynamic</span><span class="o">-</span><span class="n">get</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-a-slot-value">
<h4>12.16.4.11 Setting a Slot Value<a class="headerlink" href="#setting-a-slot-value" title="Permalink to this headline">¶</a></h4>
<p>This function sets the value of the specified slot of the active
instance (see section 9.4.1.1). If the slot does not exist, there is an
error in evaluating the arguments to be placed or this function is
called from outside a message-handler, this function will return the
symbol FALSE and an error will be generated. Otherwise, the new slot
value is returned. This function differs from the (bind
?self:&lt;slot-name&gt; &lt;value&gt;*) syntax in that the slot is not looked up
until the function is actually called. Thus it is possible to access
different slots every time the function is executed (see section 9.4.2
for more detail). This function bypasses message-passing.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">dynamic</span><span class="o">-</span><span class="n">put</span> <span class="o">&lt;</span><span class="n">slot</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;*</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="multifield-slot-functions">
<h4>12.16.4.12 Multifield Slot Functions<a class="headerlink" href="#multifield-slot-functions" title="Permalink to this headline">¶</a></h4>
<p>The following functions allow convenient manipulation of multifield
slots. There are three types of functions: replacing a range of fields
with one or more new values, inserting one or more new values at an
arbitrary point, and deleting a range of fields. For each type, there
are two forms of functions: an external interface which sets the new
value for the multifield slot with a put- message (see section 9.3.3.9),
and an internal interface that can only be called from message-handlers
which sets the slot for the active instance (see section 9.4.1.1)
directly. Both forms read the original value of the slot directly
without the use of a get- message. All of these functions return the new
slot value on success and the symbol FALSE on errors.</p>
<div class="section" id="replacing-fields">
<h5>12.16.4.12.1 Replacing Fields<a class="headerlink" href="#replacing-fields" title="Permalink to this headline">¶</a></h5>
<p>Allows the replacement of a range of fields in a multifield slot value
with one or more new values. The range indices must be from 1..n, where
n is the number of fields in the multifield slot?s original value and n
&gt; 0.</p>
<p>External Interface Syntax</p>
<p>(slot-replace$ &lt;instance-expression&gt; &lt;mv-slot-name&gt;</p>
<p>&lt;range-begin&gt; &lt;range-end&gt; &lt;expression&gt;+)</p>
<p>Internal Interface Syntax</p>
<p>(slot-direct-replace$ &lt;mv-slot-name&gt;</p>
<p>&lt;range-begin&gt; &lt;range-end&gt; &lt;expression&gt;+)</p>
<p>Example</p>
<p>CLIPS&gt;</p>
<p>(defclass A (is-a USER)</p>
<p>(multislot mfs (default a b c d e)))</p>
<p>CLIPS&gt; (make-instance a of A)</p>
<p>[a]</p>
<p>CLIPS&gt; (slot-replace$ a mfs 2 4 2 3 4)</p>
<p>(a 2 3 4 e)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="inserting-fields">
<h5>12.16.4.12.2 Inserting Fields<a class="headerlink" href="#inserting-fields" title="Permalink to this headline">¶</a></h5>
<p>Allows the insertion of one or more new values in a multifield slot
value before a specified field index. The index must greater than or
equal to 1. A value of 1 inserts the new value(s) at the beginning of
the slot?s value. Any value greater than the length of the slot?s value
appends the new values to the end of the slot?s value.</p>
<p>External Interface Syntax</p>
<p>(slot-insert$ &lt;instance-expression&gt; &lt;mv-slot-name&gt;</p>
<p>&lt;index&gt; &lt;expression&gt;+)</p>
<p>Internal Interface Syntax</p>
<p>(slot-direct-insert$ &lt;mv-slot-name&gt; &lt;index&gt; &lt;expression&gt;+)</p>
<p>Example</p>
<p>CLIPS&gt; (initialize-instance a)</p>
<p>[a]</p>
<p>CLIPS&gt; (slot-insert$ a mfs 2 4 2 3 4)</p>
<p>(a 4 2 3 4 b c d e)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="deleting-fields">
<h5>12.16.4.12.3 Deleting Fields<a class="headerlink" href="#deleting-fields" title="Permalink to this headline">¶</a></h5>
<p>Allows the deletion of a range of fields in a multifield slot value. The
range indices must be from 1..n, where n is the number of fields in the
multifield slot?s original value and n &gt; 0.</p>
<p>External Interface Syntax</p>
<p>(slot-delete$ &lt;instance-expression&gt; &lt;mv-slot-name&gt;</p>
<p>&lt;range-begin&gt; &lt;range-end&gt;)</p>
<p>Internal Interface Syntax</p>
<p>(slot-direct-delete$ &lt;mv-slot-name&gt; &lt;range-begin&gt; &lt;range-end&gt;)</p>
<p>Example</p>
<p>CLIPS&gt; (initialize-instance a)</p>
<p>[a]</p>
<p>CLIPS&gt; (slot-delete$ a mfs 2 4)</p>
<p>(a e)</p>
<p>CLIPS&gt;</p>
</div>
</div>
</div>
</div>
<div class="section" id="defmodule-functions">
<h2>12.17 Defmodule Functions<a class="headerlink" href="#defmodule-functions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide ancillary capabilities for the defmodule
construct.</p>
<div class="section" id="getting-the-list-of-defmodules">
<h3>12.17.1 Getting the List of Defmodules<a class="headerlink" href="#getting-the-list-of-defmodules" title="Permalink to this headline">¶</a></h3>
<p>The function <strong>get-defmodule-list</strong> returns a multifield value
containing the names of all defmodules that are currently defined.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">defmodule</span><span class="o">-</span><span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<p>Example</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (get-defmodule-list)</p>
<p>(MAIN)</p>
<p>CLIPS&gt; (defmodule A)</p>
<p>CLIPS&gt; (defmodule B)</p>
<p>CLIPS&gt; (get-defmodule-list)</p>
<p>(MAIN A B)</p>
<p>CLIPS&gt;</p>
</div>
<div class="section" id="setting-the-current-module">
<h3>12.17.2 Setting the Current Module<a class="headerlink" href="#setting-the-current-module" title="Permalink to this headline">¶</a></h3>
<p>This function sets the current module. It returns the name of the
previous current module. If an invalid module name is given, then the
current module is not changed and the name of the current module is
returned.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">set</span><span class="o">-</span><span class="n">current</span><span class="o">-</span><span class="n">module</span> <span class="o">&lt;</span><span class="n">defmodule</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-current-module">
<h3>12.17.3 Getting the Current Module<a class="headerlink" href="#getting-the-current-module" title="Permalink to this headline">¶</a></h3>
<p>This function returns the name of the current module.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">current</span><span class="o">-</span><span class="n">module</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sequence-expansion">
<h2>12.18 Sequence Expansion<a class="headerlink" href="#sequence-expansion" title="Permalink to this headline">¶</a></h2>
<p>By default, there is no distinction between single-field and multifield
variable references within function calls (as opposed to declaring
variables for function parameters or variables used for
pattern-matching). For example:</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt;</p>
<p>(defrule expansion</p>
<p>(foo $?b)</p>
<p>=&gt;</p>
<p>(printout t ?b crlf)</p>
<p>(printout t $?b crlf))</p>
<p>CLIPS&gt; (assert (foo a b c))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (run)</p>
<p>(a b c)</p>
<p>(a b c)</p>
<p>CLIPS&gt;</p>
<p>Note that both printout statements in the rule produce identical output
when the rule executes. The use of ?b and $?b within the function call
behave identically.</p>
<p>Multifield variable references within function calls, however, can
optionally be expanded into multiple single field arguments. The $ acts
as a ?sequence expansion? operator and has special meaning when applied
to a global or local variable reference within the argument list of a
function call. The $ means to take the fields of the multifield value
referenced by the variable and treat them as separate arguments to the
function as opposed to passing a single multifield value argument.</p>
<p>For example, using sequence expansion with the <em>expansion</em> rule would
give the following output:</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (set-sequence-operator-recognition TRUE)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
<p>(defrule expansion</p>
<p>(foo $?b)</p>
<p>=&gt;</p>
<p>(printout t ?b crlf)</p>
<p>(printout t $?b crlf))</p>
<p>CLIPS&gt; (assert (foo a b c))</p>
<p>&lt;Fact-1&gt;</p>
<p>CLIPS&gt; (run)</p>
<p>(a b c)</p>
<p>abc</p>
<p>CLIPS&gt; (set-sequence-operator-recognition FALSE)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
<p>Using sequence expansion, the two printout statements on the RHS of the
expansion rule are equivalent to:</p>
<p>(printout t (create$ a b c) crlf)</p>
<p>(printout t a b c crlf)</p>
<p>The $ operator also works with global variables. For example:</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (set-sequence-operator-recognition TRUE)</p>
<p>FALSE</p>
<p>CLIPS&gt; (defglobal ?*x* = (create$ 3 4 5))</p>
<p>CLIPS&gt; (+ ?*x*)</p>
<p>[ARGACCES4] Function + expected at least 2 argument(s)</p>
<p>CLIPS&gt; (+ $?*x*)</p>
<p>12</p>
<p>CLIPS&gt; (set-sequence-operator-recognition FALSE)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
<p>The sequence expansion operator is particularly useful for generic
function methods. Consider the ease now of defining a general addition
function for strings.</p>
<p>(defmethod + (($?any STRING))</p>
<p>(str-cat $?any))</p>
<p>By default, sequence expansion is disabled. This allows previously
existing CLIPS programs to work correctly with version 6.0 of CLIPS. The
behavior can be enabled using the <strong>set-sequence-operator-recognition</strong>
function described in section 12.18.3. Old CLIPS code should be changed
so that it works properly with sequence expansion enabled.</p>
<div class="section" id="sequence-expansion-and-rules">
<h3>12.18.1 Sequence Expansion and Rules<a class="headerlink" href="#sequence-expansion-and-rules" title="Permalink to this headline">¶</a></h3>
<p>Sequence expansion is allowed on the LHS of rules, but only within
function calls. If a variable is specified in a pattern as a single or
multifield variable, then all other references to that variable that are
not within function calls must also be the same. For example, the
following rule is not allowed</p>
<p>(defrule bad-rule-1</p>
<p>(pattern $?x ?x $?x)</p>
<p>=&gt;)</p>
<p>The following rules illustrate appropriate use of sequence expansion on
the LHS of rules.</p>
<p>(defrule good-rule-1</p>
<p>(pattern $?x&amp;:(&gt; (length$ ?x) 1))</p>
<p>(another-pattern $?y&amp;:(&gt; (length$ ?y) 1))</p>
<p>(test (&gt; (+ $?x) (+ $?y)))</p>
<p>=&gt;)</p>
<p>The first and second patterns use the length$ function to determine that
the multifields bound to ?x and ?y are greater than 1. Sequence
expansion is not used to pass ?x and ?y to the length$ function since
the length$ function expects a single argument of type multifield. The
test CE calls the + function to determine the sum of the values bound to
?x and ?y. Sequence expansion is used for these function calls since the
+ function expects two or more arguments with numeric data values.</p>
<p>Sequence expansion has no affect within an <strong>assert</strong>, <strong>modify</strong>, or
<strong>duplicate</strong>; however, it can be used with other functions on the RHS
of a rule.</p>
</div>
<div class="section" id="multifield-expansion-function">
<h3>12.18.2 Multifield Expansion Function<a class="headerlink" href="#multifield-expansion-function" title="Permalink to this headline">¶</a></h3>
<p>The $ operator is merely a shorthand notation for the <strong>expand$</strong>
function call. For example, the function calls</p>
<p>(printout t $?b crlf)</p>
<p>and</p>
<p>(printout t (expand$ ?b) crlf)</p>
<p>are identical.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(expand$ &lt;multifield-expression&gt;)
</pre></div>
</div>
<p>The <strong>expand$</strong> function is valid only within the argument list of a
function call. The <strong>expand$</strong> function (and hence sequence expansion)
cannot be used as an argument to the following functions: <strong>expand$</strong>,
<strong>return</strong>, <strong>progn</strong>, <strong>while</strong>, <strong>if</strong>, <strong>progn$</strong>, <strong>foreach</strong>,
<strong>switch</strong>, <strong>loop-for-count</strong>, <strong>assert</strong>, <strong>modify</strong>, <strong>duplicate</strong>
and <strong>object-pattern-match-delay</strong>.</p>
</div>
<div class="section" id="setting-the-sequence-operator-recognition-behavior">
<h3>12.18.3 Setting The Sequence Operator Recognition Behavior<a class="headerlink" href="#setting-the-sequence-operator-recognition-behavior" title="Permalink to this headline">¶</a></h3>
<p>This function sets the sequence operator recognition behavior. When this
behavior is disabled (FALSE by default), multifield variables found in
function calls are treated as a single argument. When this behaviour is
enabled, multifield variables are expanded and passed as separate
arguments in the function call. This behavior should be set <em>before</em> an
expression references a multifield variable is encountered (i.e.
changing the behavior does not retroactively change the behavior for
previously encountered expressions). The return value for this function
is the old value for the behavior.</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">set</span><span class="o">-</span><span class="n">sequence</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="n">recognition</span> <span class="o">&lt;</span><span class="n">boolean</span><span class="o">-</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-sequence-operator-recognition-behavior">
<h3>12.18.4 Getting The Sequence Operator Recognition Behavior<a class="headerlink" href="#getting-the-sequence-operator-recognition-behavior" title="Permalink to this headline">¶</a></h3>
<p>This function returns the current value of the sequence operator
recognition behavior (TRUE or FALSE).</p>
<p><code class="docutils literal notranslate"><span class="pre">Syntax</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">sequence</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="n">recognition</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="sequence-operator-caveat">
<h3>12.18.5 Sequence Operator Caveat<a class="headerlink" href="#sequence-operator-caveat" title="Permalink to this headline">¶</a></h3>
<p>CLIPS normally tries to detect as many constraint errors as possible for
a function call at parse time, such as bad number of arguments or types.
However, if the sequence expansion operator is used in the function
call, all such checking is delayed until run-time (because the number
and types of arguments can change for each execution of the call.) For
example:</p>
<p>CLIPS&gt; (clear)</p>
<p>CLIPS&gt; (set-sequence-operator-recognition TRUE)</p>
<p>FALSE</p>
<p>CLIPS&gt; (deffunction foo (?a ?b))</p>
<p>CLIPS&gt; (deffunction bar ($?a) (foo ?a))</p>
<p>[ARGACCES4] Function foo expected exactly 2 argument(s)</p>
<p>ERROR:</p>
<p>(deffunction MAIN::bar</p>
<p>($?a)</p>
<p>(foo ?a)</p>
<p>CLIPS&gt; (deffunction bar ($?a) (foo $?a))</p>
<p>CLIPS&gt; (bar 1)</p>
<p>[ARGACCES4] Function foo expected exactly 2 argument(s)</p>
<p>[PRCCODE4] Execution halted during the actions of deffunction bar.</p>
<p>FALSE</p>
<p>CLIPS&gt; (bar 1 2)</p>
<p>FALSE</p>
<p>CLIPS&gt; (set-sequence-operator-recognition FALSE)</p>
<p>TRUE</p>
<p>CLIPS&gt;</p>
<p>Section 13:
Commands
===========</p>
<p>This section describes commands primarily intended for use from the
top-level command prompt. These commands may also be used from
constructs and other places where functions can be used.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Section 12: Actions And Functions</a><ul>
<li><a class="reference internal" href="#predicate-functions">12.1 Predicate Functions</a><ul>
<li><a class="reference internal" href="#testing-for-numbers">12.1.1 Testing For Numbers</a></li>
<li><a class="reference internal" href="#testing-for-floats">12.1.2 Testing For Floats</a></li>
<li><a class="reference internal" href="#testing-for-integers">12.1.3 Testing For Integers</a></li>
<li><a class="reference internal" href="#testing-for-strings-or-symbols">12.1.4 Testing For Strings Or Symbols</a></li>
<li><a class="reference internal" href="#testing-for-strings">12.1.5 Testing For Strings</a></li>
<li><a class="reference internal" href="#testing-for-symbols">12.1.6 Testing For Symbols</a></li>
<li><a class="reference internal" href="#testing-for-even-numbers">12.1.7 Testing For Even Numbers</a></li>
<li><a class="reference internal" href="#testing-for-odd-numbers">12.1.8 Testing For Odd Numbers</a></li>
<li><a class="reference internal" href="#testing-for-multifield-values">12.1.9 Testing For Multifield Values</a></li>
<li><a class="reference internal" href="#testing-for-external-addresses">12.1.10 Testing For External-Addresses</a></li>
<li><a class="reference internal" href="#comparing-for-equality">12.1.11 Comparing for Equality</a></li>
<li><a class="reference internal" href="#comparing-for-inequality">12.1.12 Comparing for Inequality</a></li>
<li><a class="reference internal" href="#comparing-numbers-for-equality">12.1.13 Comparing Numbers for Equality</a></li>
<li><a class="reference internal" href="#comparing-numbers-for-inequality">12.1.14 Comparing Numbers for Inequality</a></li>
<li><a class="reference internal" href="#greater-than-comparison">12.1.15 Greater Than Comparison</a></li>
<li><a class="reference internal" href="#greater-than-or-equal-comparison">12.1.16 Greater Than or Equal Comparison</a></li>
<li><a class="reference internal" href="#less-than-comparison">12.1.17 Less Than Comparison</a></li>
<li><a class="reference internal" href="#less-than-or-equal-comparison">12.1.18 Less Than or Equal Comparison</a></li>
<li><a class="reference internal" href="#boolean-and">12.1.19 Boolean And</a></li>
<li><a class="reference internal" href="#boolean-or">12.1.20 Boolean Or</a></li>
<li><a class="reference internal" href="#boolean-not">12.1.21 Boolean Not</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multifield-functions">12.2 Multifield Functions</a><ul>
<li><a class="reference internal" href="#creating-multifield-values">12.2.1 Creating Multifield Values</a></li>
<li><a class="reference internal" href="#specifying-an-element">12.2.2 Specifying an Element</a></li>
<li><a class="reference internal" href="#finding-an-element">12.2.3 Finding an Element</a></li>
<li><a class="reference internal" href="#comparing-multifield-values">12.2.4 Comparing Multifield Values</a></li>
<li><a class="reference internal" href="#deletion-of-fields-in-multifield-values">12.2.5 Deletion of Fields in Multifield Values</a></li>
<li><a class="reference internal" href="#creating-multifield-values-from-strings">12.2.6 Creating Multifield Values from Strings.</a></li>
<li><a class="reference internal" href="#creating-strings-from-multifield-values">12.2.7 Creating Strings from Multifield Values</a></li>
<li><a class="reference internal" href="#extracting-a-sub-sequence-from-a-multifield-value">12.2.8 Extracting a Sub-sequence from a Multifield Value</a></li>
<li><a class="reference internal" href="#replacing-fields-within-a-multifield-value">12.2.9 Replacing Fields within a Multifield Value</a></li>
<li><a class="reference internal" href="#inserting-fields-within-a-multifield-value">12.2.10 Inserting Fields within a Multifield Value</a></li>
<li><a class="reference internal" href="#getting-the-first-field-from-a-multifield-value">12.2.11 Getting the First Field from a Multifield Value</a></li>
<li><a class="reference internal" href="#getting-all-but-the-first-field-from-a-multifield-value">12.2.12 Getting All but the First Field from a Multifield Value</a></li>
<li><a class="reference internal" href="#determining-the-number-of-fields-in-a-multifield-value">12.2.13 Determining the Number of Fields in a Multifield Value</a></li>
<li><a class="reference internal" href="#deleting-specific-values-within-a-multifield-value">12.2.14 Deleting Specific Values within a Multifield Value</a></li>
<li><a class="reference internal" href="#replacing-specific-values-within-a-multifield-value">12.2.15 Replacing Specific Values within a Multifield Value</a></li>
</ul>
</li>
<li><a class="reference internal" href="#string-functions">12.3 String Functions</a><ul>
<li><a class="reference internal" href="#string-concatenation">12.3.1 String Concatenation</a></li>
<li><a class="reference internal" href="#symbol-concatenation">12.3.2 Symbol Concatenation</a></li>
<li><a class="reference internal" href="#taking-a-string-apart">12.3.3 Taking a String Apart</a></li>
<li><a class="reference internal" href="#searching-a-string">12.3.4 Searching a String</a></li>
<li><a class="reference internal" href="#evaluating-a-function-within-a-string">12.3.5 Evaluating a Function within a String</a></li>
<li><a class="reference internal" href="#evaluating-a-construct-within-a-string">12.3.6 Evaluating a Construct within a String</a></li>
<li><a class="reference internal" href="#converting-a-string-to-uppercase">12.3.7 Converting a String to Uppercase</a></li>
<li><a class="reference internal" href="#converting-a-string-to-lowercase">12.3.8 Converting a String to Lowercase</a></li>
<li><a class="reference internal" href="#comparing-two-strings">12.3.9 Comparing Two Strings</a></li>
<li><a class="reference internal" href="#determining-the-length-of-a-string">12.3.10 Determining the Length of a String</a></li>
<li><a class="reference internal" href="#checking-the-syntax-of-a-construct-or-function-call-within-a-string">12.3.11 Checking the Syntax of a Construct or Function Call within a String</a></li>
<li><a class="reference internal" href="#converting-a-string-to-a-field">12.3.12 Converting a String to a Field</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-clips-i-o-system">12.4 The CLIPS I/O System</a><ul>
<li><a class="reference internal" href="#logical-names">12.4.1 Logical Names</a></li>
<li><a class="reference internal" href="#common-i-o-functions">12.4.2 Common I/O Functions</a><ul>
<li><a class="reference internal" href="#open">12.4.2.1 Open</a></li>
<li><a class="reference internal" href="#close">12.4.2.2 Close</a></li>
<li><a class="reference internal" href="#printout">12.4.2.3 Printout</a></li>
<li><a class="reference internal" href="#read">12.4.2.4 Read</a></li>
<li><a class="reference internal" href="#readline">12.4.2.5 Readline</a></li>
<li><a class="reference internal" href="#format">12.4.2.6 Format</a></li>
<li><a class="reference internal" href="#rename">12.4.2.7 Rename</a></li>
<li><a class="reference internal" href="#remove">12.4.2.8 Remove</a></li>
<li><a class="reference internal" href="#get-character">12.4.2.9 Get Character</a></li>
<li><a class="reference internal" href="#read-number">12.4.2.10 Read Number</a></li>
<li><a class="reference internal" href="#set-locale">12.4.2.11 Set Locale</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#math-functions">12.5 Math Functions</a><ul>
<li><a class="reference internal" href="#standard-math-functions">12.5.1 Standard Math Functions</a><ul>
<li><a class="reference internal" href="#addition">12.5.1.1 Addition</a></li>
<li><a class="reference internal" href="#subtraction">12.5.1.2 Subtraction</a></li>
<li><a class="reference internal" href="#multiplication">12.5.1.3 Multiplication</a></li>
<li><a class="reference internal" href="#division">12.5.1.4 Division</a></li>
<li><a class="reference internal" href="#integer-division">12.5.1.5 Integer Division</a></li>
<li><a class="reference internal" href="#maximum-numeric-value">12.5.1.6 Maximum Numeric Value</a></li>
<li><a class="reference internal" href="#minimum-numeric-value">12.5.1.7 Minimum Numeric Value</a></li>
<li><a class="reference internal" href="#absolute-value">12.5.1.8 Absolute Value</a></li>
<li><a class="reference internal" href="#convert-to-float">12.5.1.9 Convert To Float</a></li>
<li><a class="reference internal" href="#convert-to-integer">12.5.1.10 Convert To Integer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extended-math-functions">12.5.2 Extended Math Functions</a><ul>
<li><a class="reference internal" href="#trigonometric-functions">12.5.2.1 Trigonometric Functions</a></li>
<li><a class="reference internal" href="#convert-from-degrees-to-grads">12.5.2.2 Convert From Degrees to Grads</a></li>
<li><a class="reference internal" href="#convert-from-degrees-to-radians">12.5.2.3 Convert From Degrees to Radians</a></li>
<li><a class="reference internal" href="#convert-from-grads-to-degrees">12.5.2.4 Convert From Grads to Degrees</a></li>
<li><a class="reference internal" href="#convert-from-radians-to-degrees">12.5.2.5 Convert From Radians to Degrees</a></li>
<li><a class="reference internal" href="#return-the-value-of-p">12.5.2.6 Return the Value of p</a></li>
<li><a class="reference internal" href="#square-root">12.5.2.7 Square Root</a></li>
<li><a class="reference internal" href="#power">12.5.2.8 Power</a></li>
<li><a class="reference internal" href="#exponential">12.5.2.9 Exponential</a></li>
<li><a class="reference internal" href="#logarithm">12.5.2.10 Logarithm</a></li>
<li><a class="reference internal" href="#logarithm-base-10">12.5.2.11 Logarithm Base 10</a></li>
<li><a class="reference internal" href="#round">12.5.2.12 Round</a></li>
<li><a class="reference internal" href="#modulus">12.5.2.13 Modulus</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#procedural-functions">12.6 Procedural Functions</a><ul>
<li><a class="reference internal" href="#binding-variables">12.6.1 Binding Variables</a></li>
<li><a class="reference internal" href="#if-then-else-function">12.6.2 If…then…else Function</a></li>
<li><a class="reference internal" href="#while">12.6.3 While</a></li>
<li><a class="reference internal" href="#loop-for-count">12.6.4 Loop-for-count</a></li>
<li><a class="reference internal" href="#progn">12.6.5 Progn</a></li>
<li><a class="reference internal" href="#progn-1">12.6.6 Progn$</a></li>
<li><a class="reference internal" href="#return">12.6.7 Return</a></li>
<li><a class="reference internal" href="#break">12.6.8 Break</a></li>
<li><a class="reference internal" href="#switch">12.6.9 Switch</a></li>
<li><a class="reference internal" href="#foreach">12.6.10 Foreach</a></li>
</ul>
</li>
<li><a class="reference internal" href="#miscellaneous-functions">12.7 Miscellaneous Functions</a><ul>
<li><a class="reference internal" href="#gensym">12.7.1 Gensym</a></li>
<li><a class="reference internal" href="#gensym-1">12.7.2 Gensym*</a></li>
<li><a class="reference internal" href="#setgen">12.7.3 Setgen</a></li>
<li><a class="reference internal" href="#random">12.7.4 Random</a></li>
<li><a class="reference internal" href="#seed">12.7.5 Seed</a></li>
<li><a class="reference internal" href="#time">12.7.6 Time</a></li>
<li><a class="reference internal" href="#number-of-fields-or-characters-in-a-data-object">12.7.7 Number of Fields or Characters in a Data Object</a></li>
<li><a class="reference internal" href="#determining-the-restrictions-for-a-function">12.7.8 Determining the Restrictions for a Function</a></li>
<li><a class="reference internal" href="#sorting-a-list-of-values">12.7.9 Sorting a List of Values</a></li>
<li><a class="reference internal" href="#calling-a-function">12.7.10 Calling a Function</a></li>
<li><a class="reference internal" href="#timing-functions-and-commands">12.7.11 Timing Functions and Commands</a></li>
<li><a class="reference internal" href="#determining-the-operating-system">12.7.12 Determining the Operating System</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deftemplate-functions">12.8 Deftemplate Functions</a><ul>
<li><a class="reference internal" href="#determining-the-module-in-which-a-deftemplate-is-defined">12.8.1 Determining the Module in which a Deftemplate is Defined</a></li>
<li><a class="reference internal" href="#getting-the-allowed-values-for-a-deftemplate-slot">12.8.2 Getting the Allowed Values for a Deftemplate Slot</a></li>
<li><a class="reference internal" href="#getting-the-cardinality-for-a-deftemplate-slot">12.8.3 Getting the Cardinality for a Deftemplate Slot</a></li>
<li><a class="reference internal" href="#testing-whether-a-deftemplate-slot-has-a-default">12.8.4 Testing whether a Deftemplate Slot has a Default</a></li>
<li><a class="reference internal" href="#getting-the-default-value-for-a-deftemplate-slot">12.8.5 Getting the Default Value for a Deftemplate Slot</a></li>
<li><a class="reference internal" href="#deftemplate-slot-existence">12.8.6 Deftemplate Slot Existence</a></li>
<li><a class="reference internal" href="#testing-whether-a-deftemplate-slot-is-a-multifield-slot">12.8.7 Testing whether a Deftemplate Slot is a Multifield Slot</a></li>
<li><a class="reference internal" href="#determining-the-slot-names-associated-with-a-deftemplate">12.8.8 Determining the Slot Names Associated with a Deftemplate</a></li>
<li><a class="reference internal" href="#getting-the-numeric-range-for-a-deftemplate-slot">12.8.9 Getting the Numeric Range for a Deftemplate Slot</a></li>
<li><a class="reference internal" href="#testing-whether-a-deftemplate-slot-is-a-single-field-slot">12.8.10 Testing whether a Deftemplate Slot is a Single-Field Slot</a></li>
<li><a class="reference internal" href="#getting-the-primitive-types-for-a-deftemplate-slot">12.8.11 Getting the Primitive Types for a Deftemplate Slot</a></li>
<li><a class="reference internal" href="#getting-the-list-of-deftemplates">12.8.12 Getting the List of Deftemplates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fact-functions">12.9 Fact Functions</a><ul>
<li><a class="reference internal" href="#creating-new-facts">12.9.1 Creating New Facts</a></li>
<li><a class="reference internal" href="#removing-facts-from-the-fact-list">12.9.2 Removing Facts from the Fact-list</a></li>
<li><a class="reference internal" href="#modifying-template-facts">12.9.3 Modifying Template Facts</a></li>
<li><a class="reference internal" href="#duplicating-template-facts">12.9.4 Duplicating Template Facts</a></li>
<li><a class="reference internal" href="#asserting-a-string">12.9.5 Asserting a String</a></li>
<li><a class="reference internal" href="#getting-the-fact-index-of-a-fact-address">12.9.6 Getting the Fact-Index of a Fact-address</a></li>
<li><a class="reference internal" href="#determining-if-a-fact-exists">12.9.7 Determining If a Fact Exists</a></li>
<li><a class="reference internal" href="#determining-the-deftemplate-relation-name-associated-with-a-fact">12.9.8 Determining the Deftemplate (Relation) Name Associated with a Fact</a></li>
<li><a class="reference internal" href="#determining-the-slot-names-associated-with-a-fact">12.9.9 Determining the Slot Names Associated with a Fact</a></li>
<li><a class="reference internal" href="#retrieving-the-slot-value-of-a-fact">12.9.10 Retrieving the Slot Value of a Fact</a></li>
<li><a class="reference internal" href="#retrieving-the-fact-list">12.9.11 Retrieving the Fact-List</a></li>
<li><a class="reference internal" href="#fact-set-queries-and-distributed-actions">12.9.12 Fact-set Queries and Distributed Actions</a><ul>
<li><a class="reference internal" href="#fact-set-definition">12.9.12.1 Fact-set Definition</a></li>
<li><a class="reference internal" href="#fact-set-determination">12.9.12.2 Fact-set Determination</a></li>
<li><a class="reference internal" href="#query-definition">12.9.12.3 Query Definition</a></li>
<li><a class="reference internal" href="#distributed-action-definition">12.9.12.4 Distributed Action Definition</a></li>
<li><a class="reference internal" href="#scope-in-fact-set-query-functions">12.9.12.5 Scope in Fact-set Query Functions</a></li>
<li><a class="reference internal" href="#errors-during-fact-set-query-functions">12.9.12.6 Errors during Fact-set Query Functions</a></li>
<li><a class="reference internal" href="#halting-and-returning-values-from-query-functions">12.9.12.7 Halting and Returning Values from Query Functions</a></li>
<li><a class="reference internal" href="#fact-set-query-functions">12.9.12.8 Fact-set Query Functions</a><ul>
<li><a class="reference internal" href="#testing-if-any-fact-set-satisfies-a-query">12.9.12.8.1 Testing if Any Fact-set Satisfies a Query</a></li>
<li><a class="reference internal" href="#determining-the-first-fact-set-satisfying-a-query">12.9.12.8.2 Determining the First Fact-set Satisfying a Query</a></li>
<li><a class="reference internal" href="#determining-all-fact-sets-satisfying-a-query">12.9.12.8.3 Determining All Fact-sets Satisfying a Query</a></li>
<li><a class="reference internal" href="#executing-an-action-for-the-first-fact-set-satisfying-a-query">12.9.12.8.4 Executing an Action for the First Fact-set Satisfying a Query</a></li>
<li><a class="reference internal" href="#executing-an-action-for-all-fact-sets-satisfying-a-query">12.9.12.8.5 Executing an Action for All Fact-sets Satisfying a Query</a></li>
<li><a class="reference internal" href="#executing-a-delayed-action-for-all-fact-sets-satisfying-a-query">12.9.12.8.6 Executing a Delayed Action for All Fact-sets Satisfying a Query</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#deffacts-functions">12.10 Deffacts Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-deffacts">12.10.1 Getting the List of Deffacts</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-deffacts-is-defined">12.10.2 Determining the Module in which a Deffacts is Defined</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defrule-functions">12.11 Defrule Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-defrules">12.11.1 Getting the List of Defrules</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-defrule-is-defined">12.11.2 Determining the Module in which a Defrule is Defined</a></li>
</ul>
</li>
<li><a class="reference internal" href="#agenda-functions">12.12 Agenda Functions</a><ul>
<li><a class="reference internal" href="#getting-the-current-focus">12.12.1 Getting the Current Focus</a></li>
<li><a class="reference internal" href="#getting-the-focus-stack">12.12.2 Getting the Focus Stack</a></li>
<li><a class="reference internal" href="#removing-the-current-focus-from-the-focus-stack">12.12.3 Removing the Current Focus from the Focus Stack</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defglobal-functions">12.13 Defglobal Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-defglobals">12.13.1 Getting the List of Defglobals</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-defglobal-is-defined">12.13.2 Determining the Module in which a Defglobal is Defined</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deffunction-functions">12.14 Deffunction Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-deffunctions">12.14.1 Getting the List of Deffunctions</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-deffunction-is-defined">12.14.2 Determining the Module in which a Deffunction is Defined</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generic-function-functions">12.15 Generic Function Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-defgenerics">12.15.1 Getting the List of Defgenerics</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-generic-function-is-defined">12.15.2 Determining the Module in which a Generic Function is Defined</a></li>
<li><a class="reference internal" href="#getting-the-list-of-defmethods">12.15.3 Getting the List of Defmethods</a></li>
<li><a class="reference internal" href="#type-determination">12.15.4 Type Determination</a></li>
<li><a class="reference internal" href="#existence-of-shadowed-methods">12.15.5 Existence of Shadowed Methods</a></li>
<li><a class="reference internal" href="#calling-shadowed-methods">12.15.6 Calling Shadowed Methods</a></li>
<li><a class="reference internal" href="#calling-shadowed-methods-with-overrides">12.15.7 Calling Shadowed Methods with Overrides</a></li>
<li><a class="reference internal" href="#calling-a-specific-method">12.15.8 Calling a Specific Method</a></li>
<li><a class="reference internal" href="#getting-the-restrictions-of-defmethods">12.15.9 Getting the Restrictions of Defmethods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#clips-object-oriented-language-cool-functions">12.16 CLIPS Object-Oriented Language (COOL) Functions</a><ul>
<li><a class="reference internal" href="#class-functions">12.16.1 Class Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-defclasses">12.16.1.1 Getting the List of Defclasses</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-defclass-is-defined">12.16.1.2 Determining the Module in which a Defclass is Defined</a></li>
<li><a class="reference internal" href="#determining-if-a-class-exists">12.16.1.3 Determining if a Class Exists</a></li>
<li><a class="reference internal" href="#superclass-determination">12.16.1.4 Superclass Determination</a></li>
<li><a class="reference internal" href="#subclass-determination">12.16.1.5 Subclass Determination</a></li>
<li><a class="reference internal" href="#slot-existence">12.16.1.6 Slot Existence</a></li>
<li><a class="reference internal" href="#testing-whether-a-slot-is-writable">12.16.1.7 Testing whether a Slot is Writable</a></li>
<li><a class="reference internal" href="#testing-whether-a-slot-is-initializable">12.16.1.8 Testing whether a Slot is Initializable</a></li>
<li><a class="reference internal" href="#testing-whether-a-slot-is-public">12.16.1.9 Testing whether a Slot is Public</a></li>
<li><a class="reference internal" href="#testing-whether-a-slot-can-be-accessed-directly">12.16.1.10 Testing whether a Slot can be Accessed Directly</a></li>
<li><a class="reference internal" href="#message-handler-existence">12.16.1.11 Message-handler Existence</a></li>
<li><a class="reference internal" href="#determining-if-a-class-can-have-direct-instances">12.16.1.12 Determining if a Class can have Direct Instances</a></li>
<li><a class="reference internal" href="#determining-if-a-class-can-satisfy-object-patterns">12.16.1.13 Determining if a Class can Satisfy Object Patterns</a></li>
<li><a class="reference internal" href="#getting-the-list-of-superclasses-for-a-class">12.16.1.14 Getting the List of Superclasses for a Class</a></li>
<li><a class="reference internal" href="#getting-the-list-of-subclasses-for-a-class">12.16.1.15 Getting the List of Subclasses for a Class</a></li>
<li><a class="reference internal" href="#getting-the-list-of-slots-for-a-class">12.16.1.16 Getting the List of Slots for a Class</a></li>
<li><a class="reference internal" href="#getting-the-list-of-message-handlers-for-a-class">12.16.1.17 Getting the List of Message-Handlers for a Class</a></li>
<li><a class="reference internal" href="#getting-the-list-of-facets-for-a-slot">12.16.1.18 Getting the List of Facets for a Slot</a></li>
<li><a class="reference internal" href="#getting-the-list-of-source-classes-for-a-slot">12.16.1.19 Getting the List of Source Classes for a Slot</a></li>
<li><a class="reference internal" href="#getting-the-primitive-types-for-a-slot">12.16.1.20 Getting the Primitive Types for a Slot</a></li>
<li><a class="reference internal" href="#getting-the-cardinality-for-a-slot">12.16.1.21 Getting the Cardinality for a Slot</a></li>
<li><a class="reference internal" href="#getting-the-allowed-values-for-a-slot">12.16.1.22 Getting the Allowed Values for a Slot</a></li>
<li><a class="reference internal" href="#getting-the-numeric-range-for-a-slot">12.16.1.23 Getting the Numeric Range for a Slot</a></li>
<li><a class="reference internal" href="#getting-the-default-value-for-a-slot">12.16.1.24 Getting the Default Value for a Slot</a></li>
<li><a class="reference internal" href="#setting-the-defaults-mode-for-classes">12.16.1.25 Setting the Defaults Mode for Classes</a></li>
<li><a class="reference internal" href="#getting-the-defaults-mode-for-classes">12.16.1.26 Getting the Defaults Mode for Classes</a></li>
<li><a class="reference internal" href="#getting-the-allowed-values-for-a-slot-1">12.16.1.27 Getting the Allowed Values for a Slot</a></li>
</ul>
</li>
<li><a class="reference internal" href="#message-handler-functions">12.16.2 Message-handler Functions</a><ul>
<li><a class="reference internal" href="#existence-of-shadowed-handlers">12.16.2.1 Existence of Shadowed Handlers</a></li>
<li><a class="reference internal" href="#calling-shadowed-handlers">12.16.2.2 Calling Shadowed Handlers</a></li>
<li><a class="reference internal" href="#calling-shadowed-handlers-with-different-arguments">12.16.2.3 Calling Shadowed Handlers with Different Arguments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#definstances-functions">12.16.3 Definstances Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-definstances">12.16.3.1 Getting the List of Definstances</a></li>
<li><a class="reference internal" href="#determining-the-module-in-which-a-definstances-is-defined">12.16.3.2 Determining the Module in which a Definstances is Defined</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instance-manipulation-functions-and-actions">12.16.4 Instance Manipulation Functions and Actions</a><ul>
<li><a class="reference internal" href="#initializing-an-instance">12.16.4.1 Initializing an Instance</a></li>
<li><a class="reference internal" href="#deleting-an-instance">12.16.4.2 Deleting an Instance</a></li>
<li><a class="reference internal" href="#deleting-the-active-instance-from-a-handler">12.16.4.3 Deleting the Active Instance from a Handler</a></li>
<li><a class="reference internal" href="#determining-the-class-of-an-object">12.16.4.4 Determining the Class of an Object</a></li>
<li><a class="reference internal" href="#determining-the-name-of-an-instance">12.16.4.5 Determining the Name of an Instance</a></li>
<li><a class="reference internal" href="#determining-the-address-of-an-instance">12.16.4.6 Determining the Address of an Instance</a></li>
<li><a class="reference internal" href="#converting-a-symbol-to-an-instance-name">12.16.4.7 Converting a Symbol to an Instance-Name</a></li>
<li><a class="reference internal" href="#converting-an-instance-name-to-a-symbol">12.16.4.8 Converting an Instance-Name to a Symbol</a></li>
<li><a class="reference internal" href="#predicate-functions-1">12.16.4.9 Predicate Functions</a><ul>
<li><a class="reference internal" href="#testing-for-an-instance">12.16.4.9.1 Testing for an Instance</a></li>
<li><a class="reference internal" href="#testing-for-an-instance-address">12.16.4.9.2 Testing for an Instance-Address</a></li>
<li><a class="reference internal" href="#testing-for-an-instance-name">12.16.4.9.3 Testing for an Instance-Name</a></li>
<li><a class="reference internal" href="#testing-for-the-existence-an-instance">12.16.4.9.4 Testing for the Existence an Instance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reading-a-slot-value">12.16.4.10 Reading a Slot Value</a></li>
<li><a class="reference internal" href="#setting-a-slot-value">12.16.4.11 Setting a Slot Value</a></li>
<li><a class="reference internal" href="#multifield-slot-functions">12.16.4.12 Multifield Slot Functions</a><ul>
<li><a class="reference internal" href="#replacing-fields">12.16.4.12.1 Replacing Fields</a></li>
<li><a class="reference internal" href="#inserting-fields">12.16.4.12.2 Inserting Fields</a></li>
<li><a class="reference internal" href="#deleting-fields">12.16.4.12.3 Deleting Fields</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#defmodule-functions">12.17 Defmodule Functions</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-defmodules">12.17.1 Getting the List of Defmodules</a></li>
<li><a class="reference internal" href="#setting-the-current-module">12.17.2 Setting the Current Module</a></li>
<li><a class="reference internal" href="#getting-the-current-module">12.17.3 Getting the Current Module</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sequence-expansion">12.18 Sequence Expansion</a><ul>
<li><a class="reference internal" href="#sequence-expansion-and-rules">12.18.1 Sequence Expansion and Rules</a></li>
<li><a class="reference internal" href="#multifield-expansion-function">12.18.2 Multifield Expansion Function</a></li>
<li><a class="reference internal" href="#setting-the-sequence-operator-recognition-behavior">12.18.3 Setting The Sequence Operator Recognition Behavior</a></li>
<li><a class="reference internal" href="#getting-the-sequence-operator-recognition-behavior">12.18.4 Getting The Sequence Operator Recognition Behavior</a></li>
<li><a class="reference internal" href="#sequence-operator-caveat">12.18.5 Sequence Operator Caveat</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="constraints.html"
                        title="previous chapter">Section 11: Constraint Attributes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="appendix.html"
                        title="next chapter">Appendix A: Support Information</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/actions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="appendix.html" title="Appendix A: Support Information"
             >next</a> |</li>
        <li class="right" >
          <a href="constraints.html" title="Section 11: Constraint Attributes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CLIPS-BPG  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Kurt Pagani &lt;nilqed@gmail.com&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>